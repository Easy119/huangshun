webpackJsonp([145],{NXPC:function(t,e){},S7W1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("2hMI"),s=a("yclV"),n={data:function(){return{projectId:"",type:1,currentPage:1,total:null,pageSize:10,searchText:"",datalist:[],totalCompanyList:[],companyNameList:null}},created:function(){this.init()},watch:{$route:function(t,e){this.init()}},computed:{},mounted:function(){},methods:{init:function(){void 0!=this.$route.query.projectId?(this.projectId=this.$route.query.projectId,this.type=2):(this.type=1,this.projectId=""),this.initData(),this.getCompanyList()},initData:function(){var t=this;this.datalist=[];var e={number:this.pageSize,page:this.currentPage,search:this.searchText};""!=this.projectId&&(e.projectId=this.projectId),Object(i.J)(e).then(function(e){1==e.data.msgNo&&(t.datalist=e.data.payload.data,t.datalist.forEach(function(t){t.nameList=t.name.split(",")}),t.total=e.data.payload.total)})},currentChange:function(t){this.total>this.pageSize&&(this.currentPage=t,this.initData())},getCompanyList:function(){var t=this;Object(i._12)().then(function(e){if(1==e.data.msgNo){var a=e.data.payload;t.totalCompanyList=a}})},deleteNews:function(t,e){var a=this;Object(s.h)("确定要删除本条新闻？").then(function(){a.addaccountDialogVisible=!1,Object(i._37)({id:t,aif:e}).then(function(t){1==t.data.msgNo&&(Object(s.g)("success","删除成功"),a.initData())})}).catch(function(){})},goEditorNews:function(t,e){this.$router.push({path:"/home/investedNewsAdd",query:{aif:e}})},goCreatnew:function(){this.$router.push({path:"/home/investedNewsAdd"})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"personal-content-body"},[i("div",{staticClass:"table-content"},[i("div",{staticClass:"clear table-content-title"},[i("div",{staticClass:"left"},[t._v("公告发布")]),t._v(" "),i("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"搜索",clearable:!0},on:{change:function(e){t.initData()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[i("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),i("div",{staticClass:"table-group"},[i("div",{staticClass:"table-group-content"},[i("div",{staticClass:"clear table-group-title"},[i("div",{staticClass:"left breadcrumb"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[2==t.type?i("el-breadcrumb-item",{attrs:{to:{path:"/home/investProjectManageHomepage",query:{id:t.projectId}}}},[t._v("返回项目首页")]):t._e(),t._v(" "),i("el-breadcrumb-item",[t._v("公告发布（"+t._s(t.total)+"）")])],1)],1),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"table-group-title-btn btn-blue",on:{click:t.goCreatnew}},[i("span"),t._v("发布新公告\n            ")])])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"historyapply-group-tablebox table-group-tablebox"},[i("div",{staticClass:"table-normal-box"},[i("table",{staticClass:"table-normal"},[t._m(1),t._v(" "),t._l(t.datalist,function(e,a){return i("tr",{key:a},[i("td",[t._v(t._s(t.pageSize*(t.currentPage-1)+a+1))]),t._v(" "),i("td",[t._v(t._s(e.title))]),t._v(" "),e.nameList.length==t.totalCompanyList.length?i("td",[i("el-popover",{attrs:{placement:"top-start",width:"230",height:"500",trigger:"click"}},[t._l(e.nameList,function(e){return i("div",[t._v(t._s(e))])}),t._v(" "),i("span",{staticClass:"cursor",attrs:{slot:"reference"},slot:"reference"},[t._v("全部公司")])],2)],1):t._e(),t._v(" "),e.nameList.length!=t.totalCompanyList.length&&e.nameList.length>1?i("td",[i("el-popover",{attrs:{placement:"top-start",width:"230",height:"500",trigger:"click",content:e.name}},[t._l(e.nameList,function(e){return i("div",[t._v(t._s(e))])}),t._v(" "),i("span",{staticClass:"cursor",attrs:{slot:"reference"},slot:"reference"},[t._v("多个公司")])],2)],1):t._e(),t._v(" "),1==e.nameList.length?i("td",[t._v(t._s(e.name))]):t._e(),t._v(" "),i("td",[t._v(t._s(e.issue_time))]),t._v(" "),i("td",[i("span",{staticClass:"table-link",on:{click:function(a){t.goEditorNews(e.id,e.aif)}}},[t._v("编辑")]),t._v(" "),i("span",{staticClass:"table-link",on:{click:function(a){t.deleteNews(e.id,e.aif)}}},[t._v("删除")])])])})],2),t._v(" "),0==t.total?i("div",{staticClass:"table-nodata"},[i("img",{attrs:{src:a("urJZ")}}),t._v(" 没有对应数据\n            ")]):t._e()]),t._v(" "),0!=t.total?i("div",{staticClass:"pagination-normal"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage},on:{"current-change":t.currentChange}})],1):t._e()])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-group-tab"},[e("div",{staticClass:"clear"}),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{width:"30"}},[t._v("序号")]),t._v(" "),a("th",[t._v("文章标题")]),t._v(" "),a("th",[t._v("目标公司")]),t._v(" "),a("th",[t._v("发送时间")]),t._v(" "),a("th",{attrs:{width:"90"}},[t._v("操作")])])}]};var c=a("C7Lr")(n,r,!1,function(t){a("NXPC")},"data-v-46be955e",null);e.default=c.exports}});
//# sourceMappingURL=145.2ee05fdf1ce68c629698.js.map