webpackJsonp([106],{juWB:function(t,a){},lgAy:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("yclV"),l=(e("2hMI"),e("lzZH")),i={data:function(){return{id:"",typeList:[{value:1,label:"缴款"},{value:2,label:"分配"}],total:0,page:1,pageSize:10,cashFlowType:"",cashFlowProject:"",cashFlowDropboxShow:!1,tableHeader:[{param:"unit",text:"币种",width:"100"},{param:"all_subscribe",text:"缴款(万元)",width:"120"},{param:"all_capital",text:"分配本金(万元)",width:"120"},{param:"all_profit",text:"分配收益-税前(万元)",width:"120"}],tableData:[],tableData1:[]}},created:function(){this.id=this.$route.query.id,this.getListSummaryData(),this.getListCashFlowData()},computed:{},mounted:function(){},methods:{DropboxShow:function(){this.cashFlowDropboxShow=!this.cashFlowDropboxShow},toAdd:function(t){var a=this.selectCashFlowType(parseInt(t));this.$router.push({name:a,query:{id:this.id,unit:this.$route.query.unit,name:this.$route.query.name,add:1}})},selectCashFlowType:function(t){var a="";switch(t){case 1:a="directInvestProjectRunCashFlowJk";break;case 4:a="directInvestProjectRunCashFlowFp"}return a},toCashFlowPage:function(t){var a="";a="缴款"==t.type?this.selectCashFlowType(1):this.selectCashFlowType(4),this.$router.push({name:a,query:{unit:this.$route.query.unit,name:this.$route.query.name,jkId:t.id,id:this.id,c_type:t.c_type}})},everyPageSizeChange:function(t){this.pageSize=t,this.getListCashFlowData()},changeCurrentPage:function(t){this.page=t,this.getListCashFlowData()},typeChangeGetData:function(){this.cashFlowProject="",this.page=1,this.getListCashFlowData()},toSearch:function(){this.page=1,this.getListCashFlowData()},getListSummaryData:function(){var t=this;Object(l.J)({direct_invest_id:this.id}).then(function(a){if(1==a.data.msgNo){var e=a.data.payload;t.tableData=[],t.tableData.push(e)}})},getListCashFlowData:function(){var t=this;Object(l.I)({page:this.page,page_size:this.pageSize,direct_invest_id:this.id,type:this.cashFlowType,event_name:this.cashFlowProject}).then(function(a){if(1==a.data.msgNo){var e=a.data.payload;e.data.length>0&&e.data.forEach(function(t){1==t.unit?t.amount=t.amount?t.amount+"万人民币":"-":t.amount=t.amount?t.amount+"万美元":"-"}),t.total=e.total,t.tableData1=e.data}})},toDeleteCashFlow:function(t){var a=this;Object(s.h)("确定要删除该记录吗?").then(function(){Object(l.D)({distribute_id:t.id}).then(function(t){1==t.data.msgNo?(Object(s.g)("success","删除成功"),a.tableData1.length>1?(a.getListSummaryData(),a.getListCashFlowData()):a.page>1?(a.page=a.page-1,a.getListSummaryData(),a.getListCashFlowData()):(a.getListSummaryData(),a.getListCashFlowData())):Object(s.g)("info",t.data.message)})}).catch(function(){})}}},o={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"body"},[s("div",{staticClass:"cash_flow_table_box"},[t._m(0),t._v(" "),s("div",{staticClass:"cash_flow_table table"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},t._l(t.tableHeader,function(t,a){return s("el-table-column",{key:a,attrs:{prop:t.param,label:t.text}})}))],1)]),t._v(" "),s("div",{staticClass:"cash_flow_table_box",staticStyle:{"margin-top":"50px"}},[s("div",{staticClass:"cash_flow_table_title flex_between"},[s("div",{staticClass:"flex_start"},[s("span",{staticClass:"name"},[t._v("现金流数据")]),t._v(" "),s("el-select",{staticClass:" select_border",staticStyle:{width:"140px","margin-left":"30px"},attrs:{placeholder:"类型",clearable:""},on:{change:function(a){t.typeChangeGetData()}},model:{value:t.cashFlowType,callback:function(a){t.cashFlowType=a},expression:"cashFlowType"}},t._l(t.typeList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("div",{staticClass:"search_box "},[s("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"项目名称",clearable:""},model:{value:t.cashFlowProject,callback:function(a){t.cashFlowProject=a},expression:"cashFlowProject"}})],1),t._v(" "),s("div",{staticClass:"search_box"},[s("div",{staticClass:"btn_box"},[s("button",{on:{click:function(a){t.toSearch()}}},[t._v("搜索")])])])],1),t._v(" "),s("div",{staticClass:"flex_start "},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.toAdd}},[s("span",{staticClass:"el-dropdown-link"},[s("span",{staticClass:"iconfont icon-jia"}),t._v("添加新的现金流\n\t\t\t\t\t\t")]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"4"}},[s("span",{staticClass:"iconfont icon-zhichu "}),s("span",{staticClass:"dropdown_item_name"},[t._v("分配")])])],1)],1)],1)]),t._v(" "),s("div",{staticClass:"cash_flow_table table"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:"","max-height":"350"}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"date",label:"日期",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"type",label:"类型",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"event_name",label:"事件",width:"230"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"amount",label:"金额",width:"160"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"remark",label:"备注",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.toCashFlowPage(a.row)}}},[t._v("查看")]),t._v(" "),"分配"==a.row.type?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.toDeleteCashFlow(a.row)}}},[t._v("删除")]):t._e()]}}])}),t._v(" "),s("template",{slot:"empty"},[s("div",{staticClass:"table-nodata"},[s("img",{attrs:{src:e("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t\t\t")])])],2),t._v(" "),t.total>0?s("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","current-page":t.page,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.everyPageSizeChange,"current-change":t.changeCurrentPage}}):t._e()],1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"cash_flow_table_title flex_between"},[a("div",{staticClass:"flex_start"},[a("span",{staticClass:"name"},[this._v("汇总数据")])])])}]};var n=e("C7Lr")(i,o,!1,function(t){e("juWB")},"data-v-6897e12a",null);a.default=n.exports}});
//# sourceMappingURL=106.04c26c5f257bc760b91e.js.map