webpackJsonp([171],{FNlq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("2hMI");var i=n("yclV"),o=["jpg","jpeg","gif","png","bmp","Webp","application/x-img","image/jpeg","application/x-jpg","image/png","application/x-png","image/gif","application/x-bmp"],a=["doc","docx","ppt","pptx","xls","xlsx","application/msword","application/vnd.ms-powerpoint","application/x-ppt","application/vnd.ms-excel","application/x-xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],p=["txt","text/plain","text/xml","xml"],s=["pdf","application/pdf"],c={data:function(){return{src:"",pdfDoc:null,pageNum:1,pageRendering:!1,pageNumPending:null,scale:.9,doctype:0}},components:{},created:function(){if(this.$route.query.filetype||this.$route.query.url){var e=this.$route.query.filetype,t=this.$route.query.url+"&table_token="+localStorage.getItem("htcx_server_table_token");-1!=o.indexOf(e)?(this.doctype=1,window.open(t,"_self")):-1!=p.indexOf(e)?(this.doctype=1,window.open(t,"_self")):-1!=a.indexOf(e)?this.src="https://view.officeapps.live.com/op/view.aspx?src="+t:-1!=s.indexOf(e)?window.open("/static/pdf/web/viewer.html?file="+encodeURIComponent(t),"_self"):(Object(i.g)("info","暂不支持打开该文件"),window.open(t,"_self"))}else;},mounted:function(){},computed:{},methods:{downloadFile:function(){window.open(this.$route.query.url,"_self")},renderPage:function(e){this.pageRendering=!0;var t=this;this.pdfDoc.getPage(e).then(function(e){var n=e.getViewport(t.scale),i=document.getElementById("the-canvas");i.height=n.height,i.width=n.width;var o={canvasContext:i.getContext("2d"),viewport:n};e.render(o).promise.then(function(){t.pageRendering=!1,null!==t.pageNumPending&&(this.renderPage(t.pageNumPending),t.pageNumPending=null)})})},queueRenderPage:function(e){this.pageRendering?this.pageNumPending=e:this.renderPage(e)},onPrevPage:function(){this.pageNum<=1||(this.pageNum--,this.queueRenderPage(this.pageNum))},onNextPage:function(){this.pageNum>=this.pdfDoc.numPages||(this.pageNum++,this.queueRenderPage(this.pageNum))}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("iframe",{staticStyle:{height:"100%",position:"fixed"},attrs:{src:e.src,width:"100%",frameborder:"1"}}),e._v(" "),e.pdfDoc?n("div",{attrs:{id:"container"}},[n("canvas",{attrs:{id:"the-canvas"}}),e._v(" "),n("div",{staticClass:"foot"},[n("button",{staticClass:"foot_prev",class:{foot_btn_disabled:e.pageNum<=1},on:{click:e.onPrevPage}},[e._v("上一页")]),e._v(" "),n("span",[e._v(e._s(e.pageNum)+"/"+e._s(e.pdfDoc.numPages))]),e._v(" "),n("button",{staticClass:"foot_next",class:{foot_btn_disabled:e.pageNum>=e.pdfDoc.numPages},on:{click:e.onNextPage}},[e._v("下一页")]),e._v(" "),n("button",{staticClass:"foot_next foot_next_download",on:{click:e.downloadFile}},[e._v("下载文档")])])]):e._e()])},staticRenderFns:[]};var r=n("C7Lr")(c,d,!1,function(e){n("cqsB")},"data-v-2e9f6653",null);t.default=r.exports},cqsB:function(e,t){}});
//# sourceMappingURL=171.27afb76929722ccf8325.js.map