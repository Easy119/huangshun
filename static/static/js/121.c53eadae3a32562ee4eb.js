webpackJsonp([121],{"8JZL":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("2hMI"),r=(a("yclV"),{data:function(){return{list:[],routeList:[],pageType:1,projectId:"",projInfo:"",pageSize:10,keyWord:"",total:0,aType:1,template_id:"",status:1,status_str:"待我审批",applytype1:1,applytypeval:"待我审批",applytypelist:[{id:1,name:"待我审批"},{id:2,name:"我已审批"},{id:3,name:"我发起的审批"},{id:4,name:"抄送我的"}],applytypelist1:[{id:1,name:"出勤审批"},{id:2,name:"用印审批"}],currentPage:1}},watch:{$route:function(t,e){this.initData()}},created:function(){var t=this;0!=this.routeList.length||(this.routeList=this.$route.meta.routeList,this.routeList.forEach(function(e){"行政管理"==e.name_str&&(e.name_str=t.$route.query.aName)})),this.$route.query.page&&(this.currentPage=parseInt(this.$route.query.page)),this.initData()},beforeRouteEnter:function(t,e,a){a(function(t){})},beforeRouteLeave:function(t,e,a){a(function(t){})},mounted:function(){},methods:{initData:function(){var t=this;this.$route.query.from?this.pageType=this.$route.query.from:this.$router.push({name:"administrativeManageHomepage"}),2==this.pageType?this.$route.query.projectId?(this.projectId=this.$route.query.projectId,Object(s._300)({page:1,number:10,id:this.projectId}).then(function(e){1==e.data.msgNo&&(t.projInfo=e.data.payload.data[0])})):this.$router.push({name:"investProjectManageList"}):3==this.pageType&&(this.$route.query.template_id?this.template_id=this.$route.query.template_id:this.template_id=""),this.$route.query.aType?this.aType=this.$route.query.aType:this.aType="",this.routeList.forEach(function(e){if("审批列表"==e.name_str)if(e.query.status){switch(t.status=e.query.status,t.status){case 1:t.status_str="待我审批";break;case 2:t.status_str="我已审批";break;case 3:t.status_str="我发起的审批";break;case 4:t.status_str="抄送我的"}t.getListData(e.query.current)}else t.status=1,t.status_str="待我审批",t.getListData(1)})},currentChange:function(t){this.total>this.pageSize&&this.getListData(t)},getListData:function(t){var e=this;if(this.list=[],this.currentPage=t,4==this.status){var a={page:this.currentPage,pageSize:this.pageSize,fuzzyQuery:this.keyWord,template_id:this.template_id};Object(s._331)(a).then(function(t){e.changeRouterData();var a=t.data.payload;e.total=a.total,0!=a.data.length&&(a.data.forEach(function(t){0==t.status?t.status_str="待审批":1==t.status?t.status_str="审批中":2==t.status?t.status_str="审批通过":3==t.status?t.status_str="待用印":4==t.status?t.status_str="完成用印":5==t.status?t.status_str="撤回审批":-1==t.status&&(t.status_str="审批不通过")}),e.list=a.data)})}else{var r={page:this.currentPage,pageSize:this.pageSize,status:this.status,fuzzyQuery:this.keyWord,type:this.aType,template_id:this.template_id,company_id:this.projectId};Object(s._374)(r).then(function(t){e.changeRouterData();var a=t.data.payload;e.total=a.total,0!=a.data.length&&(e.list=a.data)})}},changeRouterData:function(){var t=this;this.routeList.forEach(function(e){if("审批列表"==e.name_str){var a=e.query;a.status=t.status,a.current=t.currentPage,t.$router.push({name:e.name,query:a})}})},changeApplyType:function(t){this.status=t,this.getListData(1)},changeApplyType1:function(t){this.getListData(1)},gotoViewapply:function(t,e){e=1==this.status||2==this.status?2:1,2==this.pageType?this.$router.push({name:"viewApply",query:{approval_id:t,status:e,from:this.pageType,projectId:this.projectId,page:this.currentPage}}):this.$router.push({name:"viewApply",query:{approval_id:t,status:e,from:this.pageType,template_id:this.$route.query.template_id,aType:this.$route.query.aType,aName:this.$route.query.aName,page:this.currentPage}})},toCreateApply:function(){2==this.pageType?this.$router.push({name:"createApplyHomepage",query:{projectId:this.projectId}}):this.$router.push({name:"createApply",query:{template_id:this.$route.query.template_id,aType:this.$route.query.aType,aName:this.$route.query.aName,from:3}})}}}),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal-content-body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-title clear"},[s("div",{staticClass:"left"},[t._v("审批列表")]),t._v(" "),s("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"搜索",clearable:!0},on:{change:function(e){t.getListData(1)}},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}},[s("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),s("div",{staticClass:"historyapply-group"},[s("div",{staticClass:"clear table-group-title"},[s("div",{staticClass:"historyapply-group-top-dropdown select-normal left"},[s("el-select",{attrs:{filterable:"",placeholder:"审批类型"},on:{change:t.changeApplyType},model:{value:t.status_str,callback:function(e){t.status_str=e},expression:"status_str"}},t._l(t.applytypelist,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("div",{staticClass:"right",on:{click:t.toCreateApply}},[t._m(0)]),t._v(" "),s("div",{staticClass:"clear"}),t._v(" "),s("div",{staticClass:"breadcrumb"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.routeList,function(e,a){return s("el-breadcrumb-item",{key:a,attrs:{to:{name:e.name,query:e.query}}},[t._v(t._s(e.name_str))])}))],1),t._v(" "),s("div",{staticClass:"line"})]),t._v(" "),s("div",{staticClass:"historyapply-group-tablebox"},[s("div",{staticClass:"table-normal-box"},[s("table",{staticClass:"table-normal"},[t._m(1),t._v(" "),t._l(t.list,function(e,a){return s("tr",{key:e.seq},[s("td",[t._v(t._s(t.pageSize*(t.currentPage-1)+a+1))]),t._v(" "),s("td",[t._v(t._s(e.title))]),t._v(" "),s("td",[t._v(t._s(e.kind))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.add_time))]),t._v(" "),s("td",[t._v(t._s(e.status_str))]),t._v(" "),s("td",[t._v(t._s(""==e.reasons||e.reasons==t.undefind?"无":e.reasons))]),t._v(" "),s("td",[s("span",{staticClass:"table-link",on:{click:function(a){t.gotoViewapply(e.approval_id,e.status)}}},[t._v("查看")])])])})],2),t._v(" "),0==t.total?s("div",{staticClass:"table-nodata"},[s("img",{attrs:{src:a("urJZ")}}),t._v(" 没有对应数据\n          ")]):t._e()]),t._v(" "),0!=t.total?s("div",{staticClass:"pagination-normal"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage},on:{"current-change":t.currentChange}})],1):t._e()])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-group-title-btn btn-blue"},[e("img",{attrs:{src:a("uVhs")}}),this._v("新建审批\n          ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{width:"30"}},[t._v("序号")]),t._v(" "),a("th",{attrs:{width:"90"}},[t._v("审批标题")]),t._v(" "),a("th",{attrs:{width:"90"}},[t._v("审批类型")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v("审批申请人")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("审批申请时间")]),t._v(" "),a("th",{attrs:{width:"90"}},[t._v("审批状态")]),t._v(" "),a("th",{attrs:{width:"90"}},[t._v("审批事由")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("操作")])])}]};var u=a("C7Lr")(r,i,!1,function(t){a("uY/A")},"data-v-5e00c55e",null);e.default=u.exports},"uY/A":function(t,e){}});
//# sourceMappingURL=121.c53eadae3a32562ee4eb.js.map