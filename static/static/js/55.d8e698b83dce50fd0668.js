webpackJsonp([55],{K1Dm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("yclV"),a=i("lzZH"),d=i("2hMI"),s={data:function(){return{id:"",type:1,count:"",unit:"",canSaveUnit:!1,add_info:[{event:"",income:"",date:"",unit:"",fund_id:"",fund_type:"",event_count:""}],tableData:[],edit_fund_type:"",edit_event:"",edit_income:"",edit_date:"",edit_unit:"",edit_fund_id:"",edit_event_count:"",coin_list:[{label:"人民币",value:1},{label:"美元",value:2}],is_add_page:1,is_editable:0,is_delete:0,fund_main_type_list:[{value:1,label:"母基金"},{value:2,label:"自管基金"},{value:5,label:"管理公司"}],fund_list:[],all_fund_list:[]}},created:function(){this.is_add_page=this.$route.query.is_add_page,this.is_delete=this.$route.query.is_delete,this.id=this.$route.query.id,this.type=this.$route.query.type,this.count=this.$route.query.count,this.getSelectListData(),this.getName(),this.is_add_page||this.getDeatilData()},computed:{},mounted:function(){},methods:{getName:function(){var t=this;Object(d._201)({id:this.id,type:this.type}).then(function(e){1==e.data.msgNo?t.unit=e.data.payload.data.unit:Object(n.g)("info",e.data.message)})},getSelectListData:function(){var t=this;Object(d._218)({fof_id:this.id,difference_sign:this.type}).then(function(e){1==e.data.msgNo?t.all_fund_list=e.data.payload.data:Object(n.g)("info",e.data.message)})},chooseFundType:function(t){this.add_info[0].fund_id="",this.add_info[0].unit="",this.edit_fund_id="",this.edit_unit="";var e=String(t);5==e?this.is_add_page?this.add_info[0].unit=this.unit:this.edit_unit=this.unit:this.is_add_page?this.add_info[0].unit="":this.edit_unit="",this.fund_list=this.all_fund_list[e]},chooseFundName:function(t){if(t){var e=Object(n.l)(this.fund_list,"id",t);1!=e.fund_type&&2!=e.fund_type||(this.is_add_page?this.add_info[0].unit=e.unit:this.edit_unit=e.unit),this.getEventCountData()}else this.add_info[0].event="",this.add_info[0].event_count="",this.add_info[0].unit="",this.edit_event="",this.edit_event_count="",this.edit_unit=""},chooseDate:function(t){if(!t)return this.add_info[0].event="",this.add_info[0].event_count="",this.edit_event="",void(this.edit_event_count="");this.getEventCountData()},getEventCountData:function(){var t=this;if(1==this.type)var e=2;else e=3;if(this.is_add_page){var i=this.add_info[0].date,a=this.add_info[0].fund_id,s="";if(1==this.add_info[0].fund_type)var l=2;else if(2==this.add_info[0].fund_type)l=3;else if(5==this.add_info[0].fund_type)l=1;else l=""}else{i=this.edit_date,a=this.edit_fund_id,s=this.tableData[0].id;if(1==this.edit_fund_type)l=2;else if(2==this.edit_fund_type)l=3;else if(5==this.edit_fund_type)l=1;else l=""}Object(d._169)({type:e,id:this.id,cash_type:5,date:i,fund_type:l,fund_id:a,event_id:s}).then(function(e){1==e.data.msgNo?t.is_add_page?(t.add_info[0].event=e.data.payload.event_name,t.add_info[0].event_count=e.data.payload.event_count):(t.edit_event=e.data.payload.event_name,t.edit_event_count=e.data.payload.event_count):Object(n.g)("info",e.data.message)})},addSave:function(){var t=this;1==this.type?Object(d.t)({event:this.add_info[0].event,income:this.add_info[0].income,date:this.add_info[0].date,unit:this.add_info[0].unit,fof_id:this.id,fund_type:this.add_info[0].fund_type,fund_id:this.add_info[0].fund_id,event_count:this.add_info[0].event_count}).then(function(e){1==e.data.msgNo?(Object(n.g)("success",e.data.message),t.clearData(),t.$router.go(-1)):Object(n.g)("info",e.data.message)}):Object(d.C)({event:this.add_info[0].event,income:this.add_info[0].income,date:this.add_info[0].date,unit:this.add_info[0].unit,petfund_id:this.id,fund_type:this.add_info[0].fund_type,fund_id:this.add_info[0].fund_id}).then(function(e){1==e.data.msgNo?(Object(n.g)("success",e.data.message),t.clearData(),t.$router.go(-1)):Object(n.g)("info",e.data.message)})},edit:function(t){this.is_editable=1;var e=String(t.fund_type);this.fund_list=this.all_fund_list[e],this.makeData(t)},editSave:function(t){var e=this;1==this.type?Object(d._97)({event:this.edit_event,income:this.edit_income,date:this.edit_date,unit:this.edit_unit,fof_id:this.id,id:t.id,fund_type:this.edit_fund_type,fund_id:this.edit_fund_id,event_count:this.edit_event_count}).then(function(t){1==t.data.msgNo?(Object(n.g)("success",t.data.message),e.is_editable=0,e.getDeatilData()):Object(n.g)("info",t.data.message)}):Object(d._112)({event:this.edit_event,income:this.edit_income,date:this.edit_date,unit:this.edit_unit,petfund_id:this.id,id:t.id,fund_type:this.edit_fund_type,fund_id:this.edit_fund_id}).then(function(t){1==t.data.msgNo?(Object(n.g)("success",t.data.message),e.is_editable=0,e.getDeatilData()):Object(n.g)("info",t.data.message)})},editCancel:function(){this.is_editable=0,this.clearData()},makeData:function(t){this.edit_event=t.event,this.edit_income=t.income,this.edit_date=t.date,this.edit_unit=t.unit,this.edit_fund_type=t.fund_type,this.edit_fund_id=t.fund_id},clearData:function(){this.edit_event="",this.edit_income="",this.edit_date="",this.edit_unit="",this.edit_fund_type="",this.edit_fund_id="",this.add_info[0].event="",this.add_info[0].income="",this.add_info[0].date="",this.add_info[0].unit="",this.add_info[0].fund_id="",this.add_info[0].fund_type=""},getDeatilData:function(){var t=this;1==this.type?Object(a.V)({id:this.count}).then(function(e){if(1==e.data.msgNo){var i=e.data.payload.data;t.edit_unit=i.unit,i.fund_id||(i.fund_id=""),i.fund_type||(i.fund_type=""),t.tableData=[],t.tableData.push(i)}else Object(n.g)("info",e.data.message)}):Object(a._15)({id:this.count}).then(function(e){if(1==e.data.msgNo){var i=e.data.payload.data;t.edit_unit=i.unit,i.fund_id||(i.fund_id=""),i.fund_type||(i.fund_type=""),t.tableData=[],t.tableData.push(i)}else Object(n.g)("info",e.data.message)})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"cash_flow_table_box"},[t._m(0),t._v(" "),1==t.is_add_page?n("div",{staticClass:"table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.add_info,border:""}},[n("el-table-column",{attrs:{prop:"unit",label:"支出主体类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.chooseFundType},model:{value:e.row.fund_type,callback:function(i){t.$set(e.row,"fund_type",i)},expression:"scope.row.fund_type"}},t._l(t.fund_main_type_list,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"fund_id",label:"支出主体名称",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},on:{change:t.chooseFundName},model:{value:e.row.fund_id,callback:function(i){t.$set(e.row,"fund_id",i)},expression:"scope.row.fund_id"}},t._l(t.fund_list,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(e){t.chooseDate(e)}},model:{value:e.row.date,callback:function(i){t.$set(e.row,"date",i)},expression:"scope.row.date"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"event",label:"事件",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{prop:"income",label:"金额（万元）",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.row.income,callback:function(i){t.$set(e.row,"income",i)},expression:"scope.row.income"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"unit",label:"币种",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t人民币\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==e.row.unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t美元\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.addSave(e.row)}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editCancel(e.row)}}},[t._v("取消")])]}}])})],1)],1):n("div",{staticClass:"table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"",label:"支出主体类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.is_editable?n("div",{},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.chooseFundType},model:{value:t.edit_fund_type,callback:function(e){t.edit_fund_type=e},expression:"edit_fund_type"}},t._l(t.fund_main_type_list,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.fund_type_name)+"\n\t\t\t\t\t\t")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"",label:"支出主体名称",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.is_editable?n("div",{},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.chooseFundName},model:{value:t.edit_fund_id,callback:function(e){t.edit_fund_id=e},expression:"edit_fund_id"}},t._l(t.fund_list,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.fund_name)+"\n\t\t\t\t\t\t")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.is_editable?n("div",{},[n("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(e){t.chooseDate(e)}},model:{value:t.edit_date,callback:function(e){t.edit_date=e},expression:"edit_date"}})],1):n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.date)+"\n\t\t\t\t\t\t")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"event",label:"事件",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.is_editable?n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.edit_event)+"\n\t\t\t\t\t\t")]):n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.event)+"\n\t\t\t\t\t\t")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"income",label:"金额（万元）",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.is_editable?n("div",{},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.edit_income,callback:function(e){t.edit_income=e},expression:"edit_income"}})],1):n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.income)+"\n\t\t\t\t\t\t")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"unit",label:"币种",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.edit_unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t人民币\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==t.edit_unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t美元\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),t.is_delete?n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.is_editable?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editSave(e.row)}}},[t._v("保存")]):t._e(),t._v(" "),t.is_editable?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editCancel(e.row)}}},[t._v("取消")]):t._e(),t._v(" "),t.is_editable?t._e():n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑")])]}}])}):t._e(),t._v(" "),n("template",{slot:"empty"},[n("div",{staticClass:"table-nodata"},[n("img",{attrs:{src:i("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t\t")])])],2)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cash_flow_table_title flex_between"},[e("div",{staticClass:"flex_start"},[e("span",{staticClass:"circle_blue"}),this._v(" "),e("span",{staticClass:"name"},[this._v("收入")])])])}]};var o=i("C7Lr")(s,l,!1,function(t){i("SR/+")},"data-v-d64f3650",null);e.default=o.exports},"SR/+":function(t,e){}});
//# sourceMappingURL=55.d8e698b83dce50fd0668.js.map