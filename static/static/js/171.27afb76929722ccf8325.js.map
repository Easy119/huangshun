{"version":3,"sources":["webpack:///src/pages/documentView/documentView.vue","webpack:///./src/pages/documentView/documentView.vue?08da","webpack:///./src/pages/documentView/documentView.vue"],"names":["IMAGE","DOC","TXT","PDF","documentView","data","src","pdfDoc","pageNum","pageRendering","pageNumPending","scale","doctype","components","created","this","$route","query","filetype","url","localStorage","getItem","indexOf","window","open","encodeURIComponent","Object","mUtils","mounted","computed","methods","downloadFile","renderPage","num","_this","getPage","then","page","viewport","getViewport","canvas","document","getElementById","height","width","renderContext","canvasContext","getContext","render","promise","queueRenderPage","onPrevPage","onNextPage","numPages","documentView_documentView","_vm","_h","$createElement","_c","_self","staticStyle","position","attrs","frameborder","_v","id","staticClass","class","foot_btn_disabled","on","click","_s","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/171.27afb76929722ccf8325.js","sourcesContent":["<template>\n  <!-- <div id=\"reader\">\n</div>\n -->\n  <div>\n    <iframe :src='src' width='100%' style=\"height:100%;position:fixed\" frameborder='1'>\n    </iframe>\n    <div id=\"container\" v-if=\"pdfDoc\">\n      <canvas id=\"the-canvas\"></canvas>\n      <div class=\"foot\">\n        <button class='foot_prev' :class=\"{'foot_btn_disabled':pageNum<=1}\" @click=\"onPrevPage\">上一页</button>\n        <span>{{pageNum}}/{{pdfDoc.numPages}}</span>\n        <button class='foot_next' :class=\"{'foot_btn_disabled':pageNum>=pdfDoc.numPages}\" @click=\"onNextPage\">下一页</button>\n        <button class='foot_next foot_next_download' @click=\"downloadFile\">下载文档</button>\n      </div>\n    </div>\n    <!-- <iframe id='previewPdf' :src=\"'/static/pdf/web/viewer.html?file=' + fileUrl\" height=\"560\" width=\"100%\">\n    </iframe> -->\n  </div>\n</template>\n</script>\n<script>\nimport {} from '../../config/api'\nimport { dialogConfirm, dialogConfirmHasbtn } from '../../config/mUtils'\nconst IMAGE = [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"Webp\", 'application/x-img', 'image/jpeg', 'application/x-jpg', 'image/png', 'application/x-png', 'image/gif', 'application/x-bmp']\nconst VIDEO = [\"rm\", \"rmvb\", \"mp4\", \"mov\", \"mtv\", \"wmv\", \"avi\", \"3gp\", \"flv\"]\nconst DOC = [\"doc\", \"docx\", \"ppt\", \"pptx\", \"xls\", \"xlsx\", 'application/msword', 'application/vnd.ms-powerpoint', 'application/x-ppt', 'application/vnd.ms-excel', 'application/x-xls', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']\nconst TXT = [\"txt\", 'text/plain', 'text/xml', 'xml']\nconst PDF = [\"pdf\", 'application/pdf']\nconst ZIP = [\"rar\", \"zip\", \"7z\", \"iso\", \"gz\"]\nexport default {\n  data() {\n    return {\n      src:'',\n      pdfDoc: null,\n      pageNum: 1,\n      pageRendering: false,\n      pageNumPending: null,\n      scale: 0.9,\n      doctype: 0 //0=>无文件1=>其他2=>pdf3=>doc\n    }\n  },\n  components: {},\n  created() {\n    if (!this.$route.query.filetype && !this.$route.query.url) {} else {\n      let filetype = this.$route.query.filetype;\n      // let url = this.$route.query.url;\n      // url = url.replace('http',\"https\");\n      let url = this.$route.query.url+'&table_token='+localStorage.getItem('htcx_server_table_token');\n      if (IMAGE.indexOf(filetype) != -1) {\n        this.doctype = 1;\n        window.open(url, '_self');\n      } else if (TXT.indexOf(filetype) != -1) {\n        this.doctype = 1;\n        window.open(url, '_self');\n      } else if (DOC.indexOf(filetype) != -1) {\n        this.src = 'https://view.officeapps.live.com/op/view.aspx?src=' + url;\n      } else if (PDF.indexOf(filetype) != -1) {\n        // alert(url);\n        window.open('/static/pdf/web/viewer.html?file=' + encodeURIComponent(url),'_self');\n        // window.open('/static/pdf/web/viewer.html?file=' + url,'_self');\n      } else {\n        dialogConfirm('info', '暂不支持打开该文件');\n        window.open(url, '_self');\n      }\n    }\n  },\n  mounted() {},\n  computed: {\n\n  },\n  methods: {\n    // showPDF(url) {\n    //   let _this = this;\n    //   PDFJS.getDocument(url).then(function(pdf) {\n    //     _this.pdfDoc = pdf\n    //     _this.renderPage(1)\n    //   });\n\n    // },\n    downloadFile() {\n      window.open(this.$route.query.url, '_self');\n    },\n    renderPage(num) {\n      this.pageRendering = true\n      let _this = this\n      this.pdfDoc.getPage(num).then(function(page) {\n        var viewport = page.getViewport(_this.scale)\n        let canvas = document.getElementById('the-canvas')\n        canvas.height = viewport.height\n        canvas.width = viewport.width\n        // Render PDF page into canvas context\n        var renderContext = {\n          canvasContext: canvas.getContext('2d'),\n          viewport: viewport\n        }\n        var renderTask = page.render(renderContext)\n\n        // Wait for rendering to finish\n        renderTask.promise.then(function() {\n          _this.pageRendering = false\n          if (_this.pageNumPending !== null) {\n            // New page rendering is pending\n            this.renderPage(_this.pageNumPending)\n            _this.pageNumPending = null\n          }\n        })\n      })\n    },\n    queueRenderPage(num) {\n      if (this.pageRendering) {\n        this.pageNumPending = num\n      } else {\n        this.renderPage(num)\n      }\n    },\n    onPrevPage() {\n      if (this.pageNum <= 1) {\n        return\n      }\n      this.pageNum--\n        this.queueRenderPage(this.pageNum)\n    },\n    onNextPage() {\n      if (this.pageNum >= this.pdfDoc.numPages) {\n        return\n      }\n      this.pageNum++\n        this.queueRenderPage(this.pageNum)\n    }\n  }\n}\n\n</script>\n<style lang=\"scss\" scoped>\n#reader {\n  width: 100% !important;\n  margin: 0 auto;\n}\n\n#container {\n  background-color: rgba(0, 0, 0, 0.75);\n  position: fixed;\n  width: 100%;\n  top: 30px;\n  bottom: 0px;\n  left: 0;\n  overflow: auto;\n  text-align: center;\n  padding: 5px;\n  box-sizing: border-box;\n  text-align: center; //display: flex;\n  //justify-content:center;\n}\n\n.pdf-page {}\n\n.foot {\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.75);\n  height: 30px;\n  position: fixed;\n  left: 0px;\n  top: 0px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  button {\n    color: #fff;\n    background: rgba(255, 255, 255, 0.4);\n    padding: 0px 5px;\n    height: 24px;\n    line-height: 24px;\n    border-radius: 3px;\n  }\n  span {\n    color: #fff;\n    line-height: 30px;\n    margin: 0px 10px;\n  }\n  .foot_btn_disabled {\n    background: #000;\n  }\n  .foot_prev {}\n  .foot_next_download {\n    margin-left: 30px;\n    background: #3C98E8;\n  }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/documentView/documentView.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('iframe',{staticStyle:{\"height\":\"100%\",\"position\":\"fixed\"},attrs:{\"src\":_vm.src,\"width\":\"100%\",\"frameborder\":\"1\"}}),_vm._v(\" \"),(_vm.pdfDoc)?_c('div',{attrs:{\"id\":\"container\"}},[_c('canvas',{attrs:{\"id\":\"the-canvas\"}}),_vm._v(\" \"),_c('div',{staticClass:\"foot\"},[_c('button',{staticClass:\"foot_prev\",class:{'foot_btn_disabled':_vm.pageNum<=1},on:{\"click\":_vm.onPrevPage}},[_vm._v(\"上一页\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.pageNum)+\"/\"+_vm._s(_vm.pdfDoc.numPages))]),_vm._v(\" \"),_c('button',{staticClass:\"foot_next\",class:{'foot_btn_disabled':_vm.pageNum>=_vm.pdfDoc.numPages},on:{\"click\":_vm.onNextPage}},[_vm._v(\"下一页\")]),_vm._v(\" \"),_c('button',{staticClass:\"foot_next foot_next_download\",on:{\"click\":_vm.downloadFile}},[_vm._v(\"下载文档\")])])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2e9f6653\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/documentView/documentView.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e9f6653\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./documentView.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./documentView.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./documentView.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e9f6653\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./documentView.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2e9f6653\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/documentView/documentView.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}