webpackJsonp([204],{Nduc:function(t,a){},h7Zo:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("3cXf"),n=e.n(i),s=e("2hMI"),l=e("yclV"),o={data:function(){return{tabelHeader:[],tableData:[],currentPage:1,pageSize:10,searchText:"",total:0,visibleDialog:!1,dialogTitle:"假期修改",dialogData:"",needSave:!1}},components:{},created:function(){this.initData()},computed:{},props:["fundId"],mounted:function(){},methods:{initData:function(){this.currentPage=1,this.getVocation()},currentChange:function(t){this.total>this.pageSize&&(this.currentPage=t,this.getVocation())},getVocation:function(){var t=this;Object(s._369)({page:this.currentPage,number:this.pageSize,searchText:this.searchText}).then(function(a){1==a.data.msgNo&&(t.tableData=a.data.payload.data,t.tabelHeader=a.data.payload.leave,t.total=a.data.payload.total)})},inputTime:function(t,a,e){this.needSave=!0;var i=t.keyCode;i>=48&&i<=57||8==i||46==i||190==i||(this.dialogData.data[e].hours=a.substring(0,a.length-1))},handleEditClick:function(t){var a=this;this.needSave=!1,this.dialogData=JSON.parse(n()(t)),this.dialogTitle=t.name+"的假期修改",this.visibleDialog=!0,this.dialogData.data=[],this.tabelHeader.forEach(function(e){var i={};i.leave_type=e.leave_type,i.leave_name=e.leave_name,void 0==t.data[e.leave_type]?i.hours=0:i.hours=t.data[e.leave_type],a.dialogData.data.push(i)})},submitEdit:function(){var t=this,a=this.dialogData.data;a.forEach(function(t){t.hours=parseFloat(t.hours)}),Object(s.G)({user_id:this.dialogData.user_id,data:n()(a)}).then(function(a){1==a.data.msgNo?(Object(l.g)("success","修改成功！"),t.visibleDialog=!1,t.initData()):Object(l.g)("fail",a.data.message)})},cancleEditor:function(){var t=this;this.needSave?Object(l.h)("确定放弃修改吗？").then(function(){t.visibleDialog=!1}).catch(function(){}):this.visibleDialog=!1},everyPageSizeChange:function(t){this.pageSize=t,this.getVocation()}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"personal-content-body"},[e("div",{staticClass:"table-content"},[e("div",{staticClass:"clear table-content-title"},[e("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"搜索",clearable:!0},on:{change:function(a){t.initData()}},model:{value:t.searchText,callback:function(a){t.searchText=a},expression:"searchText"}},[e("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("div",{staticClass:"table-group"},[e("div",{staticClass:"table-group-content"},[e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{fixed:"left",label:"姓名",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(a.row.name)+"\n\t\t\t\t\t\t\t\t")]}}])}),t._v(" "),t._l(t.tabelHeader,function(a,i){return e("el-table-column",{key:i,attrs:{fit:"","min-width":"220px",index:i,label:"剩余"+a.leave_name+"(小时)"},scopedSlots:t._u([{key:"default",fn:function(i){return[void 0!=i.row.data[a.leave_type]?e("span",[t._v(t._s(i.row.data[a.leave_type]))]):e("span",[t._v("0")])]}}])})}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"el_button",attrs:{type:"text",size:"small"},on:{click:function(e){t.handleEditClick(a.row)}}},[t._v("编辑")])]}}])})],2),t._v(" "),0!=t.total?e("div",{staticClass:"pagination-normal"},[t.total?e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"",total:t.total,"current-page":t.currentPage,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":t.everyPageSizeChange,"current-change":t.currentChange}}):t._e()],1):t._e()],1)])])]),t._v(" "),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.visibleDialog,width:"570px",center:"","append-to-body":!0},on:{"update:visible":function(a){t.visibleDialog=a}}},[e("div",{staticClass:"dialog_content"},[e("div",{staticClass:"vacation_list"},t._l(t.dialogData.data,function(a,i){return e("div",{staticClass:"vacation_item"},[e("div",{staticClass:"vacation_item_left"},[t._v(t._s(a.leave_name))]),t._v(" "),e("div",{staticClass:"vacation_item_center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.hours,expression:"item.hours"}],domProps:{value:a.hours},on:{keyup:function(e){t.inputTime(e,a.hours,i)},input:function(e){e.target.composing||t.$set(a,"hours",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"vacation_item_right"},[t._v("小时")])])}))]),t._v(" "),e("div",{staticClass:"dialog_footer clear",attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"dialog-btn-submit btn-blue marginl_10",on:{click:t.submitEdit}},[t._v("确定")]),t._v(" "),e("button",{staticClass:"dialog-btn-submit btn-blue-border",on:{click:t.cancleEditor}},[t._v("取消")])])])],1)},staticRenderFns:[]};var r=e("C7Lr")(o,c,!1,function(t){e("Nduc")},null,null);a.default=r.exports}});
//# sourceMappingURL=204.1646098da9c0d8485bf8.js.map