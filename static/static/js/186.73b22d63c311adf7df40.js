webpackJsonp([186],{Uqxe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("HzJ8"),i=a.n(s),o=a("2hMI"),n=a("yclV"),r={data:function(){return{list:[],pageSize:10,projectId:"",type:1,selectTime:null,keyWord:null,total:null,currentPage:1,fileuploadDialog:!1,id:"",name:"",phone:"",userName:"",password:"",alertType:"add",alertTitle:"添加账号",nameErrorMsg:"",phoneErrorMsg:"",userNameErrorMsg:"",passwordErrorMsg:"",canConfirm:!0,canSave:!1,showUserAndPassoword:!0,notConfim:!0}},computed:{nameReg:function(){return!this.notConfim&&((""==this.name||void 0==this.name)&&(this.nameErrorMsg="*姓名不能为空",!0))},phoneReg:function(){if(this.notConfim)return!1;return""==this.phone||void 0==this.phone?(this.phoneErrorMsg="*手机号不能为空",!0):!/^1[34578]\d{9}$/.test(this.phone)&&(this.phoneErrorMsg="*手机号码格式不正确",!0)}},watch:{$route:function(t,e){this.initData()}},mounted:function(){this.initData()},methods:{initData:function(){void 0!=this.$route.query.projectId?(this.projectId=this.$route.query.projectId,this.type=2):(this.type=1,this.projectId=""),this.getListData(1)},currentChange:function(t){this.total>this.pageSize&&this.getListData(t)},getListData:function(t){var e=this;this.list=[],this.currentPage=t;var a={page:t,number:this.pageSize};null!=this.selectTime&&""!=this.selectTime&&(a.time=this.selectTime),null!=this.keyWord&&""!=this.keyWord&&(a.search=this.keyWord),""!=this.projectId&&(a.projectId=this.projectId),Object(o.f)(a).then(function(t){var a=t.data.payload;e.total=a.total,0!=a.data.length&&(e.list=a.data)})},toStarOrForbidAcc:function(t,e){var a=this;Object(o._340)({id:t,type:e}).then(function(s){if(1==s.data.msgNo){var o="";o=1==e?"账户启用成功":"账户停用成功",Object(n.g)("success",o);var r=!0,l=!1,c=void 0;try{for(var u,d=i()(a.list);!(r=(u=d.next()).done);r=!0){var h=u.value;h.id==t&&(h.allow=e)}}catch(t){l=!0,c=t}finally{try{!r&&d.return&&d.return()}finally{if(l)throw c}}}})},toDelAccount:function(t){var e=this;Object(n.h)("删除该账户将使此公司中所有账号包括子账号都将被删除，确定要删除该账户吗？").then(function(){Object(o._36)({id:t}).then(function(t){1==t.data.msgNo&&(e.getListData(e.currentPage),Object(n.g)("success","账号删除成功"))})}).catch(function(){})},inputChange:function(){this.canSave=!0},alterAdd:function(t){this.fileuploadDialog=!0,this.alertType="add",this.alertTitle="添加账号",this.id=t,this.name="",this.phone="",this.userName="",this.password="",this.phoneErrorMsg="",this.nameErrorMsg="",this.notConfim=!0},toAddAccount:function(){var t=this;if(this.notConfim=!1,!this.nameReg&&!this.phoneReg){var e={cid:this.id,name:this.name,phone:this.phone};""!=this.userName&&null!=this.userName&&void 0!=this.userName&&(e.account=this.userName),""!=this.password&&null!=this.password&&void 0!=this.password&&(e.password=this.password),Object(o.g)(e).then(function(e){1==e.data.msgNo?(t.getListData(t.currentPage),Object(n.g)("success","账号添加成功"),t.fileuploadDialog=!1,t.canSave=!1):Object(n.g)("info",e.data.message)})}},alterEditor:function(t,e,a,s){this.fileuploadDialog=!0,this.alertType="editor",this.alertTitle="修改账号信息",this.nameErrorMsg="",this.phoneErrorMsg="",this.name=e,this.phone=a,this.userName=s,this.password="",this.id=t,this.notConfim=!0},toEditAccount:function(){var t=this;if(this.notConfim=!1,!this.nameReg&&!this.phoneReg){var e={id:this.id,name:this.name,phone:this.phone};""!=this.userName&&null!=this.userName&&void 0!=this.userName&&(console.log("userName"),e.account=this.userName),""!=this.password&&null!=this.password&&void 0!=this.password&&(console.log("password"),e.password=this.password),console.log(e),Object(o._88)(e).then(function(e){1==e.data.msgNo?(t.getListData(t.currentPage),Object(n.g)("success","账户信息修改成功"),t.fileuploadDialog=!1,t.canSave=!1):Object(n.g)("info",e.data.message)})}},toCancleConfirm:function(){var t=this;this.canSave?Object(n.h)("确定不保存退出么？").then(function(){t.canSave=!1,t.fileuploadDialog=!1}).catch(function(){}):this.fileuploadDialog=!1}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal-content-body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-title clear"},[s("div",{staticClass:"left"},[t._v("被投企业账号管理")]),t._v(" "),s("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"搜索",clearable:!0},on:{change:function(e){t.getListData(1)}},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}},[s("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("el-date-picker",{staticClass:"header-right-time right",attrs:{type:"date",editable:!1,placeholder:"选择日期",clearable:!0,"value-format":"yyyy-MM-dd"},on:{change:function(e){t.getListData(1)}},model:{value:t.selectTime,callback:function(e){t.selectTime=e},expression:"selectTime"}})],1),t._v(" "),s("div",{staticClass:"historyapply-group"},[s("div",{staticClass:"clear table-group-title"},[s("div",{staticClass:"left breadcrumb"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[2==t.type?s("el-breadcrumb-item",{attrs:{to:{path:"/home/investProjectManageHomepage",query:{id:t.projectId}}}},[t._v("返回项目首页")]):t._e(),t._v(" "),s("el-breadcrumb-item",[t._v("被投企业账号管理（"+t._s(t.total)+"）")])],1)],1),t._v(" "),s("div",{staticClass:"line"})]),t._v(" "),s("div",{staticClass:"historyapply-group-tablebox"},[s("div",{staticClass:"table-normal-box"},[s("table",{staticClass:"table-normal"},[t._m(0),t._v(" "),t._l(t.list,function(e){return s("tr",{key:e.seq},[s("td",[t._v(t._s(e.seq))]),t._v(" "),s("td",[t._v(t._s(e.companyName))]),t._v(" "),""==e.account||null==e.account?s("td",[t._v("未分配")]):s("td",[t._v(t._s(e.name))]),t._v(" "),""==e.account||null==e.account?s("td",[t._v("未分配")]):s("td",[t._v(t._s(e.account))]),t._v(" "),""==e.account||null==e.account?s("td",[t._v("未分配")]):s("td",[t._v(t._s(e.add_time))]),t._v(" "),""==e.account||null==e.account?s("td",{staticClass:"creditCz-box",on:{click:function(a){t.alterAdd(e.cid)}}},[s("span",{staticClass:"table-link"},[t._v("分配账号")])]):s("td",{staticClass:"creditCz-box"},[0==e.allow?s("span",{staticClass:"table-link",on:{click:function(a){t.toStarOrForbidAcc(e.id,1)}}},[t._v("启用")]):t._e(),t._v(" "),1==e.allow?s("span",{staticClass:"table-link",on:{click:function(a){t.toStarOrForbidAcc(e.id,0)}}},[t._v("停用")]):t._e(),t._v(" "),s("span",{staticClass:"table-link",on:{click:function(a){t.alterEditor(e.id,e.name,e.phone,e.account)}}},[t._v("编辑")]),t._v(" "),s("span",{staticClass:"table-link",on:{click:function(a){t.toDelAccount(e.id)}}},[t._v("删除账户")])])])})],2),t._v(" "),0==t.total?s("div",{staticClass:"table-nodata"},[s("img",{attrs:{src:a("urJZ")}}),t._v(" 没有对应数据\n          ")]):t._e()]),t._v(" "),0!=t.total?s("div",{staticClass:"pagination-normal"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage},on:{"current-change":t.currentChange}})],1):t._e()])]),t._v(" "),s("el-dialog",{attrs:{title:t.alertTitle,visible:t.fileuploadDialog,width:"570px",center:"","append-to-body":!0,"before-close":t.toCancleConfirm},on:{"update:visible":function(e){t.fileuploadDialog=e}}},[s("div",{staticClass:"dialog_content"},[s("div",{staticClass:"form-group margin-bottom-none"},[s("div",{staticClass:"form-group-inputboxgroup clear"},[s("div",{staticClass:"form-group-inputbox"},[s("h2",{staticClass:"form-group-inputbox-title"},[s("span",{staticClass:"account-icon icon-required"}),t._v("姓名")]),t._v(" "),s("div",{staticClass:"form-group-inputbox-selectbox select-normal-40 left"},[s("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"请填写",clearable:!0},on:{change:t.inputChange},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),t.nameReg?s("span",{staticClass:"form-group-inputbox-error"},[t._v(t._s(t.nameErrorMsg))]):t._e()])]),t._v(" "),s("div",{staticClass:"form-group-inputboxgroup clear  ",class:{"margin-bottom-none":!t.showUserAndPassoword}},[s("div",{staticClass:"form-group-inputbox"},[s("h2",{staticClass:"form-group-inputbox-title"},[s("span",{staticClass:"account-icon icon-required"}),t._v("手机号")]),t._v(" "),s("div",{staticClass:"form-group-inputbox-selectbox select-normal-40 left"},[s("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"请填写",clearable:!0,maxlength:"11"},on:{change:t.inputChange},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),t.phoneReg?s("span",{staticClass:"form-group-inputbox-error"},[t._v(t._s(t.phoneErrorMsg))]):t._e()])]),t._v(" "),t.showUserAndPassoword?s("div",{staticClass:"form-group-inputboxgroup clear"},[s("div",{staticClass:"form-group-inputbox"},[s("h2",{staticClass:"form-group-inputbox-title"},[t._v("账号")]),t._v(" "),s("div",{staticClass:"form-group-inputbox-selectbox select-normal-40 left"},[s("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"若不填写则默认账号为手机号",clearable:!0},on:{change:t.inputChange},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1)])]):t._e(),t._v(" "),t.showUserAndPassoword?s("div",{staticClass:"form-group-inputboxgroup clear margin-bottom-none"},[s("div",{staticClass:"form-group-inputbox"},[s("h2",{staticClass:"form-group-inputbox-title"},[t._v("密码")]),t._v(" "),s("div",{staticClass:"form-group-inputbox-selectbox select-normal-40 left"},[s("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"add"==t.alertType?"若不填写则默认密码为手机号":"******",clearable:!0},on:{change:t.inputChange},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)])]):t._e()])]),t._v(" "),s("div",{staticClass:"dialog_footer clear",attrs:{slot:"footer"},slot:"footer"},["add"==t.alertType?s("button",{staticClass:"dialog-btn-submit btn-blue",on:{click:t.toAddAccount}},[t._v("添加")]):t._e(),t._v(" "),"editor"==t.alertType?s("button",{staticClass:"dialog-btn-submit btn-blue",on:{click:t.toEditAccount}},[t._v("修改")]):t._e(),t._v(" "),s("button",{staticClass:"dialog-btn-submit btn-cancle",on:{click:t.toCancleConfirm}},[t._v("取消")])])])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{width:"30"}},[t._v("序号")]),t._v(" "),a("th",[t._v("公司名称")]),t._v(" "),a("th",[t._v("分配人员")]),t._v(" "),a("th",[t._v("分配账号")]),t._v(" "),a("th",[t._v("分配账号时间")]),t._v(" "),a("th",{attrs:{width:"160"}},[t._v("操作")])])}]};var c=a("C7Lr")(r,l,!1,function(t){a("nV/l")},"data-v-1d9dc010",null);e.default=c.exports},"nV/l":function(t,e){}});
//# sourceMappingURL=186.73b22d63c311adf7df40.js.map