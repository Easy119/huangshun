webpackJsonp([102],{BTOT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("yclV"),n=i("2hMI"),a={name:"motherFundRunInvestor",data:function(){return{type:1,id:"",tableData:[],currentPage:1,pageSize:10,totalCount:0,addData:{id:0,unit:3},investor_list:[],investor_list_edit:[],investor_id:"",invest_date:"",subscribe:"",service_fee:"",is_change:1,is_freeze:0,is_gp:0,edit_id:"",edit_investor_id:"",edit_invest_date:"",edit_subscribe:"",edit_service_fee:"",edit_is_change:"",edit_is_freeze:"",edit_is_gp:"",investor_type:[{value:1,label:"母基金"},{value:2,label:"管理公司"},{value:3,label:"投资人"}],business_status_list:[{value:1,label:"待变更"}],is_freeze_list:[{value:1,label:"是"},{value:0,label:"否"}],is_gp_list:[{value:1,label:"是"},{value:0,label:"否"}]}},created:function(){this.id=this.$route.query.id,this.type=this.$route.query.type,this.getMotherFundInvestorList(),this.getMotherFundInvestorAddInfo()},mounted:function(){},components:{},methods:{getMotherFundInvestorList:function(){var t=this;1==this.type?Object(n._198)({fof_id:this.id,page:this.currentPage,size:this.pageSize}).then(function(e){1==e.data.msgNo?(t.tableData=e.data.payload.data,t.totalCount=e.data.payload.count,t.tableData.unshift(t.addData)):Object(s.g)("info",e.data.message)}):Object(n._225)({pet_fund_id:this.id,page:this.currentPage,size:this.pageSize}).then(function(e){1==e.data.msgNo?(t.tableData=e.data.payload.data,t.totalCount=e.data.payload.count,t.tableData.unshift(t.addData)):Object(s.g)("info",e.data.message)})},getMotherFundInvestorAddInfo:function(){var t=this;1==this.type?Object(n._197)({fof_id:this.id}).then(function(e){1==e.data.msgNo?t.investor_list=e.data.payload.investors:Object(s.g)("info",e.data.message)}):Object(n._224)({pet_fund_id:this.id}).then(function(e){1==e.data.msgNo?t.investor_list=e.data.payload.investors:Object(s.g)("info",e.data.message)})},getMotherFundInvestorAddInfoEdit:function(){var t=this;Object(n._197)({fof_id:this.id,investor_id:this.edit_investor_id}).then(function(e){1==e.data.msgNo?t.investor_list_edit=e.data.payload.investors:Object(s.g)("info",e.data.message)})},addMotherFundInvestor:function(){var t=this;if(this.investor_id&&""!==this.is_freeze&&""!==this.is_gp){if(Object(s.p)(parseInt(this.subscribe)))return void Object(s.g)("info","认缴金额过大!");if(parseFloat(this.subscribe)<=0)return void Object(s.g)("info","认缴金额应大于0!");if(parseFloat(this.subscribe)!=this.subscribe)return void Object(s.g)("info","认购金额不能为空");if(parseFloat(this.service_fee)<0)return void Object(s.g)("info","应收服务费应大于或等于0!");if(parseFloat(this.service_fee)!=this.service_fee)return void Object(s.g)("info","应收服务费不能为空");if(Object(s.p)(parseInt(this.service_fee)))return void Object(s.g)("info","应收服务费金额过大!");1==this.type?Object(n.s)({fof_id:this.id,investor_id:this.investor_id,invest_date:this.invest_date,service_fee:this.service_fee,subscribe:this.subscribe,is_change:this.is_change,is_freeze:this.is_freeze,is_gp:this.is_gp}).then(function(e){1==e.data.msgNo?(Object(s.g)("success",e.data.message),t.investor_id="",t.invest_date="",t.service_fee="",t.subscribe="",t.is_change="",t.is_freeze=0,t.is_gp=0,t.getMotherFundInvestorAddInfo(),t.getMotherFundInvestorList()):Object(s.g)("info",e.data.message)}):Object(n.B)({pet_fund_id:this.id,investor_id:this.investor_id,invest_date:this.invest_date,service_fee:this.service_fee,subscribe:this.subscribe,is_change:this.is_change,is_freeze:this.is_freeze,is_gp:this.is_gp}).then(function(e){1==e.data.msgNo?(Object(s.g)("success",e.data.message),t.investor_id="",t.invest_date="",t.service_fee="",t.subscribe="",t.is_change="",t.is_freeze=0,t.is_gp=0,t.getMotherFundInvestorAddInfo(),t.getMotherFundInvestorList()):Object(s.g)("info",e.data.message)})}else this.investor_id?""===this.is_gp?Object(s.g)("info","是否为GP不能为空!"):""===this.is_freeze&&Object(s.g)("info","冻结选项不能为空!"):Object(s.g)("info","投资人名称不能为空!")},investTypeChange:function(t,e){if(t){var i=this.getSelectedItem(t,this.investor_list);this.tableData[0].investor_type=i.investor_class}else this.tableData[0].investor_type=""},investTypeChangeEdit:function(t,e){var i=e.$index;if(t){var s=this.getSelectedItem(t,this.investor_list_edit);this.tableData[i].investor_type=s.investor_class}else this.tableData[i].investor_type=""},getSelectedItem:function(t,e){return e.find(function(e){return e.id===t})},edit:function(t){console.log(t),this.edit_id=t.id,this.edit_investor_id=t.investor_id,this.edit_invest_date=t.invest_date,this.edit_subscribe=t.subscribe,this.edit_service_fee=t.service_fee,this.edit_is_change=t.is_change,this.edit_is_freeze=t.is_freeze,this.edit_is_gp=t.is_gp,this.getMotherFundInvestorAddInfoEdit()},editSave:function(t){var e=this;if(this.edit_investor_id&&""!==this.edit_is_gp&&""!==this.edit_is_freeze){if(Object(s.p)(parseInt(this.edit_subscribe)))return void Object(s.g)("info","认缴金额过大!");if(parseFloat(this.edit_subscribe)<=0)return void Object(s.g)("info","认缴金额应大于0!");if(parseFloat(this.edit_subscribe)!=this.edit_subscribe)return void Object(s.g)("info","认缴金额不能为空");if(parseFloat(this.edit_service_fee)<0)return void Object(s.g)("info","应收服务费应大于或等于0!");if(parseFloat(this.edit_service_fee)!=this.edit_service_fee)return void Object(s.g)("info","应收服务费不能为空");if(Object(s.p)(parseInt(this.edit_service_fee)))return void Object(s.g)("info","应收服务费金额过大!");1==this.type?Object(n._96)({fof_id:this.id,investor_id:this.edit_investor_id,invest_date:this.edit_invest_date,subscribe:this.edit_subscribe,service_fee:this.edit_service_fee,is_change:this.edit_is_change,is_freeze:this.edit_is_freeze,is_gp:this.edit_is_gp,id:this.edit_id}).then(function(t){1==t.data.msgNo?(Object(s.g)("success",t.data.message),e.edit_id=-1,e.getMotherFundInvestorList()):Object(s.g)("info",t.data.message)}):Object(n._111)({pet_fund_id:this.id,investor_id:this.edit_investor_id,invest_date:this.edit_invest_date,subscribe:this.edit_subscribe,service_fee:this.edit_service_fee,is_change:this.edit_is_change,is_freeze:this.edit_is_freeze,is_gp:this.edit_is_gp,id:this.edit_id}).then(function(t){1==t.data.msgNo?(Object(s.g)("success",t.data.message),e.edit_id=-1,e.getMotherFundInvestorList()):Object(s.g)("info",t.data.message)})}else this.edit_investor_id?""===this.edit_is_gp?Object(s.g)("info","是否为GP不能为空!"):""===this.edit_is_freeze&&Object(s.g)("info","冻结选项不能为空!"):Object(s.g)("info","投资人名称不能为空!")},editCancel:function(){this.edit_id=-1},deleteInvestor:function(t){var e=this;if(t.can_del){Object(s.h)("确定要删除所选投资人吗").then(function(){1==e.type?Object(n._57)({id:t.id}).then(function(t){1==t.data.msgNo?(Object(s.g)("success",t.data.message),e.tableData.length>1?e.getMotherFundInvestorList():(e.currentPage>1&&(e.currentPage=e.currentPage-1),e.getMotherFundInvestorList()),e.getMotherFundInvestorAddInfo()):Object(s.g)("info",t.data.message)}):Object(n._65)({id:t.id}).then(function(t){1==t.data.msgNo?(Object(s.g)("success",t.data.message),e.tableData.length>1?e.getMotherFundInvestorList():(e.currentPage>1&&(e.currentPage=e.currentPage-1),e.getMotherFundInvestorList()),e.getMotherFundInvestorAddInfo()):Object(s.g)("info",t.data.message)})}).catch(function(){})}else Object(s.g)("info","您无权限操作该条数据")},clearData:function(){this.investor_id="",this.invest_date="",this.subscribe="",this.service_fee="",this.is_change="",this.is_freeze="",this.is_gp=""},everyPageSizeChange:function(t){this.pageSize=t,this.getMotherFundInvestorList()},changeCurrentPage:function(t){this.currentPage=t,this.getMotherFundInvestorList()}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body fundManage_body"},[i("div",{staticClass:"main under_fund"},[i("div",{staticClass:"under_fund_main table"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{prop:"index",label:"序号",width:"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s((t.currentPage-1)*t.pageSize+e.$index)+"\n\t\t\t\t\t\t\t")]):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t新增\n\t\t\t\t\t\t\t")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"fund_type",label:"投资人名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.row.id==t.edit_id?i("div",{},[i("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:function(i){t.investTypeChangeEdit(i,e)}},model:{value:t.edit_investor_id,callback:function(e){t.edit_investor_id=e},expression:"edit_investor_id"}},t._l(t.investor_list_edit,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.investor_name)+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:function(e){t.investTypeChange(e)}},model:{value:t.investor_id,callback:function(e){t.investor_id=e},expression:"investor_id"}},t._l(t.investor_list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"investor_class",label:"投资人类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.investor_class?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t管理公司 \n\t\t\t\t\t\t\t")]):2==e.row.investor_class?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t一般投资人\n\t\t\t\t\t\t\t")]):3==e.row.investor_class?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t母基金\n\t\t\t\t\t\t\t")]):4==e.row.investor_class?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t子基金\n\t\t\t\t\t\t\t")]):5==e.row.investor_class?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t自管基金\n\t\t\t\t\t\t\t")]):i("div",{})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:"是否为GP",width:"115"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.is_gp?"是":"否")+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.is_gp?"是":"否")+"\n\t\t\t\t\t\t\t\t")])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"invest_date",label:"入伙日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.row.id==t.edit_id?i("div",{},[i("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.edit_invest_date,callback:function(e){t.edit_invest_date=e},expression:"edit_invest_date"}})],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.invest_date?e.row.invest_date:"-")+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.invest_date,callback:function(e){t.invest_date=e},expression:"invest_date"}})],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"subscribe",label:"认缴（万元）",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.row.id==t.edit_id?i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:"",maxlength:"16"},model:{value:t.edit_subscribe,callback:function(e){t.edit_subscribe=e},expression:"edit_subscribe"}})],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.subscribe)+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:"",maxlength:"16"},model:{value:t.subscribe,callback:function(e){t.subscribe=e},expression:"subscribe"}})],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"service_fee",label:"应收服务费（万元）",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.row.id==t.edit_id?i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:"",maxlength:"16"},model:{value:t.edit_service_fee,callback:function(e){t.edit_service_fee=e},expression:"edit_service_fee"}})],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.service_fee)+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:"",maxlength:"16"},model:{value:t.service_fee,callback:function(e){t.service_fee=e},expression:"service_fee"}})],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:"是否冻结",width:"115"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.row.id==t.edit_id?i("div",{},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.edit_is_freeze,callback:function(e){t.edit_is_freeze=e},expression:"edit_is_freeze"}},t._l(t.is_freeze_list,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.is_freeze?"是":"否")+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.is_freeze,callback:function(e){t.is_freeze=e},expression:"is_freeze"}},t._l(t.is_freeze_list,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:"工商状态",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.row.is_change?"待变更":"正常")+"\n\t\t\t\t\t\t\t")]):i("div",{})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"ir_manager",label:"IR经理",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"customer_manager",label:"客户经理",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"unit",label:"币种",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.unit?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t人民币\n\t\t\t\t\t\t\t")]):2==e.row.unit?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t美元\n\t\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"current_value",label:"现值（万元）",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"amount_paid_in",label:"实缴（万元）",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"amount_paid_in_plan",label:"实缴进度",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.row.amount_paid_in_plan)+" %\n\t\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"back",label:"回款返本（万元）",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"回款收益-税后（万元）",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"irr",label:"XIRR",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"interest",label:"计息中（万元）",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"is_check",label:"已确认（万元）",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.row.id!=t.edit_id?i("div",{},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.deleteInvestor(e.row)}}},[t._v("删除")])],1):i("div",{},[e.row.id==t.edit_id?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editSave(e.row)}}},[t._v("保存")]):t._e(),t._v(" "),e.row.id==t.edit_id?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editCancel(e.row)}}},[t._v("取消")]):t._e()],1)]):i("div",{},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.addMotherFundInvestor(e)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.clearData()}}},[t._v("清除")])],1)]}}])})],1),t._v(" "),t.totalCount?i("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.everyPageSizeChange,"current-change":t.changeCurrentPage}}):t._e()],1)])])},staticRenderFns:[]};var d=i("C7Lr")(a,r,!1,function(t){i("xUZC")},"data-v-6b4d4010",null);e.default=d.exports},xUZC:function(t,e){}});
//# sourceMappingURL=102.de19545dcd952832e3e0.js.map