{"version":3,"sources":["webpack:///src/pages/applyManage/applytempList.vue","webpack:///./src/pages/applyManage/applytempList.vue?cab1","webpack:///./src/pages/applyManage/applytempList.vue"],"names":["applytempList","data","applyTypelist","visibleDialog","template_id","filterText","visibleList","defaultProps","children","label","visibleCheckedall","checkedVisibleStr","defaultChechedArr","allVisibleStr","created","this","initdata","components","computed","mounted","watch","val","$refs","tree","filter","methods","defineProperty_default","_this","Object","api","then","res","msgNo","payload","getImgurl","e","currentTarget","src","onerror","changeTempstatus","status","_this2","message","message1","mUtils","catch","gotoApplytempProcess","type","$router","push","name","query","changeVisible","visible","getUserRule","_this3","is_all","vl","forEach","item","undefined","length","disabled","item1","id","toString","split","setCheckedKeyStr","setCheckedKeys","filterNode","value","indexOf","changeVisibleCheckedall","visivleListChange","item2","newArr","checkedNodes","element","newObj","url","cvs","concat","compare","property","a","b","deleteCheckedVisivle","_this4","index","splice","commitVisible","_this5","str","gotoCreatetemp","visibleClose","applyManage_applytempList","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","separator-class","to","_l","_s","className","icon","description","update_time","_e","on","click","$event","title","width","center","append-to-body","before-close","update:visible","placeholder","model","callback","$$v","expression","slot","change","ref","show-checkbox","node-key","default-checked-keys","filter-node-method","props","check","scopedSlots","_u","key","fn","node","error","people","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/176.e9eaf8eae7bae8a5e4aa.js","sourcesContent":["<template>\n  <div class=\"personal-content-body\">\n    <div class=\"content\">\n      <div class=\"content-title clear\">\n        <div class=\"left\">审批模版列表</div>\n      </div>\n      <div class=\"clear table-group-title\">\n        <div class=\"left breadcrumb\">\n          <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n            <el-breadcrumb-item :to=\"{name:'administrativeManageHomepage'}\">行政管理</el-breadcrumb-item>\n            <el-breadcrumb-item>审批配置</el-breadcrumb-item>\n          </el-breadcrumb>\n        </div>\n        <div class=\"right\">\n          <!-- <div class=\"table-group-title-btn btn-blue\" @click=\"gotoCreatetemp\"><span class=\"iconfont icon-add\"></span>新建审批模版</div> -->\n        </div>\n        <div class=\"line\"></div>\n      </div>\n      <div class=\"applytemp_body\">\n        <div class=\"applytemp_group\" v-for=\"item in applyTypelist\">\n          <div class=\"applytemp_group_title\">\n            <div class=\"applytemp_group_title_left\">\n              {{item.className}}<span class=\"fcolor_gray\">（{{item.data.length}}）</span>\n            </div>\n          </div>\n          <div class=\"applytemp_list\">\n            <div class=\"applytemp_item\" v-for=\"item1 in item.data\">\n              <div class=\"applytemp_item_row flex\">\n                <img :src=\"item1.icon\" class=\"applytemp_item_img\">\n                <div class=\"flex_column flex_grow\">\n                  <div class=\"fsize_15 lineheight_1.5\">{{item1.name}}</div>\n                  <div class=\"fsize_12 fcolor_gray_85 applytemp_item_ellipsis lineheight_2\">\n                    {{item1.description}}\n                  </div>\n                  <div class=\"fsize_12 fcolor_gray_85 lineheight_2\">{{item1.update_time}} 更新</div>\n                </div>\n                <div class=\"line\"></div>\n              </div>\n              <div class=\"applytemp_item_row flex flex_grow\">\n                <div class=\"fsize_14 flex_column flex_grow\">\n                  <div class=\"fsize_12 lineheight_2\">可见范围</div>\n                  <div class=\"fsize_12 fcolor_gray_85\">\n                    <span class=\"marginr_5 fcolor_gray_85 lineheight_2\" v-if=\"item1.visible==0\">全部可见</span>\n                    <span class=\"marginr_5 fcolor_gray_85 lineheight_2\" v-if=\"item1.visible!=0\">部分可见</span>\n                    <span class=\"applytemp_item_link lineheight_2\" @click=\"changeVisible(item1.visible,item1.template_id)\">修改</span></div>\n                </div>\n                <div class=\"line\"></div>\n              </div>\n              <div class=\"applytemp_item_row flex flex_grow\">\n                <div class=\"fsize_12 applytemp_item_link marginr_5\" @click=\"gotoApplytempProcess(item1.template_id,item1.type)\">审批流程</div>\n                <div class=\"fsize_12 applytemp_item_link marginr_5\" @click=\"changeTempstatus(item1.template_id,1)\" v-if=\"item1.status==0\">启用</div>\n                <div class=\"fsize_12 applytemp_item_link marginr_5\" @click=\"changeTempstatus(item1.template_id,0)\" v-if=\"item1.status==1\">停用</div>\n                <div class=\"fsize_12 applytemp_item_link marginr_5\" @click=\"changeTempstatus(item1.template_id,-1)\">删除</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!--  设置权限弹窗-->\n      <el-dialog class=\"choosePeopleDialog\" title=\"设置可见人员\" :visible.sync=\"visibleDialog\" width=\"800px\" center :append-to-body='true' :before-close=\"visibleClose\">\n        <div class=\"dialog_content flex\">\n          <div class=\"dialog_content_content\">\n            <div class=\"dialog_content_content_title\">选择人员</div>\n            <div>\n              <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\">\n                <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\n              </el-input>\n            </div>\n            <div class=\"custom_tree_node flex\">\n              <el-checkbox v-model=\"visibleCheckedall\" @change=\"changeVisibleCheckedall\">全选</el-checkbox>\n            </div>\n            <el-tree class=\"dialog_content_content_tree\" :data=\"visibleList\" show-checkbox node-key=\"id\" :default-checked-keys=\"defaultChechedArr\" :filter-node-method=\"filterNode\" ref=\"tree\" :props=\"defaultProps\" @check=\"visivleListChange\">\n              <span class=\"custom_tree_node flex\" slot-scope=\"{ node, data }\">\n              <img :src=\"node.data.url\"  @error=\"getImgurl\" v-if=\"node.data.url!=undefined\">\n              {{node.data.name}}\n            </span>\n            </el-tree>\n          </div>\n          <div class=\"dialog_content_content\">\n            <div class=\"dialog_content_content_title\">已选人员</div>\n            <div class=\"selected_list\">\n              <div class=\"selected_item\" v-for=\"people in checkedVisibleStr\">\n                <img class=\"selected_item_headimg\" :src=\"people.url\" @error=\"getImgurl\">{{people.name}}\n                <i class=\"el-icon-error\" @click=\"deleteCheckedVisivle(people.id)\"></i></div>\n            </div>\n          </div>\n        </div>\n        <div slot=\"footer\" class=\"dialog_footer clear\">\n          <button class=\"dialog-btn-submit btn-blue\" @click=\"commitVisible\">确定</button>\n          <button class=\"dialog-btn-submit btn-blue-border \" @click=\"visibleClose\">取消</button>\n        </div>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n<script>\n//审批流程状态\nimport { dialogConfirm, compareJson, dialogConfirmHasbtn } from '../../config/mUtils'\nimport { templateList, getUserCompany, applyTempblock, visibleRange } from '../../config/api'\nexport default {\n  data() {\n    return {\n      applyTypelist: [],\n      //权限弹窗///////////////////////////////\n      visibleDialog: false,\n      template_id: '',\n      filterText: '', //人员筛选\n      visibleList: [], //权限列表\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      visibleCheckedall: false,\n      checkedVisibleStr: [],\n      defaultChechedArr: [], //所有用户数组id\n      allVisibleStr: [],\n      // defaultExpandedArr:[],\n    }\n  },\n  created() {\n    this.initdata();\n  },\n  components: {},\n  computed: {},\n  mounted() {\n    // window.onbeforeunload = function(event) {\n    //   return confirm(\"确定退出吗\");\n    // }\n  },\n  watch: {\n    filterText(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  methods: {\n    initdata() {\n      //获取审批类型\n      templateList({}).then(res => {\n        if (res.data.msgNo == 1) {\n          this.applyTypelist = res.data.payload;\n        }\n      })\n    },\n    getImgurl(e) {\n      e.currentTarget.src = '../../static/images/header_userimg.png';\n      e.onerror = null;\n    },\n    //修改模版状态\n    changeTempstatus(template_id, status) {\n      let message = '';\n      let message1 = '';\n      if (status == -1) {\n        message = '确认删除吗？';\n        message1 = '删除成功';\n      } else if (status == 0) {\n        message = '确认停用吗？';\n        message1 = '停用成功';\n      } else if (status == 1) {\n        message = '确认启用吗？'\n        message1 = '启用成功'\n      }\n      dialogConfirmHasbtn(message).then(res => {\n        applyTempblock({\n          template_id: template_id,\n          status: status\n        }).then(res => {\n          if (res.data.msgNo == 1) {\n            dialogConfirm('success', message1);\n          } else {\n            dialogConfirm('fail', res.data.message);\n          }\n          this.initdata();\n        })\n      }).catch(() => {})\n    },\n    //前往流程配置\n    gotoApplytempProcess(template_id, type) {\n      this.$router.push({\n        name: 'applytempProcess',\n        query: {\n          template_id: template_id,\n          type: type\n        }\n      })\n    },\n    ////////////////////////////可见配置弹窗//////////////////////\n    //显示修改可见弹窗\n    changeVisible(visible, template_id) {\n      this.visibleDialog = true;\n      this.template_id = template_id;\n      this.filterText = '';\n      this.getUserRule(visible);\n    },\n    //获取用户权限信息\n    getUserRule(visible) {\n      getUserCompany({\n        is_all: 1\n      }).then(res => {\n        if (res.data.msgNo == 1) {\n          this.visibleList = res.data.payload;\n          let vl = res.data.payload;\n          let allVisibleStr = [];\n          vl.forEach(item => {\n            if (item.children == undefined || item.children.length == 0) {\n              item.disabled = true\n            }\n            if (item.children != undefined) {\n              item.children.forEach(item1 => {\n                allVisibleStr.push(item1.id);\n              })\n            }\n          })\n          this.allVisibleStr = allVisibleStr;\n          this.visibleList = vl;\n          if (visible != 0) {\n            visible = visible.toString().split(',');\n            if (visible.length == allVisibleStr.length) {\n              this.visibleCheckedall = true;\n            } else {\n              this.visibleCheckedall = false;\n            }\n            this.setCheckedKeyStr(visible);\n            this.$refs.tree.setCheckedKeys(visible);\n          } else {\n            this.visibleCheckedall = false;\n            this.checkedVisibleStr = [];\n            this.$refs.tree.setCheckedKeys([]);\n          }\n        } else {\n          dialogConfirm('fail', res.data.message);\n        }\n      })\n    },\n    //人员筛选\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.name.toString().indexOf(value) !== -1;\n    },\n    //全选/全不选\n    changeVisibleCheckedall(e) {\n      if (e) {\n        this.$refs.tree.setCheckedKeys(this.allVisibleStr);\n        this.setCheckedKeyStr(this.allVisibleStr);\n      } else {\n        this.$refs.tree.setCheckedKeys([]);\n        this.setCheckedKeyStr([]);\n      }\n    },\n    //选中人员变化\n    visivleListChange(item1, item2) {\n      let newArr = [];\n      item2.checkedNodes.forEach(element => {\n        if (element.children == undefined) {\n          let newObj = {};\n          newObj.id = element.id;\n          newObj.url = element.url;\n          newObj.name = element.name\n          newArr.push(newObj);\n        }\n      });\n      this.checkedVisibleStr = newArr;\n      if (this.checkedVisibleStr.length == this.allVisibleStr.length) {\n        this.visibleCheckedall = true;\n      } else {\n        this.visibleCheckedall = false;\n      }\n    },\n    //获取已选中人员\n    setCheckedKeyStr(visible) {\n      let vl = this.visibleList;\n      let cvs = [];\n      vl.forEach(item => {\n        if (item.children != undefined) {\n          cvs = cvs.concat(item.children.filter(item1 => {\n            return visible.indexOf(item1.id.toString()) != -1 || visible.indexOf(item1.id) != -1\n          }))\n        }\n      })\n      this.checkedVisibleStr = cvs;\n    },\n    compare(property) {\n      return function(a, b) {\n        var value1 = a[property];\n        var value2 = b[property];\n        return value1 - value2;\n      }\n    },\n    deleteCheckedVisivle(id) {\n      this.checkedVisibleStr.forEach((element, index) => {\n        if (id == element.id) {\n          this.checkedVisibleStr.splice(index, 1);\n        }\n      });\n      let newArr = [];\n      this.checkedVisibleStr.forEach((element, index) => {\n        newArr.push(element.id);\n      });\n      if (this.checkedVisibleStr.length == this.allVisibleStr.length) {\n        this.visibleCheckedall = true;\n      } else {\n        this.visibleCheckedall = false;\n      }\n      this.$refs.tree.setCheckedKeys(newArr);\n    },\n    //设置权限弹窗确定按钮\n    commitVisible() {\n      let str = '';\n      if (this.checkedVisibleStr.length == 0 || this.checkedVisibleStr.length == this.allVisibleStr.length) {\n        str = 0;\n      } else {\n        str = [];\n        this.checkedVisibleStr.forEach(item => {\n          str.push(item.id);\n        })\n      }\n      str = str.toString();\n      visibleRange({\n        template_id: this.template_id,\n        visible: str\n      }).then(res => {\n        if (res.data.msgNo == 1) {\n          dialogConfirm('success', '修改成功！');\n          this.visibleDialog = false;\n          this.initdata();\n        } else {\n          dialogConfirm('info', res.data.message);\n        }\n      })\n\n    },\n    gotoCreatetemp() {\n      this.$router.push({\n        name: 'createApplyTemp'\n      })\n    },\n    //关闭弹窗之前调用\n    visibleClose() {\n      this.template_id = '';\n      this.checkedVisibleStr = [];\n      this.$refs.tree.setCheckedKeys([]);\n      this.visibleCheckedall = false;\n      this.visibleDialog = false;\n    },\n    getImgurl(e) {\n      e.currentTarget.src = '../../static/images/header_userimg.png';\n      e.onerror = null;\n    }\n  }\n}\n\n</script>\n<style lang=\"scss\" scoped>\n@import '../../style/apply';\n.table-group-title {\n  padding: 0px;\n}\n\n.applytemp_body {\n  width: 100%;\n  .applytemp_group_title {\n    width: 100%;\n    font-size: 16px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    color: #323334;\n    padding: 0 9px;\n    text-align: left;\n    background: #f8f8f8;\n  }\n  .applytemp_list {\n    width: 100%;\n    margin-bottom: 10px;\n    .applytemp_item {\n      display: flex;\n      align-items: center;\n      padding: 14px 0px;\n      min-width: 0;\n      border-bottom: 1px solid #e0e0e0;\n      &:last-child {\n        border: none;\n      }\n    }\n    .applytemp_item_row {\n      padding: 0px 14px;\n      width: 33%;\n      flex-shrink: 0;\n      position: relative;\n      align-items: center;\n      .line {\n        height: 60px;\n        width: 1px;\n        background: #e0e0e0;\n        flex-shrink: 0;\n      }\n      .flex_column {\n        min-width: 0;\n        overflow: hidden;\n      }\n    }\n    .applytemp_item_img {\n      width: 50px;\n      height: 50px;\n      flex-shrink: 0;\n      margin-right: 12px;\n    }\n    .applytemp_item_ellipsis {\n      min-width: 0;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      padding-right: 10px;\n    }\n    .lineheight_2 {\n      line-height: 1.5em;\n    }\n    .applytemp_item_link {\n      color: #53b8ff!important;\n      cursor: pointer;\n    }\n  }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/applyManage/applytempList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personal-content-body\"},[_c('div',{staticClass:\"content\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"clear table-group-title\"},[_c('div',{staticClass:\"left breadcrumb\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{name:'administrativeManageHomepage'}}},[_vm._v(\"行政管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"审批配置\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"right\"}),_vm._v(\" \"),_c('div',{staticClass:\"line\"})]),_vm._v(\" \"),_c('div',{staticClass:\"applytemp_body\"},_vm._l((_vm.applyTypelist),function(item){return _c('div',{staticClass:\"applytemp_group\"},[_c('div',{staticClass:\"applytemp_group_title\"},[_c('div',{staticClass:\"applytemp_group_title_left\"},[_vm._v(\"\\n            \"+_vm._s(item.className)),_c('span',{staticClass:\"fcolor_gray\"},[_vm._v(\"（\"+_vm._s(item.data.length)+\"）\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"applytemp_list\"},_vm._l((item.data),function(item1){return _c('div',{staticClass:\"applytemp_item\"},[_c('div',{staticClass:\"applytemp_item_row flex\"},[_c('img',{staticClass:\"applytemp_item_img\",attrs:{\"src\":item1.icon}}),_vm._v(\" \"),_c('div',{staticClass:\"flex_column flex_grow\"},[_c('div',{staticClass:\"fsize_15 lineheight_1.5\"},[_vm._v(_vm._s(item1.name))]),_vm._v(\" \"),_c('div',{staticClass:\"fsize_12 fcolor_gray_85 applytemp_item_ellipsis lineheight_2\"},[_vm._v(\"\\n                  \"+_vm._s(item1.description)+\"\\n                \")]),_vm._v(\" \"),_c('div',{staticClass:\"fsize_12 fcolor_gray_85 lineheight_2\"},[_vm._v(_vm._s(item1.update_time)+\" 更新\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line\"})]),_vm._v(\" \"),_c('div',{staticClass:\"applytemp_item_row flex flex_grow\"},[_c('div',{staticClass:\"fsize_14 flex_column flex_grow\"},[_c('div',{staticClass:\"fsize_12 lineheight_2\"},[_vm._v(\"可见范围\")]),_vm._v(\" \"),_c('div',{staticClass:\"fsize_12 fcolor_gray_85\"},[(item1.visible==0)?_c('span',{staticClass:\"marginr_5 fcolor_gray_85 lineheight_2\"},[_vm._v(\"全部可见\")]):_vm._e(),_vm._v(\" \"),(item1.visible!=0)?_c('span',{staticClass:\"marginr_5 fcolor_gray_85 lineheight_2\"},[_vm._v(\"部分可见\")]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"applytemp_item_link lineheight_2\",on:{\"click\":function($event){_vm.changeVisible(item1.visible,item1.template_id)}}},[_vm._v(\"修改\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"line\"})]),_vm._v(\" \"),_c('div',{staticClass:\"applytemp_item_row flex flex_grow\"},[_c('div',{staticClass:\"fsize_12 applytemp_item_link marginr_5\",on:{\"click\":function($event){_vm.gotoApplytempProcess(item1.template_id,item1.type)}}},[_vm._v(\"审批流程\")]),_vm._v(\" \"),(item1.status==0)?_c('div',{staticClass:\"fsize_12 applytemp_item_link marginr_5\",on:{\"click\":function($event){_vm.changeTempstatus(item1.template_id,1)}}},[_vm._v(\"启用\")]):_vm._e(),_vm._v(\" \"),(item1.status==1)?_c('div',{staticClass:\"fsize_12 applytemp_item_link marginr_5\",on:{\"click\":function($event){_vm.changeTempstatus(item1.template_id,0)}}},[_vm._v(\"停用\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"fsize_12 applytemp_item_link marginr_5\",on:{\"click\":function($event){_vm.changeTempstatus(item1.template_id,-1)}}},[_vm._v(\"删除\")])])])}))])})),_vm._v(\" \"),_c('el-dialog',{staticClass:\"choosePeopleDialog\",attrs:{\"title\":\"设置可见人员\",\"visible\":_vm.visibleDialog,\"width\":\"800px\",\"center\":\"\",\"append-to-body\":true,\"before-close\":_vm.visibleClose},on:{\"update:visible\":function($event){_vm.visibleDialog=$event}}},[_c('div',{staticClass:\"dialog_content flex\"},[_c('div',{staticClass:\"dialog_content_content\"},[_c('div',{staticClass:\"dialog_content_content_title\"},[_vm._v(\"选择人员\")]),_vm._v(\" \"),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}},[_c('i',{staticClass:\"el-input__icon el-icon-search\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_vm._v(\" \"),_c('div',{staticClass:\"custom_tree_node flex\"},[_c('el-checkbox',{on:{\"change\":_vm.changeVisibleCheckedall},model:{value:(_vm.visibleCheckedall),callback:function ($$v) {_vm.visibleCheckedall=$$v},expression:\"visibleCheckedall\"}},[_vm._v(\"全选\")])],1),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",staticClass:\"dialog_content_content_tree\",attrs:{\"data\":_vm.visibleList,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.defaultChechedArr,\"filter-node-method\":_vm.filterNode,\"props\":_vm.defaultProps},on:{\"check\":_vm.visivleListChange},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom_tree_node flex\"},[(node.data.url!=undefined)?_c('img',{attrs:{\"src\":node.data.url},on:{\"error\":_vm.getImgurl}}):_vm._e(),_vm._v(\"\\n            \"+_vm._s(node.data.name)+\"\\n          \")])}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog_content_content\"},[_c('div',{staticClass:\"dialog_content_content_title\"},[_vm._v(\"已选人员\")]),_vm._v(\" \"),_c('div',{staticClass:\"selected_list\"},_vm._l((_vm.checkedVisibleStr),function(people){return _c('div',{staticClass:\"selected_item\"},[_c('img',{staticClass:\"selected_item_headimg\",attrs:{\"src\":people.url},on:{\"error\":_vm.getImgurl}}),_vm._v(_vm._s(people.name)+\"\\n              \"),_c('i',{staticClass:\"el-icon-error\",on:{\"click\":function($event){_vm.deleteCheckedVisivle(people.id)}}})])}))])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog_footer clear\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"dialog-btn-submit btn-blue\",on:{\"click\":_vm.commitVisible}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('button',{staticClass:\"dialog-btn-submit btn-blue-border \",on:{\"click\":_vm.visibleClose}},[_vm._v(\"取消\")])])])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-title clear\"},[_c('div',{staticClass:\"left\"},[_vm._v(\"审批模版列表\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2b257f3a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/applyManage/applytempList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2b257f3a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./applytempList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./applytempList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./applytempList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b257f3a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./applytempList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2b257f3a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/applyManage/applytempList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}