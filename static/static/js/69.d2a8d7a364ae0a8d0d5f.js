webpackJsonp([69],{addp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("2hMI"),l=a("yclV"),n={inject:["reload"],data:function(){return{id:"",count:"",currentIndexTotal:-1,currentIndexDetail:-1,datalistTotal:[{unit:"",type:"收入-认购服务费",event:""}],datalistDetail:[],editData:[],addData:{id:0,unit:3},editListItem:{},pay:"",date:"",note:"",edit_pay:"",edit_date:"",edit_note:"",dialogVisible:!1}},created:function(){this.id=this.$route.query.id,this.count=this.$route.query.count,this.getInitData()},computed:{},mounted:function(){},methods:{getInitData:function(){var t=this;Object(i._154)({sg_company_manager_id:this.id,count:this.count}).then(function(e){if(1==e.data.msgNo){t.$set(t.datalistTotal,0,e.data.payload.data.event),t.datalistDetail=e.data.payload.data.detail;for(var a=0,i=t.datalistDetail.length;a<i;a++)t.datalistDetail[a].unit=e.data.payload.data.event.unit}else Object(l.g)("info",e.data.message)})},editTotal:function(t,e){this.currentIndexTotal=t},editSaveTotal:function(t){var e=this;Object(i._107)({event:t.event,date:t.date,id:t.id,event_count:t.event_count}).then(function(t){1==t.data.msgNo?(Object(l.g)("success",t.data.message),e.reload()):Object(l.g)("info",t.data.message)})},editCancelTotal:function(t){this.reload()},edit:function(t,e){console.log(e),this.editListItem=e,this.getPayHistoryList()},addSaveDetail:function(t){var e=this;return console.log(t),this.pay?this.date?Object(l.n)(this.pay)?Object(l.p)(this.pay)?(Object(l.g)("info","当期实缴金额过大!"),!1):void Object(i.z)({pay:this.pay,date:this.date,note:this.note,unit:this.editListItem.unit,investor_id:this.editListItem.investor_id,sg_company_manager_id:this.id,count:this.count}).then(function(t){1==t.data.msgNo?(Object(l.g)("success",t.data.message),e.clearData(),e.getInitData(),e.getPayHistoryList()):Object(l.g)("info",t.data.message)}):(Object(l.g)("info","当期实缴金额格式错误!"),!1):(Object(l.g)("info","实际到账日期不能为空"),!1):(Object(l.g)("info","当期实缴金额不能为空"),!1)},getPayHistoryList:function(){var t=this;Object(i._205)({investor_id:this.editListItem.investor_id,sg_company_manager_id:this.id,count:this.count}).then(function(e){console.log(e),1==e.data.msgNo?(t.dialogVisible=!0,t.editData=e.data.payload.data,t.editData.unshift(t.addData)):Object(l.g)("info",e.data.message)})},addClearDetail:function(t){console.log(t),this.clearData()},editDetail:function(t,e){console.log(e),this.currentIndexDetail=t,this.edit_pay=e.pay,this.edit_date=e.date,this.edit_note=e.note},editSaveDetail:function(t){var e=this;return this.edit_pay?this.edit_date?Object(l.n)(this.edit_pay)?Object(l.p)(this.edit_pay)?(Object(l.g)("info","当期实缴金额过大!"),!1):void Object(i._105)({pay:this.edit_pay,date:this.edit_date,note:this.edit_note,id:t.id}).then(function(t){1==t.data.msgNo?(Object(l.g)("success",t.data.message),e.currentIndexDetail=-1,e.clearData(),e.getPayHistoryList(),e.getInitData()):Object(l.g)("info",t.data.message)}):(Object(l.g)("info","当期实缴金额格式错误!"),!1):(Object(l.g)("info","实际到账日期不能为空"),!1):(Object(l.g)("info","当期实缴金额不能为空"),!1)},editCancelDetail:function(t){this.clearData(),this.currentIndexDetail=-1},deleteDetail:function(t,e){var a=this;Object(l.h)("确定要删除所选基金吗?").then(function(){Object(i._58)({id:e.id}).then(function(t){1==t.data.msgNo?(Object(l.g)("success",t.data.message),a.getPayHistoryList(),a.getInitData()):Object(l.g)("info",t.data.message)})}).catch(function(){})},clearData:function(){this.pay="",this.date="",this.note="",this.edit_pay="",this.edit_date="",this.edit_note=""},getEventCountData:function(t,e){var a=this;if(t){if(1==this.datalistTotal[e].fund_type)var n=2;else if(2==this.datalistTotal[e].fund_type)n=3;else n="";var s=this.datalistTotal[e].id;Object(i._169)({type:l.i,id:this.id,cash_type:l.c,date:t,fund_type:n,fund_id:this.datalistTotal[e].fund_id,event_id:s}).then(function(t){1==t.data.msgNo?(a.datalistTotal[e].event=t.data.payload.event_name,a.datalistTotal[e].event_count=t.data.payload.event_count):Object(l.g)("info",t.data.message)})}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("div",{staticClass:"cash_flow_table_box"},[t._m(0),t._v(" "),i("div",{staticClass:"cash_flow_table table"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.datalistTotal,border:"","empty-text":""}},[i("el-table-column",{attrs:{prop:"coin",label:"币种"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(1==e.row.unit?"人民币":"美元")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"日期",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-date-picker",{attrs:{disabled:e.$index!=t.currentIndexTotal,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd",editable:!1},on:{change:function(a){t.getEventCountData(a,e.$index)}},model:{value:e.row.date,callback:function(a){t.$set(e.row,"date",a)},expression:"scope.row.date"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"event",label:"事件",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.event)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t收入-认购服务费\n\t\t\t\t\t\t")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"service_fee",label:"应缴服务费（万元）",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"paid_service_fee",label:"实缴服务费（万元）",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index!=t.currentIndexTotal?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editTotal(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),e.$index==t.currentIndexTotal?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editSaveTotal(e.row)}}},[t._v("保存")]):t._e(),t._v(" "),e.$index==t.currentIndexTotal?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editCancelTotal(e.row)}}},[t._v("取消")]):t._e()]}}])})],1)],1)]),t._v(" "),i("div",{staticClass:"cash_flow_table_box"},[t._m(1),t._v(" "),i("div",{staticClass:"cash_flow_table"},[i("div",{staticClass:"table"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.datalistDetail,border:"","empty-text":""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"100",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"investor_name",label:"投资人",width:"130",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"subscribe",label:"认缴金额（万元）",width:"150",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"service_fee",label:"应缴服务费（万元）",width:"150",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"pay",label:"实缴服务费（万元）",width:"150",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"到账日期",width:"150",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"unit",label:"币种",width:"150",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t"+t._s(1==e.row.unit?"人民币":"美元")+"\n\t\t\t\t\t\t\t")]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.$index,e.row)}}},[t._v("编辑")])]}}])}),t._v(" "),i("template",{slot:"empty"},[i("div",{staticClass:"table-nodata"},[i("img",{attrs:{src:a("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t\t\t\t")])])],2)],1)])]),t._v(" "),i("el-dialog",{attrs:{"custom-class":"pop","append-to-body":"",title:"编辑",visible:t.dialogVisible,width:"700px",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog_body table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.editData,border:"","empty-text":""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"70",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.row.id)+"\n\t\t\t\t\t\t\t")]):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t新增\n\t\t\t\t\t\t\t")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"investor_name",label:"当期实缴金额（万元）",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t.currentIndexDetail==e.$index?i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:"",maxlength:"16"},model:{value:t.edit_pay,callback:function(e){t.edit_pay=e},expression:"edit_pay"}})],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.pay)+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:"",maxlength:"16"},model:{value:t.pay,callback:function(e){t.pay=e},expression:"pay"}})],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"实际到账日期",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t.currentIndexDetail==e.$index?i("div",{},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",editable:!1},model:{value:t.edit_date,callback:function(e){t.edit_date=e},expression:"edit_date"}})],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.date)+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",editable:!1},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"note",label:"备注",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[t.currentIndexDetail==e.$index?i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.edit_note,callback:function(e){t.edit_note=e},expression:"edit_note"}})],1):i("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.note)+"\n\t\t\t\t\t\t\t\t")])]):i("div",{},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?i("div",{},[e.$index!=t.currentIndexDetail?i("div",{},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editDetail(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteDetail(e.$index,e.row)}}},[t._v("删除")])],1):i("div",{},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editSaveDetail(e.row)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editCancelDetail(e.row)}}},[t._v("取消")])],1)]):i("div",{},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.addSaveDetail(e.row)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.addClearDetail(e.row)}}},[t._v("清除")])],1)]}}])})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cash_flow_table_title flex_between"},[e("div",{staticClass:"flex_start"},[e("span",{staticClass:"circle_blue"}),this._v(" "),e("span",{staticClass:"name"},[this._v("收入-认购服务费")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cash_flow_table_title flex_between"},[e("div",{staticClass:"flex_start"},[e("span",{staticClass:"circle_blue"}),this._v(" "),e("span",{staticClass:"name"},[this._v("明细")])])])}]};var o=a("C7Lr")(n,s,!1,function(t){a("xO4O")},"data-v-c5da0662",null);e.default=o.exports},xO4O:function(t,e){}});
//# sourceMappingURL=69.d2a8d7a364ae0a8d0d5f.js.map