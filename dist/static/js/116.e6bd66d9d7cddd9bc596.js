webpackJsonp([116],{"3a2y":function(t,e){},"9AO7":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("xg4f"),i=a("yclV"),s=(a("ij9N"),a("2hMI")),o=a("lzZH"),r={data:function(){return{isSetPowerDialogShow:!1,havePowerUserIds:[],setPoweFundId:null,ids:"",short_name:"",name:"",fund_state:"",BeginDate:"",LastDate:"",tableHeader:[{param:"index",text:"序号",width:"80"},{param:"short_name",text:"母基金简称",width:"200"},{param:"id",text:"ID",width:"80"},{param:"name",text:"合伙企业",width:"200"},{param:"is_master",text:"基金类型",width:"120"},{param:"unit",text:"币种",width:"100"},{param:"subscription_amount",text:"认缴规模(万元)",width:"150"},{param:"amount_paid_in",text:"实缴规模(万元)",width:"150"},{param:"paid_in_proportion",text:"缴款比例",width:"140"},{param:"multiple",text:"倍数",width:"100"},{param:"check_multiple",text:"复核倍数",width:"130"},{param:"irr",text:"XIRR",width:"100"},{param:"protocol_end_date",text:"协议到期日",width:"150"},{param:"fund_end_date",text:"基金期限(年)",width:"150"},{param:"external_payment",text:"对外认缴人民币(万元)",width:"180"},{param:"external_payment_meiyuan",text:"对外认缴美元(万元)",width:"180"},{param:"external_payment_fact",text:"对外实缴人民币(万元)",width:"180"},{param:"external_payment_fact_meiyuan",text:"对外实缴美元(万元)",width:"180"},{param:"record_state_name",text:"备案状态",width:"120"},{param:"is_change",text:"工商状态",width:"120"},{param:"check_date",text:"核准日期",width:"120"},{param:"sg_company_manager_name",text:"管理公司",width:"300"}],tableData:[],total:null,page:1,pageSize:10,record_state:[],all_short_name:[],all_name:[]}},created:function(){this.getListData()},mounted:function(){},components:{setPower:n.a},methods:{deleteFund:function(t){var e=this;if(t.auth.auth_delete){Object(i.h)("确定要删除所选基金吗").then(function(){Object(o.A)({id:t.id}).then(function(t){1==t.data.msgNo?(Object(i.g)("success",t.data.message),e.tableData.length>1?e.getListData():e.page>1?(e.page=e.page-1,e.getListData()):e.getListData(e.page)):Object(i.g)("info",t.data.message)})}).catch(function(){})}else Object(i.g)("info","您无权限操作该条数据")},view:function(t){t.auth.check_operate?this.$router.push({name:"motherFundCompanyDetail",query:{id:t.id}}):Object(i.g)("info","您无权限操作该条数据")},addMotherFund:function(){this.$router.push({name:"motherFundAdd"})},toFundRunPage:function(t){t.auth.fund_operate?this.$router.push({name:"motherFundRun",query:{id:t.id,type:1}}):Object(i.g)("info","您无权限操作该条数据")},toFundFilePage:function(t){t.auth.fund_operate?this.$router.push({name:"investorReport",query:{fundId:t.id,page:this.page,type:1}}):Object(i.g)("info","您无权限操作该条数据")},toRunAllViewPage:function(){this.$router.push({name:"motherFundRunList",query:{type:1}})},setUserPower:function(t){t.auth.auth_operate?this.getHavePowerUsers(t.id):Object(i.g)("info","您没有设置权限，请联系管理员！")},getHavePowerUsers:function(t){var e=this;this.setPoweFundId=t,Object(s._176)({type:3,data_id:t}).then(function(t){1==t.data.msgNo?(e.havePowerUserIds=t.data.payload.ids,e.isSetPowerDialogShow=!0):Object(i.g)("info",t.data.message)})},getSetPowerIds:function(t){this.subComponentPostIds=[];for(var e=0,a=t.length;e<a;e++)-1==this.subComponentPostIds.indexOf(t[e])&&this.subComponentPostIds.push(t[e]);var n=this.decodeSelectedUserId(this.subComponentPostIds);this.ids=n.join(",")},decodeSelectedUserId:function(t){for(var e=[],a=[],n=0,i=t.length;n<i;n++)a=t[n].id.split("-"),-1==e.indexOf(a[0])&&e.push(a[0]);return e},setPowerSubmit:function(){var t=this;Object(s._322)({table_name:"mjj_fof",type:3,data_id:this.setPoweFundId,ids:this.ids}).then(function(e){1==e.data.msgNo?(t.isSetPowerDialogShow=!1,Object(i.g)("success",e.data.message)):Object(i.g)("info",e.data.message)})},getListData:function(t){var e=this;t&&(this.page=1),Object(o.g)({page:this.page,size:this.pageSize,start_protocol_end_date:this.BeginDate,end_protocol_end_date:this.LastDate,fund_state:this.fund_state,name:this.name,short_name:this.short_name}).then(function(t){if(1==t.data.msgNo){var a=t.data.payload;e.record_state=a.record_state,e.all_short_name=a.all_short_name,e.all_name=a.all_name,e.total=a.count,a.data.forEach(function(t,a){t.index=(e.page-1)*e.pageSize+a+1,t.fund_end_date&&-1!=t.fund_end_date.indexOf(",")&&(t.fund_end_date=t.fund_end_date.replace(/,/g,"+")),1==t.is_change?t.is_change="待变更":0==t.is_change&&(t.is_change="正常"),1==t.is_master?t.is_master="主体母基金":0==t.is_master&&(t.is_master="分支母基金"),1==t.unit?t.unit="人民币":2==t.unit&&(t.unit="美元")}),e.tableData=a.data}else Object(i.g)("info",t.data.message)})},searchCompany:function(){var t=new Date(this.BeginDate),e=new Date(this.LastDate);if(t.getTime()>e.getTime())return Object(i.g)("info","开始时间不能大于结束时间"),!1;this.getListData(1)},everyPageSizeChange:function(t){this.pageSize=t,this.getListData()},changeCurrentPage:function(t){this.page=t,this.getListData()},uploadManageCompanyInfoExcel:function(){var t=this,e=this.$refs.inputer,a=e.files[0];return void 0!=a&&(/\.xl(s[xmb]|t[xm]|am|s)$/.test(a.name)?void Object(o._10)({},a).then(function(a){1==a.data.msgNo?(Object(i.g)("success","导入成功"),t.page=1,t.getListData()):Object(i.g)("info","导入失败，请联系开发人员"),e.value=""}):(Object(i.g)("info","请选择Excel格式文件"),e.value="",!1))},downloadExcelData:function(){Object(o._11)({}).then(function(t){1==t.data.msgNo?(Object(i.g)("success","下载成功"),window.location.href=t.data.payload.url):Object(i.g)("info",t.data.message)})},downloadExcelModule:function(){var t=window.localStorage.getItem("htcx_server_address")+"/uploads/sg_company_manager/母基金批量导入模版.xlsx";window.location.href=t}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"search_group"},[n("div",{staticClass:"search_group_top"},[n("div",{staticClass:"search_box"},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"母基金简称",clearable:""},model:{value:t.short_name,callback:function(e){t.short_name=e},expression:"short_name"}})],1)]),t._v(" "),n("div",{staticClass:"search_group_bottom flex_start"},[n("div",{staticClass:"search_box"},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"合伙企业",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("div",{staticClass:"search_box"},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:"基金类型"},model:{value:t.fund_state,callback:function(e){t.fund_state=e},expression:"fund_state"}},t._l(t.record_state,function(t){return n("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}))],1),t._v(" "),n("div",{staticClass:"date_box"},[n("el-date-picker",{attrs:{type:"date",placeholder:"开始日期",editable:!1,"value-format":"yyyy-MM-dd",clearable:!1},model:{value:t.BeginDate,callback:function(e){t.BeginDate=e},expression:"BeginDate"}})],1),t._v(" "),n("div",{staticClass:"date_middle_text"},[t._v("\n\t\t\t\t\t至\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"date_box"},[n("el-date-picker",{attrs:{type:"date",placeholder:"结束日期",editable:!1,"value-format":"yyyy-MM-dd",clearable:!1},model:{value:t.LastDate,callback:function(e){t.LastDate=e},expression:"LastDate"}})],1),t._v(" "),n("div",{staticClass:"btn_box"},[n("button",{on:{click:t.searchCompany}},[t._v("搜索")])])])]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"main under_fund"},[n("div",{staticClass:"under_fund_header flex_between"},[n("div",{staticClass:"under_fund_header_tname"},[t._v("\n\t\t\t\t\t母基金总数"),n("span",[t._v("( "+t._s(t.total)+" )")])]),t._v(" "),n("div",{staticClass:"flex_end"},[n("div",{staticClass:"table-group-title-btn btn-blue-border",on:{click:t.downloadExcelData}},[n("span",{staticClass:"iconfont icon-daoru"}),t._v("导出excel表格\n\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"table-group-title-btn btn-blue-border",on:{click:t.downloadExcelModule}},[n("span",{staticClass:"iconfont icon-daoru"}),t._v("下载母基金信息模版\n\t\t\t\t\t")]),t._v(" "),n("div",{},[t._m(1),t._v(" "),n("input",{ref:"inputer",staticStyle:{display:"none"},attrs:{type:"file",id:"upload-fund-input"},on:{change:function(e){t.uploadManageCompanyInfoExcel(e)}}})]),t._v(" "),n("div",{staticClass:"table-group-title-btn btn-blue",on:{click:t.addMotherFund}},[n("span",{staticClass:"iconfont icon-jia"}),t._v("添加母基金\n\t\t\t\t\t")])])]),t._v(" "),n("div",{staticClass:"under_fund_main table"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[t._l(t.tableHeader,function(e,a){return n("el-table-column",{key:a,attrs:{sortable:"",prop:e.param,label:e.text,width:e.width},scopedSlots:t._u([{key:"default",fn:function(a){return["paid_in_proportion"==e.param?n("div",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.row.paid_in_proportion)+" "+t._s(0!=a.row.paid_in_proportion?"%":"")+"\n\t\t\t\t\t\t\t")]):n("div",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.row[e.param])+"\n\t\t\t\t\t\t\t")])]}}])})}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.setUserPower(e.row)}}},[t._v("设置权限")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toFundRunPage(e.row)}}},[t._v("基金运行")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.view(e.row)}}},[t._v("查看")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteFund(e.row)}}},[t._v("删除")])]}}])}),t._v(" "),n("template",{slot:"empty"},[n("div",{staticClass:"table-nodata"},[n("img",{attrs:{src:a("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t\t\t")])])],2),t._v(" "),t.total>0?n("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"",total:t.total,"current-page":t.page,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":t.everyPageSizeChange,"current-change":t.changeCurrentPage}}):t._e()],1)]),t._v(" "),n("el-dialog",{attrs:{title:"设置可见人员",visible:t.isSetPowerDialogShow,width:"813px",center:"","append-to-body":!0},on:{"update:visible":function(e){t.isSetPowerDialogShow=e}}},[n("set-power",{attrs:{"have-power-user-ids":t.havePowerUserIds},on:{"get-set-power-id":t.getSetPowerIds}}),t._v(" "),n("div",{staticClass:"dialog_footer clear",attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"dialog_btn dialog_btn_cancel",on:{click:function(e){t.isSetPowerDialogShow=!1}}},[t._v("取消")]),t._v(" "),n("button",{staticClass:"dialog_btn dialog_btn_submit",on:{click:t.setPowerSubmit}},[t._v("确定")])])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line_box"},[e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"upload-fund-input"}},[e("div",{staticClass:"table-group-title-btn btn-blue-border"},[e("span",{staticClass:"iconfont icon-daochu"}),this._v("导入母基金信息\n\t\t\t\t\t\t\t")])])}]};var l=a("C7Lr")(r,d,!1,function(t){a("3a2y")},"data-v-627513b2",null);e.default=l.exports}});
//# sourceMappingURL=116.e6bd66d9d7cddd9bc596.js.map