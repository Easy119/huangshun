webpackJsonp([128],{LuuS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("3cXf"),s=e.n(i),l=e("2hMI"),n=e("lzZH"),o=e("yclV"),c={data:function(){return{loading:!1,tianYanBackData:[],allRecordState:[],allFundState:[],allCollectState:[],allSgCompanyManagerList:[],allInvestor:[],creatorList:[],moneyTypeList:[{id:1,name:"人民币"},{id:2,name:"美元"}],fundTypeList:[{id:1,name:"主体母基金"},{id:0,name:"分支母基金"}],masterMotherFundList:[],fund_end_date:["","",""],commitData:{name:"",short_name:"",is_master:"",p_fof_id:"",unit:1,protocol_end_date:"",fund_end_date:"",record_state:"",sg_company_manager_id:"",lp_user_front_id:"",fund_date:"",odi:"",create_user_id:"",fund_state:"",collect_state:"",record_state_number:"",is_hide:1,tianyancha_id:""},tableHeader:[],tableData:[{}]}},created:function(){this.getMonterFundSelectData(),this.getAllUserList(),this.toGetParentFof()},mounted:function(){},components:{},methods:{historyCheck:function(t,a){(Number(t)!=t||t<0)&&(Object(o.g)("info","历史倍数格式错误或小于0"),this.tableData[0][a]=0),""==this.tableData[0][a]&&(this.tableData[0][a]=0)},changeHideStatus:function(t){this.commitData.is_hide=1==t?1:0},cancleAddMotherFund:function(){this.$router.push({name:"motherFundList"})},isValidFundTime:function(){if(this.fund_end_date[0]){var t=Object(o.q)(this.fund_end_date[0]),a=Object(o.q)(this.fund_end_date[1]),e=Object(o.q)(this.fund_end_date[2]);return this.fund_end_date[1]&&!a?(Object(o.g)("info","基金期限输入格式不对"),!1):this.fund_end_date[2]&&!e?(Object(o.g)("info","基金期限输入格式不对"),!1):!!t||(Object(o.g)("info","基金期限输入格式不对"),!1)}return Object(o.g)("info","基金期限不能为空"),!1},toAddMotherFund:function(){var t=this;if(""!=this.commitData.odi&&(!Object(o.n)(this.commitData.odi)||parseFloat(this.commitData.odi)<0))return Object(o.g)("info","ODI额度应大于等于0"),void(this.commitData.odi="");if(this.commitData.name&&this.commitData.short_name&&this.commitData.sg_company_manager_id){if(!this.isValidFundTime())return;var a=JSON.parse(s()(this.fund_end_date));if(""==a[1]&&""==a[2])this.commitData.fund_end_date=a[0];else{if(""==a[1]&&""!=a[2])return void Object(o.g)("info","基金期限不能为空!");""!=a[1]&&""==a[2]?(a.splice(2,1),this.commitData.fund_end_date=a.join("+")):this.commitData.fund_end_date=a.join("+")}this.commitData.is_master&&(this.commitData.p_fof_id=0);var e=[];this.tableHeader.forEach(function(a,i){var s={year:a,multiple:t.tableData[0][i]?t.tableData[0][i]:"0"};e.push(s)}),e.length?this.commitData.history=s()(e):this.commitData.history="",Object(n.w)(this.commitData).then(function(a){if(1==a.data.msgNo){a.data.payload;Object(o.g)("success",a.data.message),t.$router.push({name:"motherFundList"})}else Object(o.g)("info",a.data.message)})}else this.commitData.name?this.commitData.short_name?this.commitData.sg_company_manager_id||Object(o.g)("info","管理公司不能为空"):Object(o.g)("info","基金简称不能为空"):Object(o.g)("info","合伙企业不能为空")},getMonterFundSelectData:function(){var t=this;Object(n._9)({}).then(function(a){if(1==a.data.msgNo){var e=a.data.payload;t.allCollectState=e.all_collect_state,t.allFundState=e.all_fund_state,t.allRecordState=e.all_record_state,t.allInvestor=e.all_investor,t.allSgCompanyManagerList=e.all_sg_company_manager_lst}})},getAllUserList:function(){var t=this;Object(l._240)({number:1e4,page:1}).then(function(a){1==a.data.msgNo&&(t.creatorList=a.data.payload.data,t.commitData.create_user_id=parseInt(window.localStorage.getItem("htcx_uid")))})},toGetParentFof:function(){var t=this;Object(n._3)().then(function(a){if(1==a.data.msgNo){var e=a.data.payload.data;t.masterMotherFundList=e}})},changeName:function(t){this.getTianYanId()},getTianYanId:function(){for(var t=this.tianYanBackData,a=0,e=t.length;a<e;a++)if(t[a].name==this.commitData.name)return void(t[a].id?this.commitData.tianyancha_id=t[a].id:this.commitData.tianyancha_id="")},remoteMethod:function(t){var a=this;""!==t?(this.loading=!0,Object(l._234)({name:t}).then(function(e){if(a.loading=!1,1==e.data.msgNo)if(0==e.data.payload.length)a.tianYanBackData=[{name:t}];else{var i={name:t};e.data.payload.unshift(i),a.tianYanBackData=e.data.payload}})):this.tianYanBackData=[]},toCalcYear:function(){if(this.tableHeader=[],this.tableData=[{}],this.commitData.fund_date&&this.commitData.protocol_end_date)if(Date.parse(this.commitData.fund_date)<=Date.parse(this.commitData.protocol_end_date))for(var t=this.commitData.fund_date.split("-")[0],a=this.commitData.protocol_end_date.split("-")[0],e=parseInt(a)-parseInt(t),i=0;i<=e;i++)this.tableHeader.push((parseInt(t)+i).toString());else this.commitData.fund_date="",Object(o.g)("info","工商设立日期不能大于基金到期日");if(this.tableHeader.length){var s=[{}];this.tableHeader.forEach(function(t,a){s[0][a]=0}),this.tableData=s}}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[t._m(0),t._v(" "),e("div",{staticClass:"form flex_between"},[e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t合伙企业\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{"remote-method":t.remoteMethod,loading:t.loading,filterable:"",remote:"",clearable:!0,"reserve-keyword":"",placeholder:"请输入公司名称"},on:{change:t.changeName},model:{value:t.commitData.name,callback:function(a){t.$set(t.commitData,"name",a)},expression:"commitData.name"}},t._l(t.tianYanBackData,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金期限（年）\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right fund_limit_time flex_between"},[e("el-input",{attrs:{placeholder:"",clearable:""},model:{value:t.fund_end_date[0],callback:function(a){t.$set(t.fund_end_date,0,a)},expression:"fund_end_date[0]"}}),t._v(" "),e("span",[t._v("+")]),t._v(" "),e("el-input",{attrs:{placeholder:"",clearable:""},model:{value:t.fund_end_date[1],callback:function(a){t.$set(t.fund_end_date,1,a)},expression:"fund_end_date[1]"}}),t._v(" "),e("span",[t._v("+")]),t._v(" "),e("el-input",{attrs:{placeholder:"",clearable:""},model:{value:t.fund_end_date[2],callback:function(a){t.$set(t.fund_end_date,2,a)},expression:"fund_end_date[2]"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金简称\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.commitData.short_name,callback:function(a){t.$set(t.commitData,"short_name",a)},expression:"commitData.short_name"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t备案状态\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.commitData.record_state,callback:function(a){t.$set(t.commitData,"record_state",a)},expression:"commitData.record_state"}},t._l(t.allRecordState,function(t){return e("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t协议到期日\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.commitData.protocol_end_date,callback:function(a){t.$set(t.commitData,"protocol_end_date",a)},expression:"commitData.protocol_end_date"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金类型\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.commitData.is_master,callback:function(a){t.$set(t.commitData,"is_master",a)},expression:"commitData.is_master"}},t._l(t.fundTypeList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),0===t.commitData.is_master?e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t主体母基金名称\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:t.commitData.p_fof_id,callback:function(a){t.$set(t.commitData,"p_fof_id",a)},expression:"commitData.p_fof_id"}},t._l(t.masterMotherFundList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]):t._e(),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t普通合伙人\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.commitData.lp_user_front_id,callback:function(a){t.$set(t.commitData,"lp_user_front_id",a)},expression:"commitData.lp_user_front_id"}},t._l(t.allInvestor,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t备案编码\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.commitData.record_state_number,callback:function(a){t.$set(t.commitData,"record_state_number",a)},expression:"commitData.record_state_number"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t管理公司\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.commitData.sg_company_manager_id,callback:function(a){t.$set(t.commitData,"sg_company_manager_id",a)},expression:"commitData.sg_company_manager_id"}},t._l(t.allSgCompanyManagerList,function(t){return e("el-option",{key:t.id,attrs:{label:t.company_name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t数据创建人\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.commitData.create_user_id,callback:function(a){t.$set(t.commitData,"create_user_id",a)},expression:"commitData.create_user_id"}},t._l(t.creatorList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t币种\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.commitData.unit,callback:function(a){t.$set(t.commitData,"unit",a)},expression:"commitData.unit"}},t._l(t.moneyTypeList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金状态\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.commitData.fund_state,callback:function(a){t.$set(t.commitData,"fund_state",a)},expression:"commitData.fund_state"}},t._l(t.allFundState,function(t){return e("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t工商设立日期\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(a){t.toCalcYear()}},model:{value:t.commitData.fund_date,callback:function(a){t.$set(t.commitData,"fund_date",a)},expression:"commitData.fund_date"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t募集状态\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.commitData.collect_state,callback:function(a){t.$set(t.commitData,"collect_state",a)},expression:"commitData.collect_state"}},t._l(t.allCollectState,function(t){return e("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\tODI额度(美元/万元）\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.commitData.odi,callback:function(a){t.$set(t.commitData,"odi",a)},expression:"commitData.odi"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t是否隐藏\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right flex_start"},[e("div",{staticClass:"radio_btn cursor",class:[t.commitData.is_hide?"radio_btn_active":""],on:{click:function(a){t.changeHideStatus(1)}}},[t._v("\n\t\t\t\t\t\t是\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"radio_btn cursor",class:[t.commitData.is_hide?"":"radio_btn_active"],on:{click:function(a){t.changeHideStatus(2)}}},[t._v("\n\t\t\t\t\t\t否\n\t\t\t\t\t")])])]),t._v(" "),0===t.commitData.is_master?e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"}),t._v(" "),e("div",{staticClass:"form_list_right flex_start"})]):t._e(),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t历史倍数\n\t\t\t\t")]),t._v(" "),e("div",{},[e("div",{staticClass:"histor_multiple_box table ",staticStyle:{"max-width":"815px"}},[e("el-table",{attrs:{data:t.tableData,border:""}},[t._l(t.tableHeader,function(a,i){return e("el-table-column",{key:i,attrs:{prop:i.toString(),label:a,width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{clearable:""},on:{blur:function(e){t.historyCheck(a.row[i],i)}},model:{value:a.row[i],callback:function(e){t.$set(a.row,i,e)},expression:"scope.row[index]"}})]}}])})}),t._v(" "),e("el-table-column",{attrs:{fixed:"left",label:"年份",width:"70"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("倍数")])]}}])})],2)],1)])])]),t._v(" "),e("div",{staticClass:"form_submit flex_center"},[e("button",{on:{click:function(a){t.cancleAddMotherFund()}}},[t._v("取消")]),t._v(" "),e("button",{on:{click:function(a){t.toAddMotherFund()}}},[t._v("保存")])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"company_name flex_between"},[a("div",{staticClass:"company_name_left"},[a("i",{staticClass:"icon iconfont icon-tianjiamujijin"}),this._v(" "),a("span",[this._v("新增母基金")])])])}]};var _=e("C7Lr")(c,r,!1,function(t){e("uQ4b")},"data-v-563b37c8",null);a.default=_.exports},uQ4b:function(t,a){}});
//# sourceMappingURL=128.f7efe9e467b380bbd494.js.map