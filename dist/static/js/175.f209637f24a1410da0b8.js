webpackJsonp([175],{bNMP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("hRKE"),s=a.n(i),n=a("3cXf"),l=a.n(n),c=a("HzJ8"),r=a.n(c),o=a("2hMI"),d=a("lKYg"),u=a("yclV"),h={data:function(){return{keyWord:"",startTime:"",endTime:"",data:{fid:"",name:"",direction:"",describe:"",status:"",contributeSize:null,startMoney:null,appendMoney:null,duration:"",manageFees:null},id:null,isGetFileList:[],delfileidList:[],isLocalFileList:[],publishHistoryList:[],allProjectOrFundList:[],staus:[{id:"1",name:"在售"},{id:"0",name:"售罄"}]}},components:{progressBar:d.a},mounted:function(){this.getPublishHistoryList(),this.getAllProjectOrFund()},computed:{submitOk:function(){return""!=this.data.fid&&""!=this.data.name&&""!=this.data.direction&&""!=this.data.describe&&null!=this.data.contributeSize}},methods:{init:function(){this.getPublishHistoryList(),this.startTime="",this.endTime="",this.data={fid:"",name:"",direction:"",describe:"",status:"",contributeSize:null,startMoney:null,appendMoney:null,duration:"",manageFees:null},this.id=null,this.isGetFileList=[],this.isLocalFileList=[]},toNewFund:function(){var t=this;Object(u.h)("确定要离开编辑页面吗？").then(function(){t.init()}).catch(function(){})},getAllProjectOrFund:function(){var t=this;Object(o.L)({type:2}).then(function(e){1==e.data.msgNo&&(t.allProjectOrFundList=e.data.payload.data)})},addFile:function(t){var e=!0,a=!1,i=void 0;try{for(var s,n=r()(t.target.files);!(e=(s=n.next()).done);e=!0){var l=s.value;this.isLocalFileList.push({name:l.name,path:URL.createObjectURL(l),file:l})}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}},changeFile:function(t){},toPunlishFundProduct:function(){var t=this;this.submitOk?(this.data.duration=this.startTime+"+"+this.endTime,null!=this.id&&(this.data.id=JSON.parse(l()(this.id))),0!=this.delfileidList.length&&this.delfileidList.forEach(function(t){Object(o._42)({file_id:t}).then(function(t){})}),Object(o._306)({data:this.data},this.isLocalFileList).then(function(e){1==e.data.msgNo?(null!=JSON.parse(l()(t.id))?Object(u.g)("success","修改成功"):Object(u.g)("success","发布成功"),t.init()):Object(u.g)("info",e.data.message)})):Object(u.g)("info","您还有必填项没有填写！")},toDelFundFile:function(t,e){this.isLocalFileList.splice(t,1)},toDelGetFundFile:function(t,e,a){this.delfileidList.push(e),this.isGetFileList.splice(t,1)},getPublishHistoryList:function(){var t=this,e={};""!=this.keyWord&&(e.search=this.keyWord),Object(o._305)(e).then(function(e){1==e.data.msgNo&&(t.publishHistoryList=e.data.payload)})},toShowFundProduct:function(t){var e=this;this.delfileidList=[],this.isLocalFileList=[],Object(o._333)({id:t}).then(function(t){if(1==t.data.msgNo){var a=t.data.payload;if(""!=a.data.duration){var i=a.data.duration.split("+");e.startTime=i[0],e.endTime=i[1]}e.data.fid=a.data.fid,e.data.name=a.data.name,e.data.direction=a.data.direction,e.data.describe=a.data.describe,e.data.contributeSize=a.data.contributeSize,e.data.startMoney=a.data.startMoney,e.data.appendMoney=a.data.appendMoney,e.data.manageFees=a.data.manageFees,e.data.status=a.data.status,e.data.status=e.data.status.toString(),e.isGetFileList=a.file,e.id=a.data.id}})},todDelFundProduct:function(t,e){var a=this;Object(u.h)("确定要删除该发布历史？").then(function(){Object(o._46)({id:t}).then(function(i){1==i.data.msgNo&&(a.publishHistoryList.splice(e,1),a.id==t&&a.init(),Object(u.g)("success","删除成功"))})}).catch(function(){})},cutString:function(t,e){if("number"==(void 0===t?"undefined":s()(t)))return t;if(2*t.length<=e)return t;for(var a=0,i="",n=0;n<t.length;n++)if(i+=t.charAt(n),t.charCodeAt(n)>128){if((a+=2)>=e)return i.substring(0,i.length-1)+"..."}else if((a+=1)>=e)return i.substring(0,i.length-2)+"...";return i}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personal-content-body"},[a("div",{staticClass:"content investPersonaInfoPublish scroll-style"},[a("div",{staticClass:"content-title clear"},[a("div",{staticClass:"left"},[t._v("信息发布")]),t._v(" "),a("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"输入文件关键字进行搜索",clearable:!0},on:{change:t.getPublishHistoryList},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}},[a("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("div",{staticClass:"content-body clear"},[a("div",{staticClass:"content-body-left-box left"},[a("div",{staticClass:"content-body-left-box-title"},[a("div",{staticClass:"clear"},[a("div",{staticClass:"text-nav breadcrumb left"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"infoPublishIndex"}}},[t._v("信息发布")]),t._v(" "),a("el-breadcrumb-item",[t._v("新基金宣传材料发布")])],1)],1),t._v(" "),a("div",{staticClass:"right"},[null!=t.id?a("div",{staticClass:"table-group-title-btn btn-blue",on:{click:t.toNewFund}},[a("span",{staticClass:"icon-createNews"}),t._v("发布新基金宣传材料\n              ")]):t._e()])]),t._v(" "),a("div",{staticClass:"line"})]),t._v(" "),a("div",{staticClass:"content-body-left-box-content"},[a("div",{staticClass:"content-part-box"},[a("div",{staticClass:"content-part-title"},[t._v("Part 1：描述信息")]),t._v(" "),a("div",{staticClass:"content-part-body"},[a("table",{staticClass:"content-part-table"},[a("tr",[t._m(0),t._v(" "),a("td",[a("el-select",{staticClass:"header-right-time input-position ",attrs:{filterable:"",clearable:"",placeholder:"请选择关联基金"},model:{value:t.data.fid,callback:function(e){t.$set(t.data,"fid",e)},expression:"data.fid"}},t._l(t.allProjectOrFundList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}))],1)]),t._v(" "),a("tr",[t._m(1),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time input-position",attrs:{placeholder:"请输入基金产品全称",clearable:!0},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1)]),t._v(" "),a("tr",[t._m(2),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time input-position",attrs:{placeholder:"请输入投资方向",clearable:!0},model:{value:t.data.direction,callback:function(e){t.$set(t.data,"direction",e)},expression:"data.direction"}})],1)]),t._v(" "),a("tr",[t._m(3),t._v(" "),a("td",[a("el-input",{staticClass:"content-type-textarea header-right-time input-position",attrs:{type:"textarea",resize:"none"},model:{value:t.data.describe,callback:function(e){t.$set(t.data,"describe",e)},expression:"data.describe"}})],1)])])])]),t._v(" "),a("div",{staticClass:"content-part-box"},[a("div",{staticClass:"content-part-title"},[t._v("Part 2：购买信息")]),t._v(" "),a("div",{staticClass:"content-part-body"},[a("table",{staticClass:"content-part-table"},[a("tr",[t._m(4),t._v(" "),a("td",[a("el-select",{staticClass:"header-right-time input-position",attrs:{filterable:"",placeholder:"请选择募集状态"},model:{value:t.data.status,callback:function(e){t.$set(t.data,"status",e)},expression:"data.status"}},t._l(t.staus,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.name}})}))],1)]),t._v(" "),a("tr",[t._m(5),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time  input-position",attrs:{placeholder:"请输入募集规模",clearable:!0,maxlength:"8"},model:{value:t.data.contributeSize,callback:function(e){t.$set(t.data,"contributeSize",e)},expression:"data.contributeSize"}})],1)]),t._v(" "),a("tr",[t._m(6),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time input-position ",attrs:{placeholder:"",clearable:!0,maxlength:"8"},model:{value:t.data.startMoney,callback:function(e){t.$set(t.data,"startMoney",e)},expression:"data.startMoney"}})],1)]),t._v(" "),a("tr",[t._m(7),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time input-position ",attrs:{placeholder:"",clearable:!0,maxlength:"8"},model:{value:t.data.appendMoney,callback:function(e){t.$set(t.data,"appendMoney",e)},expression:"data.appendMoney"}})],1)]),t._v(" "),a("tr",[t._m(8),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time startTime",attrs:{placeholder:"",clearable:!0},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t._v(" "),a("span",{staticClass:"jh"},[t._v("+")]),t._v(" "),a("el-input",{staticClass:"header-right-time endTime",attrs:{placeholder:"",clearable:!0},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)]),t._v(" "),a("tr",[t._m(9),t._v(" "),a("td",[a("el-input",{staticClass:"header-right-time input-position",attrs:{placeholder:"",clearable:!0},model:{value:t.data.manageFees,callback:function(e){t.$set(t.data,"manageFees",e)},expression:"data.manageFees"}})],1)])])])]),t._v(" "),a("div",{staticClass:"content-part-box"},[a("div",{staticClass:"content-part-title"},[t._v("Part 3：上传宣传材料（会自动作为附件发送）")]),t._v(" "),a("div",{staticClass:"content-part-body"},[a("div",{staticClass:"upload-lists"},[t._l(t.isGetFileList,function(e,i){return a("div",{key:e.index,staticClass:"upload-list clear"},[a("a",{staticClass:"left",attrs:{href:e.path,target:"_blank"}},[a("span",[t._v(t._s(e.file_name))])]),t._v(" "),a("span",{staticClass:"right",on:{click:function(a){t.toDelGetFundFile(i,e.file_id,0)}}},[t._v("删除")]),t._v(" "),a("label",{staticClass:"right upload-change-link"},[a("input",{attrs:{type:"file"},on:{change:function(a){t.toDelGetFundFile(i,e.file_id,0),t.addFile(a)}}}),t._v("替换")])])}),t._v(" "),t._l(t.isLocalFileList,function(e,i){return a("div",{key:e.index,staticClass:"upload-list clear"},[a("a",{staticClass:"left",attrs:{href:e.path,target:"_blank"}},[a("span",[t._v(t._s(e.name))])]),t._v(" "),a("span",{staticClass:"right",on:{click:function(e){t.toDelFundFile(i,1)}}},[t._v("删除")]),t._v(" "),a("label",{staticClass:"right upload-change-link"},[a("input",{attrs:{type:"file"},on:{change:function(e){t.toDelFundFile(i,1),t.addFile(e)}}}),t._v("替换")])])}),t._v(" "),a("div",{staticClass:"formgroup-file-item formgroup-file-item-add"},[a("input",{staticClass:"formgroup-file-item-add-inputfile",attrs:{type:"file",multiple:"multiple"},on:{change:function(e){t.addFile(e)}}}),t._v(" "),a("i",{staticClass:"el-icon-plus"}),t._v(" 添加文件\n                ")])],2)])]),t._v(" "),a("div",{staticClass:"content-confirm"},[(t.id,a("button",{staticClass:"btn-blue",class:{"btn-blue-disabled":!t.submitOk},on:{click:t.toPunlishFundProduct}},[t._v("发布")]))])])]),t._v(" "),a("div",{staticClass:"content-body-right-box right"},[t._m(10),t._v(" "),a("div",{staticClass:"scroll-box"},[a("div",{staticClass:"content-body-right-items-box"},t._l(t.publishHistoryList,function(e,i){return a("div",{key:e.id,staticClass:"item-box"},[a("div",{staticClass:"item-time"},[a("span",{staticClass:"blue-point"}),t._v(" "+t._s(e.update_time)+"\n                "),a("span",{staticClass:"item-time-right",on:{click:function(a){t.todDelFundProduct(e.id,i)}}},[t._v("删除")]),t._v(" "),a("span",{staticClass:"item-time-right",on:{click:function(a){t.toShowFundProduct(e.id)}}},[t._v("编辑")])]),t._v(" "),a("div",{staticClass:"item-text"},[t._v(t._s(t.cutString(e.name,80)))])])}))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon icon-required"}),this._v("关联基金")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon icon-required"}),this._v("产品全称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon icon-required"}),this._v("投资方向")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key1"},[e("span",{staticClass:"account-icon icon-required"}),this._v("投资简述")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon icon-required"}),this._v("募集状态")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon icon-required"}),this._v("募集规模(万元)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon "}),this._v("起投金额(万元)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon "}),this._v("最低追加金额(万元)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon "}),this._v("存续期限(月+月)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"content-part-line-key"},[e("span",{staticClass:"account-icon "}),this._v("管理费用(每年%)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-body-right-header"},[e("span",{staticClass:"icon-save"}),this._v(" "),e("span",{staticClass:"header-name"},[this._v("已发布历史")])])}]};var p=a("C7Lr")(h,v,!1,function(t){a("mrRu")},"data-v-2b528679",null);e.default=p.exports},mrRu:function(t,e){}});
//# sourceMappingURL=175.f209637f24a1410da0b8.js.map