webpackJsonp([152],{ZIkE:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("3cXf"),s=e.n(i),l=e("2hMI"),n=e("lzZH"),r=e("yclV"),o={name:"selfAdministerFundAdd",data:function(){return{loading:!1,tianYanBackData:[],all_record_state:[],all_fund_state:[],all_collect_state:[],all_sg_company_manager_list:[],all_investor:[],allUserList:[],coinList:[{value:1,label:"人民币"},{value:2,label:"美元"}],fund_type:[{label:"主体自管基金",value:1},{label:"分支自管基金",value:0}],fundName:"",simpleName:"",is_master:"",p_petfund_id:"",investor_id:"",sg_company_manager_id:"",unit:1,fund_date:"",odi:"",duration:["","",""],protocol_end_date:"",record_state:"",record_state_number:"",create_user_id:"",fund_state:"",collect_state:"",is_hide:0,tianyan_id:"",masterMotherFundList:[],company:"",data:"",options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value4:"",tableHeader:[],tableData:[{}],history:[]}},created:function(){this.getSelfAddInit(),this.getAllUserList(),this.toGetParentFof()},mounted:function(){},components:{},methods:{historyCheck:function(t,a){(Number(t)!=t||t<0)&&(Object(r.g)("info","历史倍数格式错误或小于0"),this.tableData[0][a]=0),""==this.tableData[0][a]&&(this.tableData[0][a]=0)},getSelfAddInit:function(){var t=this;Object(l._220)({}).then(function(a){1==a.data.msgNo?(t.all_record_state=a.data.payload.all_record_state,t.all_fund_state=a.data.payload.all_fund_state,t.all_collect_state=a.data.payload.all_collect_state,t.all_sg_company_manager_list=a.data.payload.all_sg_company_manager_list,t.all_investor=a.data.payload.all_investor):Object(r.g)("info",a.data.message)})},saveSelfFundInfo:function(){var t=this;if(""!=this.odi&&(!Object(r.n)(this.odi)||parseFloat(this.odi)<0))return Object(r.g)("info","ODI额度应大于等于0"),void(this.odi="");if(this.fundName&&this.simpleName&&this.sg_company_manager_id){if(!this.isValidFundTime())return;var a=JSON.parse(s()(this.duration));if(""==a[1]&&""==a[2])a=a[0];else{if(""==a[1]&&""!=a[2])return void Object(r.g)("info","基金期限不能为空!");""!=a[1]&&""==a[2]?(a.splice(2,1),a=a.join("+")):a=a.join("+")}this.is_master&&(this.p_petfund_id=0);var e={fundName:this.fundName,simpleName:this.simpleName,is_master:this.is_master,p_petfund_id:this.p_petfund_id,investor_id:this.investor_id,sg_company_manager_id:this.sg_company_manager_id,unit:this.unit,fund_date:this.fund_date,odi:this.odi,duration:a,protocol_end_date:this.protocol_end_date,record_state:this.record_state,record_state_number:this.record_state_number,create_user_id:this.create_user_id,fund_state:this.fund_state,collect_state:this.collect_state,is_hide:this.is_hide,tianyan_id:this.tianyan_id},i=[];this.tableHeader.forEach(function(a,e){var s={year:a,multiple:t.tableData[0][e]?t.tableData[0][e]:"0"};i.push(s)}),i.length?e.history=s()(i):e.history="",Object(l._315)(e).then(function(a){1==a.data.msgNo?(Object(r.g)("success",a.data.message),t.$router.go(-1)):Object(r.g)("info",a.data.message)})}else this.fundName?this.simpleName?this.sg_company_manager_id||Object(r.g)("info","管理公司不能为空"):Object(r.g)("info","基金简称不能为空"):Object(r.g)("info","合伙企业不能为空")},isValidFundTime:function(){if(this.duration[0]){var t=Object(r.q)(this.duration[0]),a=Object(r.q)(this.duration[1]),e=Object(r.q)(this.duration[2]);return this.duration[1]&&!a?(Object(r.g)("info","基金期限输入格式不对"),!1):this.duration[2]&&!e?(Object(r.g)("info","基金期限输入格式不对"),!1):!!t||(Object(r.g)("info","基金期限输入格式不对"),!1)}return Object(r.g)("info","基金期限不能为空"),!1},getAllUserList:function(){var t=this;Object(l._240)({number:1e4,page:1}).then(function(a){1==a.data.msgNo?(t.allUserList=a.data.payload.data,t.create_user_id=parseInt(window.localStorage.getItem("htcx_uid"))):Object(r.g)("info",a.data.message)})},changeName:function(t){this.getTianYanId()},getTianYanId:function(){for(var t=this.tianYanBackData,a=0,e=t.length;a<e;a++)if(t[a].name==this.fundName)return void(t[a].id?this.tianyan_id=t[a].id:this.tianyan_id="")},remoteMethod:function(t){var a=this;""!==t?(this.loading=!0,Object(l._234)({name:t}).then(function(e){if(a.loading=!1,1==e.data.msgNo)if(0==e.data.payload.length)a.tianYanBackData=[{name:t}];else{var i={name:t};e.data.payload.unshift(i),a.tianYanBackData=e.data.payload}})):this.tianYanBackData=[]},changeHideStatus:function(t){this.is_hide=1==t?1:0},cancel:function(){this.$router.go(-1)},toGetParentFof:function(){var t=this;Object(n._0)().then(function(a){if(1==a.data.msgNo){var e=a.data.payload.data;t.masterMotherFundList=e}})},toCalcYear:function(){if(this.tableHeader=[],this.tableData=[{}],this.fund_date&&this.protocol_end_date)if(Date.parse(this.fund_date)<=Date.parse(this.protocol_end_date))for(var t=this.fund_date.split("-")[0],a=this.protocol_end_date.split("-")[0],e=parseInt(a)-parseInt(t),i=0;i<=e;i++)this.tableHeader.push((parseInt(t)+i).toString());else this.fund_date="",Object(r.g)("info","工商设立日期不能大于基金到期日");if(this.tableHeader.length){var s=[{}];this.tableHeader.forEach(function(t,a){s[0][a]=0}),this.tableData=s}}}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[t._m(0),t._v(" "),e("div",{staticClass:"form flex_between"},[e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t合伙企业\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{"remote-method":t.remoteMethod,loading:t.loading,filterable:"",remote:"",clearable:!0,"reserve-keyword":"",placeholder:"请输入公司名称"},on:{change:t.changeName},model:{value:t.fundName,callback:function(a){t.fundName=a},expression:"fundName"}},t._l(t.tianYanBackData,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金期限（年）\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right fund_limit_time flex_between"},[e("el-input",{attrs:{placeholder:"",clearable:""},model:{value:t.duration[0],callback:function(a){t.$set(t.duration,0,a)},expression:"duration[0]"}}),t._v(" "),e("span",[t._v("+")]),t._v(" "),e("el-input",{attrs:{placeholder:"",clearable:""},model:{value:t.duration[1],callback:function(a){t.$set(t.duration,1,a)},expression:"duration[1]"}}),t._v(" "),e("span",[t._v("+")]),t._v(" "),e("el-input",{attrs:{placeholder:"",clearable:""},model:{value:t.duration[2],callback:function(a){t.$set(t.duration,2,a)},expression:"duration[2]"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金简称\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.simpleName,callback:function(a){t.simpleName=a},expression:"simpleName"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t协议到期日\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:t.protocol_end_date,callback:function(a){t.protocol_end_date=a},expression:"protocol_end_date"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t普通合伙人\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.investor_id,callback:function(a){t.investor_id=a},expression:"investor_id"}},t._l(t.all_investor,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金类型\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.is_master,callback:function(a){t.is_master=a},expression:"is_master"}},t._l(t.fund_type,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),0===t.is_master?e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t主体自管基金名称\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:t.p_petfund_id,callback:function(a){t.p_petfund_id=a},expression:"p_petfund_id"}},t._l(t.masterMotherFundList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]):t._e(),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t备案状态\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.record_state,callback:function(a){t.record_state=a},expression:"record_state"}},t._l(t.all_record_state,function(t){return e("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t管理公司\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.sg_company_manager_id,callback:function(a){t.sg_company_manager_id=a},expression:"sg_company_manager_id"}},t._l(t.all_sg_company_manager_list,function(t){return e("el-option",{key:t.id,attrs:{label:t.company_name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t备案编码\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.record_state_number,callback:function(a){t.record_state_number=a},expression:"record_state_number"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t币种\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.unit,callback:function(a){t.unit=a},expression:"unit"}},t._l(t.coinList,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t数据创建人\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.create_user_id,callback:function(a){t.create_user_id=a},expression:"create_user_id"}},t._l(t.allUserList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t工商设立日期\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},on:{change:function(a){t.toCalcYear()}},model:{value:t.fund_date,callback:function(a){t.fund_date=a},expression:"fund_date"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t基金状态\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.fund_state,callback:function(a){t.fund_state=a},expression:"fund_state"}},t._l(t.all_fund_state,function(t){return e("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\tODI额度(美元/万元）\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.odi,callback:function(a){t.odi=a},expression:"odi"}})],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t募集状态\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right"},[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.collect_state,callback:function(a){t.collect_state=a},expression:"collect_state"}},t._l(t.all_collect_state,function(t){return e("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)]),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t是否隐藏\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"form_list_right flex_start"},[e("div",{staticClass:"radio_btn cursor",class:[t.is_hide?"radio_btn_active":""],on:{click:function(a){t.changeHideStatus(1)}}},[t._v("\n\t\t\t\t\t\t是\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"radio_btn cursor",class:[t.is_hide?"":"radio_btn_active"],on:{click:function(a){t.changeHideStatus(2)}}},[t._v("\n\t\t\t\t\t\t否\n\t\t\t\t\t")])])]),t._v(" "),0===t.is_master?e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"}),t._v(" "),e("div",{staticClass:"form_list_right flex_start"})]):t._e(),t._v(" "),e("div",{staticClass:"form_list flex_start"},[e("div",{staticClass:"form_list_left"},[t._v("\n\t\t\t\t\t历史倍数\n\t\t\t\t")]),t._v(" "),e("div",{},[e("div",{staticClass:"histor_multiple_box table ",staticStyle:{"max-width":"805px"}},[e("el-table",{attrs:{data:t.tableData,border:""}},[t._l(t.tableHeader,function(a,i){return e("el-table-column",{key:i,attrs:{prop:i.toString(),label:a,width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{clearable:""},on:{blur:function(e){t.historyCheck(a.row[i],i)}},model:{value:a.row[i],callback:function(e){t.$set(a.row,i,e)},expression:"scope.row[index]"}})]}}])})}),t._v(" "),e("el-table-column",{attrs:{fixed:"left",label:"年份",width:"70"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("倍数")])]}}])})],2)],1)])])]),t._v(" "),e("div",{staticClass:"form_submit flex_center"},[e("button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),e("button",{on:{click:t.saveSelfFundInfo}},[t._v("保存")])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"company_name flex_between"},[a("div",{staticClass:"company_name_left"},[a("i",{staticClass:"icon iconfont icon-gongsixiangqinglogo"}),this._v(" "),a("span",[this._v("新增自管基金")])])])}]};var d=e("C7Lr")(o,_,!1,function(t){e("yiSG")},"data-v-3ee54acc",null);a.default=d.exports},yiSG:function(t,a){}});
//# sourceMappingURL=152.e8a41a433a9ead53a4ea.js.map