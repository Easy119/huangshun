webpackJsonp([43],{"/83T":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("2hMI"),i=a("yclV"),s={data:function(){return{options:[{value:1,label:"少于10人"},{value:2,label:"10～30人"},{value:3,label:"30～50人"},{value:4,label:"50～100人"},{value:5,label:"100人以上"}],scale:1,scaleValue:"",mechanism_name:"",logo:"",isEditor:!1,needSave:!1}},created:function(){this.getInfo()},computed:{},mounted:function(){},methods:{getImgurl:function(e){e.currentTarget.src="../../static/images/homepage_txsc.png",e.onerror=null},getInfo:function(){var e=this;Object(n._277)().then(function(t){if(1==t.data.msgNo){var a=t.data.payload;e.mechanism_name=a.mechanism_name,e.scale=a.scale,e.logo=a.logo,e.options.forEach(function(t){t.value==a.scale&&(e.scaleValue=t.label)}),e.scale=a.scale}else Object(i.g)("info",t.data.message)})},changeToop:function(e){var t=this,a=this.$refs.inputer,s=a.files[0];return void 0!=s&&(/.(gif|jpg|jpeg|png)$/.test(s.type)?void Object(n.I)(s).then(function(e){1==e.data.msgNo&&(Object(i.g)("success","logo修改成功"),a.value="",t.logo=e.data.payload)}):(Object(i.g)("info","上传头像图片只能是jpg/png/gif格式"),a.value="",!1))},changeValue:function(){this.needSave=!0},toEditor:function(){this.isEditor=!0},toCancle:function(){var e=this;this.needSave?Object(i.h)("确定不保存退出么？").then(function(){e.getInfo(),e.isEditor=!1}).catch(function(){}):this.isEditor=!1},toCommit:function(){var e=this;if(""==this.mechanism_name)return Object(i.g)("info","机构全称不能为空!"),!1;Object(n._358)({mechanism_name:this.mechanism_name,scale:this.scale}).then(function(t){1==t.data.msgNo?(Object(i.g)("success","修改成功"),e.getInfo(),e.isEditor=!1):Object(i.g)("info",t.data.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-content-body jgInfo"},[a("div",{staticClass:"table-content"},[a("div",{staticClass:"clear table-content-title"}),e._v(" "),a("div",{staticClass:"table-group"},[a("div",{staticClass:"table-group-content"},[e._m(0),e._v(" "),a("div",{staticClass:"info_line"},[a("span",{staticClass:"info_line_key"},[e._v("机构logo")]),e._v(" "),a("label",{attrs:{for:"upload-img-input"}},[a("div",{staticClass:"tx_box"},[a("img",{attrs:{src:""==e.logo?"../../static/images/homepage_txsc.png":e.logo,alt:""},on:{error:e.getImgurl}}),e._v(" "),a("span",[e._v("修改logo")])])]),e._v(" "),e.isEditor?e._e():a("span",{staticClass:"editor_btn",on:{click:e.toEditor}},[a("i",{staticClass:"iconfont icon-bianji"}),e._v("编辑")])]),e._v(" "),a("input",{ref:"inputer",staticStyle:{display:"none"},attrs:{type:"file",id:"upload-img-input"},on:{change:function(t){e.changeToop(t)}}}),e._v(" "),a("div",{staticClass:"info_line info_line1"},[a("span",{staticClass:"info_line_key"},[e._v("机构全称")]),e._v(" "),e.isEditor?a("el-input",{staticClass:"header-right-time right",attrs:{placeholder:"机构全称",clearable:!0},on:{change:e.changeValue},model:{value:e.mechanism_name,callback:function(t){e.mechanism_name=t},expression:"mechanism_name"}}):a("span",{staticClass:"info_line_value"},[e._v(e._s(""==e.mechanism_name?"未知":e.mechanism_name))])],1),e._v(" "),a("div",{staticClass:"info_line info_line1"},[a("span",{staticClass:"info_line_key"},[e._v("机构规模")]),e._v(" "),e.isEditor?a("el-select",{staticClass:"header-right-time right",attrs:{placeholder:"机构规模"},on:{change:e.changeValue},model:{value:e.scale,callback:function(t){e.scale=t},expression:"scale"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):a("span",{staticClass:"info_line_value"},[e._v(e._s(""==e.scaleValue?"未知":e.scaleValue))])],1),e._v(" "),e.isEditor?a("div",{staticClass:"info_line"},[a("span",{staticClass:"info_line_key"}),e._v(" "),a("div",[a("button",{on:{click:e.toCancle}},[e._v("取消")]),e._v(" "),a("button",{on:{click:e.toCommit}},[e._v("完成")])])]):e._e()])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-group-tab"},[t("div",{staticClass:"clear"})])}]};var o=a("C7Lr")(s,l,!1,function(e){a("xaDO")},"data-v-f838327c",null);t.default=o.exports},xaDO:function(e,t){}});
//# sourceMappingURL=43.cedd3fa70d9fb3adcfe9.js.map