webpackJsonp([193],{MNJk:function(t,e){},w4oV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("xg4f"),n=a("yclV"),o=a("2hMI"),i={name:"investerManageList",data:function(){return{tableData:[],total:0,name:"",ir:"",manager:"",currentPage:1,pageSize:10,noPowerTest:"您没有查看此内容的权限，请联系管理员。",isSetPowerDialogShow:!1,havePowerUserIds:[],subComponentPostIds:[],ids:"",is_multiple_set_power:0,multiple_set_power_ids:""}},created:function(){this.getInvesterManageList()},mounted:function(){},components:{setPower:s.a},methods:{getInvesterManageList:function(t){var e=this;t&&(this.currentPage=1),Object(o._188)({page:this.currentPage,pageSize:this.pageSize,name:this.name,ir:this.ir,manager:this.manager}).then(function(t){1==t.data.msgNo?(e.tableData=t.data.payload.data,e.total=t.data.payload.total):Object(n.g)("info",t.data.message)})},view:function(t){t.auth.check_operate?this.$router.push({name:"investerDetail",query:{id:t.id}}):Object(n.g)("info",this.noPowerTest)},toRunPage:function(t){t.auth.auth_operate?this.$router.push({name:"investerManageRun",query:{id:t.id}}):Object(n.g)("info",this.noPowerTest)},deleteInvester:function(t){var e=this;if(t.auth.delete_operate){Object(n.h)("确定要删除该投资人吗").then(function(){Object(o._54)({id:t.id}).then(function(t){1==t.data.msgNo?(Object(n.g)("success",t.data.payload),e.tableData.length>1?e.getInvesterManageList():e.currentPage>1?(e.currentPage=e.currentPage-1,e.getInvesterManageList()):e.getInvesterManageList(e.currentPage)):Object(n.g)("info",t.data.message)})}).catch(function(){})}else Object(n.g)("info",this.noPowerTest)},setUserPower:function(t){t?(this.is_multiple_set_power=0,this.company_id=t.id,t.auth.auth_operate?this.getHavePowerUsers(t.id):Object(n.g)("info","您没有设置权限，请联系管理员！")):(this.is_multiple_set_power=1,this.havePowerUserIds=[],this.ids="",this.isSetPowerDialogShow=!0)},getHavePowerUsers:function(t){var e=this;Object(o._176)({type:4,data_id:t}).then(function(t){console.log(t.data),1==t.data.msgNo?(e.havePowerUserIds=t.data.payload.ids,e.ids=t.data.payload.ids.join(","),e.isSetPowerDialogShow=!0):Object(n.g)("info",t.data.message)})},getSetPowerIds:function(t){console.log(t),this.subComponentPostIds=[];for(var e=0,a=t.length;e<a;e++)-1==this.subComponentPostIds.indexOf(t[e])&&this.subComponentPostIds.push(t[e]);var s=this.decodeSelectedUserId(this.subComponentPostIds);this.ids=s.join(",")},setPowerSubmit:function(){var t=this;this.is_multiple_set_power?this.multiple_set_power_ids?Object(o._322)({table_name:"lp_user_front",type:4,dataids:this.multiple_set_power_ids,ids:this.ids,field:"creater_id"}).then(function(e){console.log(e.data),1==e.data.msgNo?(t.isSetPowerDialogShow=!1,Object(n.g)("success",e.data.message)):Object(n.g)("info",e.data.message)}):Object(n.g)("info","请选择人员进行设置"):Object(o._322)({table_name:"lp_user_front",type:4,data_id:this.company_id,ids:this.ids,field:"creater_id"}).then(function(e){console.log(e.data),1==e.data.msgNo?(t.isSetPowerDialogShow=!1,Object(n.g)("success",e.data.message)):Object(n.g)("info",e.data.message)})},decodeSelectedUserId:function(t){for(var e=[],a=[],s=0,n=t.length;s<n;s++)a=t[s].id.split("-"),-1==e.indexOf(a[0])&&e.push(a[0]);return e},downloadTemplet:function(){Object(o._86)({}).then(function(t){1==t.data.msgNo?window.location.href=t.data.payload:Object(n.g)("info",t.data.message)})},downloadExcel:function(){Object(o._78)({}).then(function(t){1==t.data.msgNo?window.location.href=t.data.payload.path:Object(n.g)("info",t.data.message)})},uploadManageCompanyInfoExcel:function(){var t=this,e=this.$refs.inputer,a=e.files[0];return void 0!=a&&(/\.xl(s[xmb]|t[xm]|am|s)$/.test(a.name)?void Object(o._362)({},a).then(function(a){1==a.data.msgNo?(Object(n.g)("success","导入成功"),t.currentPage=1,t.getInvesterManageList()):Object(n.g)("info","导入失败，请联系开发人员"),e.value=""}):(Object(n.g)("info","请选择Excel格式文件"),e.value="",!1))},changeCurrentPage:function(t){this.currentPage=t,this.getInvesterManageList()},everyPageSizeChange:function(t){this.pageSize=t,this.getInvesterManageList()},addNewInvester:function(){this.$router.push({name:"investerManageAdd"})},handleSelectionChange:function(t){console.log(t);for(var e=[],a=0,s=t.length;a<s;a++)e.push(t[a].id);this.multiple_set_power_ids=e.join(",")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[t._m(0),t._v(" "),s("div",{staticClass:"search_group"},[s("div",{staticClass:"search_group_bottom flex_start"},[s("div",{staticClass:"search_box"},[s("el-input",{attrs:{placeholder:"投资人名称",clearable:"","prefix-icon":"el-icon-search"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),s("div",{staticClass:"search_box"},[s("el-input",{attrs:{placeholder:"IR",clearable:""},model:{value:t.ir,callback:function(e){t.ir=e},expression:"ir"}})],1),t._v(" "),s("div",{staticClass:"search_box"},[s("el-input",{attrs:{placeholder:"客户经理",clearable:""},model:{value:t.manager,callback:function(e){t.manager=e},expression:"manager"}})],1),t._v(" "),s("div",{staticClass:"btn_box"},[s("button",{on:{click:function(e){t.getInvesterManageList(1)}}},[t._v("搜索")])])])]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"main under_fund"},[s("div",{staticClass:"under_fund_header flex_between"},[s("div",{},[t._v("\n\t\t\t\t\t投资人总数"),s("span",[t._v("( "+t._s(t.total)+" )")])]),t._v(" "),s("div",{staticClass:"flex_end"},[s("button",{staticClass:"hover_btn",on:{click:function(e){t.setUserPower(0)}}},[t._v("\n\t\t\t\t\t\t设置权限\t\t\t\t\n\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"hover_btn flex_center",on:{click:t.downloadExcel}},[s("span",{staticClass:"iconfont icon-daoru"}),t._v("\n\t\t\t\t\t\t导出excel表格\t\t\t\t\t\n\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"hover_btn flex_center",on:{click:t.downloadTemplet}},[s("span",{staticClass:"iconfont icon-daoru"}),t._v("\n\t\t\t\t\t\t下载投资人信息模板\n\t\t\t\t\t")]),t._v(" "),s("div",{},[t._m(2),t._v(" "),s("input",{ref:"inputer",staticStyle:{display:"none"},attrs:{type:"file",id:"upload-fund-input"},on:{change:function(e){t.uploadManageCompanyInfoExcel(e)}}})]),t._v(" "),s("button",{staticClass:"under_fund_header_btn",on:{click:t.addNewInvester}},[s("span",{staticClass:"iconfont icon-jia"}),t._v("\n\t\t\t\t\t\t添加新的投资人\n\t\t\t\t\t")])])]),t._v(" "),s("div",{staticClass:"under_fund_main table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.$index+1+(t.currentPage-1)*t.pageSize)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"name",label:"投资人名称",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"company",label:"投资人所属公司",width:"250"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"cell",label:"手机号",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"manager",label:"客户端账号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(1==e.row.open_status?"已开启":"未开启")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"email",label:"邮箱",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"relate_investor",label:"关联人",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"ir_name",label:"IR",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"manager_name",label:"客户经理",width:"130"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"subscribe_num",label:"认缴数量",width:"130"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"rmb_subscribe_money",label:"人民币认缴（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"rmb_real_fee",label:"人民币实缴（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"rmb_return_fee",label:"人民币返本（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"rmb_income",label:"人民币收益（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"dollar_subscribe_money",label:"美元认缴（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"dollar_real_fee",label:"美元实缴（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"dollar_return_fee",label:"美元返本（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"dollar_income",label:"美元收益（万元）",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",prop:"irr",label:"XIRR",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.setUserPower(e.row)}}},[t._v("设置权限")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toRunPage(e.row)}}},[t._v("投资详情")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.view(e.row)}}},[t._v("查看")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteInvester(e.row)}}},[t._v("删除")])]}}])}),t._v(" "),s("template",{slot:"empty"},[s("div",{staticClass:"table-nodata flex_start"},[s("img",{attrs:{src:a("urJZ")}}),t._v(" "),s("span",[t._v("没有对应数据")])])])],2),t._v(" "),s("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.everyPageSizeChange,"current-change":t.changeCurrentPage}})],1)]),t._v(" "),s("el-dialog",{attrs:{title:"设置可见人员",visible:t.isSetPowerDialogShow,width:"813px",center:"","append-to-body":!0},on:{"update:visible":function(e){t.isSetPowerDialogShow=e}}},[s("set-power",{attrs:{"have-power-user-ids":t.havePowerUserIds},on:{"get-set-power-id":t.getSetPowerIds}}),t._v(" "),s("div",{staticClass:"dialog_footer clear",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"dialog_btn dialog_btn_cancel",on:{click:function(e){t.isSetPowerDialogShow=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"dialog_btn dialog_btn_submit",on:{click:t.setPowerSubmit}},[t._v("确定")])])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"body_header flex_start"},[e("i",{staticClass:"icon iconfont icon-touziren"}),this._v(" "),e("span",[this._v("投资人概况")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line_box"},[e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"upload-fund-input"}},[e("div",{staticClass:"table-group-title-btn btn-blue-border"},[e("span",{staticClass:"iconfont icon-daochu"}),this._v("导入投资人信息\n\t\t\t\t\t\t\t")])])}]};var r=a("C7Lr")(i,l,!1,function(t){a("MNJk")},"data-v-1a2af678",null);e.default=r.exports}});
//# sourceMappingURL=193.e3507ae78373b44f157c.js.map