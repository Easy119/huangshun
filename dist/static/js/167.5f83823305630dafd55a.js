webpackJsonp([167],{M904:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("xg4f"),o=a("yclV"),s=a("2hMI"),i={name:"selfAdministerFundList",data:function(){return{company_id:"",currentPage:1,pageSize:10,total:0,fund_name:"",simple_name:"",is_master:"",start_protocol_time:"",end_protocol_time:"",isSetPowerDialogShow:!1,havePowerUserIds:[],subComponentPostIds:[],ids:"",noPowerTest:"您没有查看此内容的权限，请联系管理员。",tableData:[],fund_type:[{label:"分支自管基金",value:0},{label:"主体自管基金",value:1}]}},created:function(){this.getSelfFundList()},mounted:function(){},components:{setPower:n.a},methods:{getSelfFundList:function(t){var e=this;if(t&&(this.currentPage=1),this.start_protocol_time&&this.end_protocol_time){var a=new Date(this.start_protocol_time),n=new Date(this.end_protocol_time);if(a.getTime()>n.getTime())return Object(o.g)("info","开始时间不能大于结束时间"),!1}Object(s._226)({page:this.currentPage,size:this.pageSize,fund_name:this.fund_name,simple_name:this.simple_name,is_master:this.is_master,start_protocol_time:this.start_protocol_time,end_protocol_time:this.end_protocol_time}).then(function(t){if(1==t.data.msgNo){var a=t.data.payload.data;a.forEach(function(t,a){t.index=(e.currentPage-1)*e.pageSize+a+1,1==t.is_change?t.is_change="待变更":0==t.is_change&&(t.is_change="正常"),1==t.is_master?t.is_master="主体自管基金":0==t.is_master&&(t.is_master="分支自管基金"),1==t.unit?t.unit="人民币":2==t.unit&&(t.unit="美元"),t.paid_in_proportion=parseInt(100*t.paid_in_proportion)/100}),e.total=t.data.payload.count,e.tableData=a}else Object(o.g)("info",t.data.message)})},addMotherFund:function(){this.$router.push({name:"selfAdministerFundAdd"})},toFundRunPage:function(t){this.$router.push({name:"selfAdministerFundRun",query:{id:t.id,type:2}})},toFundFilePage:function(t){t.auth.fund_operate?this.$router.push({name:"investorReport",query:{fundId:t.id,page:this.page,type:2}}):Object(o.g)("info","您无权限操作该条数据")},deleteFund:function(t,e){var a=this,n=e.id;e.auth.auth_delete?Object(o.h)("确定要删除该基金吗？").then(function(){a.toDeleteCompany(n)}).catch(function(){}):Object(o.g)("info","您无权限操作该条数据")},isLeftOneItem:function(){1==this.tableData.length&&this.currentPage>1&&(this.currentPage=this.currentPage-1)},toDeleteCompany:function(t){var e=this;Object(s._63)({id:t}).then(function(t){1==t.data.msgNo?(Object(o.g)("success",t.data.message),e.isLeftOneItem(),e.getSelfFundList()):Object(o.g)("info",t.data.message)})},view:function(t){t.auth.check_operate?this.$router.push({name:"selfAdministerFundCompanyDetail",query:{id:t.id}}):Object(o.g)("info",noPowerTest)},setUserPower:function(t){this.company_id=t.id,t.auth.auth_operate?this.getHavePowerUsers(t.id):Object(o.g)("info","您没有设置权限，请联系管理员！")},getHavePowerUsers:function(t){var e=this;Object(s._177)({type:5,data_id:t}).then(function(t){1==t.data.msgNo?(e.havePowerUserIds=t.data.payload.ids,e.ids=t.data.payload.ids.join(","),e.isSetPowerDialogShow=!0):Object(o.g)("info",t.data.message)})},getSetPowerIds:function(t){this.subComponentPostIds=[];for(var e=0,a=t.length;e<a;e++)-1==this.subComponentPostIds.indexOf(t[e])&&this.subComponentPostIds.push(t[e]);var n=this.decodeSelectedUserId(this.subComponentPostIds);this.ids=n.join(",")},setPowerSubmit:function(){var t=this;Object(s._323)({table_name:"pet_fund",type:5,data_id:this.company_id,ids:this.ids}).then(function(e){1==e.data.msgNo?(t.isSetPowerDialogShow=!1,Object(o.g)("success",e.data.message)):Object(o.g)("info",e.data.message)})},decodeSelectedUserId:function(t){for(var e=[],a=[],n=0,o=t.length;n<o;n++)a=t[n].id.split("-"),-1==e.indexOf(a[0])&&e.push(a[0]);return e},downloadSelfFundInfoExcel:function(){Object(s._84)()},downloadSelfFundListExcel:function(){Object(s._85)({}).then(function(t){1==t.data.msgNo?window.location.href=t.data.payload.file_path:Object(o.g)("info",t.data.message)})},uploadSelfFundInfoExcel:function(){var t=this,e=this.$refs.inputer,a=e.files[0];return void 0!=a&&(/\.xl(s[xmb]|t[xm]|am|s)$/.test(a.name)?void Object(s._366)({},a).then(function(a){1==a.data.msgNo?(Object(o.g)("success","导入成功"),t.currentPage=1,t.getSelfFundList(1)):Object(o.g)("info",a.data.message),e.value=""}):(Object(o.g)("info","请选择Excel格式文件"),e.value="",!1))},toFundRunListPage:function(){this.$router.push({name:"selfAdministerFunRunList",query:{type:2}})},changeCurrentPage:function(t){this.currentPage=t,this.getSelfFundList()},everyPageSizeChange:function(t){this.pageSize=t,this.getSelfFundList()}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"search_group"},[n("div",{staticClass:"search_group_top"},[n("div",{staticClass:"search_box"},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"基金简称",clearable:""},model:{value:t.simple_name,callback:function(e){t.simple_name=e},expression:"simple_name"}})],1)]),t._v(" "),n("div",{staticClass:"search_group_bottom flex_start"},[n("div",{staticClass:"search_box"},[n("el-input",{attrs:{placeholder:"合伙企业",clearable:""},model:{value:t.fund_name,callback:function(e){t.fund_name=e},expression:"fund_name"}})],1),t._v(" "),n("div",{staticClass:"search_box"},[n("el-select",{attrs:{clearable:"",placeholder:"基金类型"},model:{value:t.is_master,callback:function(e){t.is_master=e},expression:"is_master"}},t._l(t.fund_type,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),n("div",{staticClass:"date_box"},[n("el-date-picker",{attrs:{type:"date",editable:!1,placeholder:"选择开始日期","value-format":"yyyy-MM-dd",clearable:!1},model:{value:t.start_protocol_time,callback:function(e){t.start_protocol_time=e},expression:"start_protocol_time"}})],1),t._v(" "),n("div",{staticClass:"date_middle_text"},[t._v("\n\t\t\t\t\t至\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"date_box"},[n("el-date-picker",{attrs:{type:"date",editable:!1,placeholder:"选择截止日期","value-format":"yyyy-MM-dd",clearable:!1},model:{value:t.end_protocol_time,callback:function(e){t.end_protocol_time=e},expression:"end_protocol_time"}})],1),t._v(" "),n("div",{staticClass:"btn_box"},[n("button",{on:{click:function(e){t.getSelfFundList(1)}}},[t._v("搜索")])])])]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"main under_fund"},[n("div",{staticClass:"under_fund_header flex_between"},[n("div",{},[t._v("\n\t\t\t\t\t自管基金总数"),n("span",[t._v("( "+t._s(t.total)+" )")])]),t._v(" "),n("div",{staticClass:"flex_end"},[n("button",{staticClass:"hover_btn flex_center",on:{click:t.downloadSelfFundListExcel}},[n("span",{staticClass:"iconfont icon-daoru"}),t._v("\n\t\t\t\t\t\t导出excel表格\n\t\t\t\t\t")]),t._v(" "),n("button",{staticClass:"hover_btn flex_center",on:{click:t.downloadSelfFundInfoExcel}},[n("span",{staticClass:"iconfont icon-daoru"}),t._v("\n\t\t\t\t\t\t下载自管基金信息模板\n\t\t\t\t\t")]),t._v(" "),n("div",{},[t._m(1),t._v(" "),n("input",{ref:"inputer",staticStyle:{display:"none"},attrs:{type:"file",id:"upload-fund-input"},on:{change:function(e){t.uploadSelfFundInfoExcel(e)}}})]),t._v(" "),n("button",{staticClass:"under_fund_header_btn",on:{click:t.addMotherFund}},[n("span",{staticClass:"iconfont icon-jia"}),t._v("\n\t\t\t\t\t\t添加自管基金\n\t\t\t\t\t")])])]),t._v(" "),n("div",{staticClass:"under_fund_main table"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"index",label:"序号",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"simpleName",label:"基金简称",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"fundName",label:"合伙企业",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"is_master",label:"基金类型",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"unit",label:"币种",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"subscription_amount",label:"认缴规模（万元）",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"amount_paid_in",label:"实缴规模（万元）",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"paid_in_proportion",label:"缴款比例",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.paid_in_proportion)+" "+t._s(0!=e.row.paid_in_proportion?"%":"")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"multiple",label:"倍数",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"check_multiple",label:"复核倍数",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"irr",label:"XIRR",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"external_payment",label:"对外认缴人民币（万元）",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"external_payment_meiyuan",label:"对外认缴美元（万元）",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"external_payment_fact",label:"对外实缴人民币（万元）",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"external_payment_fact_meiyuan",label:"对外实缴美元（万元）",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"protocol_end_date",label:"协议到期日",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"duration",label:"基金期限（年）",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"record_state_name",label:"备案状态",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"is_change",label:"工商状态",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"check_date",label:"核准日期",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"sg_company_manager_name",label:"管理公司",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.setUserPower(e.row)}}},[t._v("设置权限")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toFundRunPage(e.row)}}},[t._v("基金运行")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.view(e.row)}}},[t._v("查看")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteFund(e.$index,e.row)}}},[t._v("删除")])]}}])}),t._v(" "),n("template",{slot:"empty"},[n("div",{staticClass:"table-nodata"},[n("img",{attrs:{src:a("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t\t\t")])])],2),t._v(" "),n("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.everyPageSizeChange,"current-change":t.changeCurrentPage}})],1)]),t._v(" "),n("el-dialog",{attrs:{title:"设置可见人员",visible:t.isSetPowerDialogShow,width:"813px",center:"","append-to-body":!0},on:{"update:visible":function(e){t.isSetPowerDialogShow=e}}},[n("set-power",{attrs:{"have-power-user-ids":t.havePowerUserIds},on:{"get-set-power-id":t.getSetPowerIds}}),t._v(" "),n("div",{staticClass:"dialog_footer clear",attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"dialog_btn dialog_btn_cancel",on:{click:function(e){t.isSetPowerDialogShow=!1}}},[t._v("取消")]),t._v(" "),n("button",{staticClass:"dialog_btn dialog_btn_submit",on:{click:t.setPowerSubmit}},[t._v("确定")])])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line_box"},[e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"upload-fund-input"}},[e("div",{staticClass:"table-group-title-btn btn-blue-border"},[e("span",{staticClass:"iconfont icon-daochu"}),this._v("导入自管基金信息\n\t\t\t\t\t\t\t")])])}]};var r=a("C7Lr")(i,l,!1,function(t){a("dqn6")},"data-v-319ce029",null);e.default=r.exports},dqn6:function(t,e){}});
//# sourceMappingURL=167.5f83823305630dafd55a.js.map