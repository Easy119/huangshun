webpackJsonp([70],{Yi36:function(t,i){},k1iK:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("3cXf"),o=s.n(e),r=s("2hMI"),n=(s("ij9N"),s("yclV")),a={data:function(){return{showBtn:!1,type:1,fundName:"",fundId:4,noData1:!1,noData2:!1,selectTime:"",editor:!1,selectId:"",toShowArrOne:[],showListStatusArrOne:[],toShowArrTwo:[],showListStatusArrTwo:[],editorArrOne:[],editorArrTwo:[],showEditorArrTwo:[],isShow:!1,step:1,stepOneData:[],copyStepOneData:[],stepTwoData:[],record:[],copyArr:[],hid:"",page:1,fund_type:1}},created:function(){this.$route.query.page&&(this.page=this.$route.query.page),this.$route.query.type&&(this.fund_type=this.$route.query.type),this.init()},computed:{},mounted:function(){},methods:{init:function(){void 0!=this.$route.query.id&&(this.fundName=decodeURIComponent(this.$route.query.name),this.fundId=this.$route.query.id),this.initialData()},toCutnav:function(t){this.step=t,this.noData1=!1,this.noData2=!1,this.record=[],1==t||2==t?(this.showBtn=!0,this.initialData()):this.showBtn=!1},showChildren:function(t){var i=[];1==this.step?i=this.showListStatusArrOne:2==this.step&&(i=this.showListStatusArrTwo);var s=i.indexOf(t);-1==s?i.push(t):i.splice(s,1)},searchToShow:function(t){var i=[],s=[];return 1==this.step?(i=this.showListStatusArrOne,s=this.toShowArrOne):2==this.step&&(i=this.showListStatusArrTwo,s=this.toShowArrTwo),-1==s.indexOf(t)||-1!=i.indexOf(t)},searchIndex:function(t,i){var s=[];return 1==this.step?(this.showListStatusArrOne,s=this.toShowArrOne):2==this.step&&(this.showListStatusArrTwo,s=this.toShowArrTwo),-1!=s.indexOf(t)&&(void 0==i||5==i)},toEditor:function(t,i){if(1==this.step)this.editor=!this.editor,this.copyStepOneData=JSON.parse(o()(this.stepOneData));else if(2==this.step){var s=this.showEditorArrTwo.indexOf(t);-1==s?this.showEditorArrTwo.push(t):this.showEditorArrTwo.splice(s,1);var e={id:t,data:JSON.parse(o()(i.child))};this.copyArr.push(e)}},toCancle:function(t){var i=this;if(1==this.step)this.editor=!this.editor,this.stepOneData=JSON.parse(o()(this.copyStepOneData)),this.record=[];else if(2==this.step){var s=this.showEditorArrTwo.indexOf(t);-1==s?this.showEditorArrTwo.push(t):this.showEditorArrTwo.splice(s,1);var e=[];this.copyArr.forEach(function(s,r){s.id==t&&(e=JSON.parse(o()(s.data)),i.copyArr.splice(r,1))}),this.stepTwoData.forEach(function(i,s){i.id==t&&(i.child=e)}),this.record.forEach(function(s,e){s.id==t&&i.record.splice(e,1)})}},toConmmit:function(t){var i=this,s=[];if(1==this.step?s=this.record:this.record.forEach(function(i){if(i.id==t){var e={sid:i.sid,fmid:i.fmid,contents:i.contents};s.push(e)}}),0==s.length)return Object(n.g)("info","请修改后再提交!"),!1;Object(r._203)({flag:this.step,hid:this.hid,label:2,record:s,fundId:this.fundId,type:this.fund_type}).then(function(s){if(1==s.data.msgNo){if(Object(n.g)("success","修改成功"),1==i.step)i.editor=!i.editor,i.record=[];else if(2==i.step){var e=i.showEditorArrTwo.indexOf(t);-1==e?i.showEditorArrTwo.push(t):i.showEditorArrTwo.splice(e,1),i.record.forEach(function(s,e){s.id==t&&i.record.splice(e,1)}),i.copyArr.forEach(function(s,e){s.id==t&&i.copyArr.splice(e,1)})}i.initialData()}else Object(n.g)("info",s.data.message)})},searchEditorId:function(t){return-1!=this.showEditorArrTwo.indexOf(t)},initialData:function(){var t=this;Object(r._203)({flag:this.step,fundId:this.fundId,label:1,type:this.fund_type}).then(function(i){if(1==i.data.msgNo){var s=i.data.payload.data;t.hid=i.data.payload.hid,null==t.hid||void 0==t.hid||""==t.hid?t.isShow=!1:t.isShow=!0,1==t.step?(s.forEach(function(i,e){if(void 0!=i.child&&0!=i.child.length){t.toShowArrOne.push(i.id),t.showListStatusArrOne.push(i.id);var o=i.child;o.unshift(e+1,0),Array.prototype.splice.apply(s,o)}}),t.stepOneData=s):2==t.step&&(s.forEach(function(i,s){void 0!=i.child&&0!=i.child.length&&i.child.forEach(function(s,e){if(void 0!=s.child&&0!=s.child.length){t.toShowArrTwo.push(s.id),t.showListStatusArrTwo.push(i.id);var o=s.child;o.unshift(e+1,0),Array.prototype.splice.apply(i.child,o)}})}),t.stepTwoData=s)}else 1==t.step?(t.noData1=!0,t.noData2=!1):(t.noData1=!1,t.noData2=!0)})},getChangeData:function(t,i,s,e){var o={sid:i,contents:t,fmid:s};2==this.step&&(o.id=e);var r=!0;this.record.forEach(function(i){i.fmid==s&&(i.contents=t,r=!1)}),r&&this.record.push(o)}}},h={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"fundRun-body-tab-box"},[t.noData1?t._e():e("div",{staticClass:"fundRun-body-tab-btn-box fundRun-body-tab-btn-box1 clear"},[t.editor?t._e():e("div",{staticClass:"fundRun-body-tab-btn right",on:{click:t.toEditor}},[e("img",{attrs:{src:s("CDWC"),alt:""}}),t._v(" "),e("span",[t._v("编辑")])])]),t._v(" "),e("table",{staticClass:"table-normal qynb-table-normal"},[t.noData1?t._e():e("tr",{staticClass:"noColspanTr"},[e("th",{attrs:{width:"300"}},[t._v("项目")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("初期累计金额")]),t._v(" "),e("th",{attrs:{width:"80"}},[t._v("1季度")]),t._v(" "),e("th",{attrs:{width:"80"}},[t._v("2季度")]),t._v(" "),e("th",{attrs:{width:"80"}},[t._v("3季度")]),t._v(" "),e("th",{attrs:{width:"80"}},[t._v("4季度")]),t._v(" "),e("th",{attrs:{width:"217"}},[t._v("期末累计数/时点数")])]),t._v(" "),t._l(t.stepOneData,function(i,s){return e("tr",{directives:[{name:"show",rawName:"v-show",value:t.searchToShow(i.pid),expression:"searchToShow(item.pid)"}],key:s,staticClass:"noColspanTr",class:{secondData:t.searchIndex(i.pid)}},[e("td",{attrs:{width:"300"}},[e("span",[t._v(t._s(i.zhName))])]),t._v(" "),t._l(i.contents,function(s,o){return e("td",{key:o},[t.editor?e("input",{directives:[{name:"model",rawName:"v-model",value:s.contents,expression:"item1.contents"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:s.contents},on:{change:function(i){t.getChangeData(s.contents,s.sid,s.fmid)},input:function(i){i.target.composing||t.$set(s,"contents",i.target.value)}}}):e("span",[t._v(t._s(""!=s.contents?s.contents:"- -"))]),t._v(" "),t.searchIndex(i.id,o)?e("span",{staticClass:"showIcon right",class:{revolveShowIcon:t.searchToShow(i.id)},on:{click:function(s){t.showChildren(i.id)}}}):t._e()])})],2)})],2),t._v(" "),t.editor?e("div",{staticClass:"clear"},[e("div",{staticClass:"cancle-btn right",on:{click:function(i){t.toConmmit()}}},[t._v("提交")]),t._v(" "),e("div",{staticClass:"cancle-btn right",on:{click:function(i){t.toCancle()}}},[t._v("取消")])]):t._e(),t._v(" "),t.noData1?e("div",{staticClass:"table-nodata"},[e("img",{attrs:{src:s("urJZ")}}),t._v(" 没有对应数据,请先导入Excel\n\t\t")]):t._e()])])},staticRenderFns:[]};var d=s("C7Lr")(a,h,!1,function(t){s("Yi36")},"data-v-c376daac",null);i.default=d.exports}});
//# sourceMappingURL=70.edc2d4452d8423e1fa47.js.map