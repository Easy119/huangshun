webpackJsonp([168],{brw1:function(t,e){},q2QW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("2hMI"),l=n("yclV"),d={inject:["reload"],data:function(){return{id:"",is_add_page:"",is_editable:1,count:"",n:"",currentIndex:-1,selected_fund_id:"",addlist:[{fund_type:"",fund_id:"",unit:"",event:"",date:"",output:"",note:"",fund_name:"",event_count:""}],datalist:[{fund_type:"",fund_id:"",unit:"",event:"",date:"",output:"",note:"",selected_fund_name:"",event_count:""}],fund_type_list:[{value:1,label:"母基金"},{value:2,label:"自管基金"}],fund_list:[],all_fund_list:[],coinList:[{label:"人民币",value:1},{label:"美元",value:2}]}},created:function(){this.id=this.$route.query.id,this.is_add_page=this.$route.query.add,this.is_editable=this.$route.query.is_editable,this.getSelectListData(),this.$route.query.count&&(this.count=this.$route.query.count,this.getInitData())},computed:{},mounted:function(){},methods:{getInitData:function(){var t=this;Object(a._216)({sg_company_manager_id:this.id,count:this.count}).then(function(e){1==e.data.msgNo?(t.$set(t.datalist,0,e.data.payload.data),t.datalist[0].selected_fund_name=e.data.payload.data.fund_name,t.n=e.data.payload.data.event_count):Object(l.g)("info",e.data.message)})},getSelectListData:function(){var t=this;Object(a._217)({sg_company_manager_id:this.id}).then(function(e){1==e.data.msgNo?t.all_fund_list=e.data.payload.data:Object(l.g)("info",e.data.message)})},chooseFundType:function(t){this.datalist[0].fund_id="",this.addlist[0].fund_id="",this.datalist[0].unit="",this.addlist[0].unit="",this.fund_list=this.all_fund_list[t]},chooseFundName:function(t,e){if(t){var n=Object(l.l)(this.fund_list,"fund_id",t);this.selected_fund_id=n.fund_id,this.is_add_page?(this.addlist[0].fund_name=n.name,this.addlist[0].unit=n.unit):(this.datalist[0].selected_fund_name=n.name,this.datalist[0].unit=n.unit),this.getEventCountData()}else this.addlist[0].event="",this.addlist[0].unit="",this.datalist[0].event="",this.datalist[0].unit=""},chooseDate:function(t){t&&this.getEventCountData()},getEventCountData:function(){var t=this;if(this.is_add_page){if(1==this.addlist[0].fund_type)var e=2;else e=3;var n=this.addlist[0].date,d=""}else{if(1==this.datalist[0].fund_type)e=2;else e=3;n=this.datalist[0].date,d=this.datalist[0].id}Object(a._169)({type:l.i,id:this.id,cash_type:l.d,date:n,fund_type:e,fund_id:this.selected_fund_id,event_id:d}).then(function(e){1==e.data.msgNo?t.is_add_page?(t.addlist[0].event=e.data.payload.event_name,t.addlist[0].event_count=e.data.payload.event_count):(t.datalist[0].event=e.data.payload.event_name,t.datalist[0].event_count=e.data.payload.event_count):Object(l.g)("info",e.data.message)})},edit:function(t,e){this.currentIndex=t;var n=String(e.fund_type);this.fund_list=this.all_fund_list[n]},editSave:function(t){var e=this;if(""!==t.output&&t.date&&t.unit&&t.fund_type&&t.fund_id)return Number(t.output)||0==t.output?void Object(a._100)({sg_company_manager_id:this.id,event:t.event,output:t.output,date:t.date,unit:t.unit,note:t.note,id:t.id,fund_type:t.fund_type,fund_id:t.fund_id,event_count:t.event_count}).then(function(t){1==t.data.msgNo?(Object(l.g)("success",t.data.message),e.reload()):Object(l.g)("info",t.data.message)}):(Object(l.g)("info","金额格式错误!"),!1);Object(l.g)("info","不能存在空值")},editCancel:function(t){this.reload()},addSave:function(t){var e=this;if(""!==t.output&&t.date&&t.unit&&t.fund_type&&t.fund_id){if(!Number(t.output)&&0!=t.output)return Object(l.g)("info","金额格式错误!"),!1;Object(a.y)({sg_company_manager_id:this.id,event:t.event,output:t.output,date:t.date,unit:t.unit,note:t.note,fund_type:t.fund_type,fund_id:t.fund_id,event_count:t.event_count}).then(function(t){1==t.data.msgNo?(Object(l.g)("success",t.data.message),e.$router.go(-1)):Object(l.g)("info",t.data.message)})}else Object(l.g)("info","不能存在空值!")},addCancel:function(){this.$router.push({name:"cashFlowHome",query:{id:this.id}})}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"cash_flow_table_box"},[t._m(0),t._v(" "),t.is_add_page?n("div",{staticClass:"cash_flow_table table"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.addlist,border:"","empty-text":""}},[n("el-table-column",{attrs:{prop:"coin",label:"收入主体类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.chooseFundType},model:{value:e.row.fund_type,callback:function(n){t.$set(e.row,"fund_type",n)},expression:"scope.row.fund_type"}},t._l(t.fund_type_list,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"coin",label:"收入主体名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:t.chooseFundName},model:{value:e.row.fund_id,callback:function(n){t.$set(e.row,"fund_id",n)},expression:"scope.row.fund_id"}},t._l(t.fund_list,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.fund_id}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd",editable:!1},on:{change:function(e){t.chooseDate(e)}},model:{value:e.row.date,callback:function(n){t.$set(e.row,"date",n)},expression:"scope.row.date"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"event",label:"事件",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{prop:"coin",label:"币种",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t人民币\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==e.row.unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t美元\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"output",label:"金额（万元）",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.row.output,callback:function(n){t.$set(e.row,"output",t._n(n))},expression:"scope.row.output"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"note",label:"备注",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.row.note,callback:function(n){t.$set(e.row,"note",n)},expression:"scope.row.note"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{},[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.addSave(e.row)}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.addCancel(e.row)}}},[t._v("取消")])],1)]}}])})],1)],1):n("div",{staticClass:"cash_flow_table table"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.datalist,border:"","empty-text":""}},[n("el-table-column",{attrs:{prop:"coin",label:"收入主体类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index!=t.currentIndex?n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.fund_type_name)+"\n\t\t\t\t\t\t")]):n("div",{},[n("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.chooseFundType},model:{value:e.row.fund_type,callback:function(n){t.$set(e.row,"fund_type",n)},expression:"scope.row.fund_type"}},t._l(t.fund_type_list,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"coin",label:"收入主体名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index!=t.currentIndex?n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.fund_name)+"\n\t\t\t\t\t\t")]):n("div",{},[n("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(n){t.chooseFundName(n,e.row)}},model:{value:e.row.fund_id,callback:function(n){t.$set(e.row,"fund_id",n)},expression:"scope.row.fund_id"}},t._l(t.fund_list,function(t){return n("el-option",{key:t.fund_id,attrs:{label:t.name,value:t.fund_id}})}))],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index!=t.currentIndex?n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.date)+"\n\t\t\t\t\t\t")]):n("div",{},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd",editable:!1},on:{change:function(e){t.chooseDate(e)}},model:{value:e.row.date,callback:function(n){t.$set(e.row,"date",n)},expression:"scope.row.date"}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"event",label:"事件",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{prop:"unit",label:"币种",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t人民币\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==e.row.unit?n("div",{},[t._v("\n\t\t\t\t\t\t\t美元\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"output",label:"金额（万元）",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index!=t.currentIndex?n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.output)+"\n\t\t\t\t\t\t")]):n("div",{},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.row.output,callback:function(n){t.$set(e.row,"output",t._n(n))},expression:"scope.row.output"}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"note",label:"备注",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index!=t.currentIndex?n("div",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.note)+"\n\t\t\t\t\t\t")]):n("div",{},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.row.note,callback:function(n){t.$set(e.row,"note",n)},expression:"scope.row.note"}})],1)]}}])}),t._v(" "),t.is_editable?n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{},[e.$index!=t.currentIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.edit(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),e.$index==t.currentIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.editSave(e.row)}}},[t._v("保存")]):t._e(),t._v(" "),e.$index==t.currentIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.editCancel(e.row)}}},[t._v("取消")]):t._e()],1)]}}])}):t._e()],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cash_flow_table_title flex_between"},[e("div",{staticClass:"flex_start"},[e("span",{staticClass:"circle_blue"}),this._v(" "),e("span",{staticClass:"name"},[this._v("支出")])])])}]};var o=n("C7Lr")(d,i,!1,function(t){n("brw1")},"data-v-31257d23",null);e.default=o.exports}});
//# sourceMappingURL=168.86156131f676622f8f7d.js.map