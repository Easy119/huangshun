webpackJsonp([24],{"/iYC":function(t,e){},"0+Ey":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("3cXf"),a=i.n(s),l=i("xg4f"),n=i("yclV"),o=i("2hMI"),r=i("wQFd"),c=i("o35S"),p=i("405r"),d=i.n(p),_={data:function(){return{id:"",template_id:2,type:"",showright:!1,allVisibleStr:[],hasCopyapplier:!1,routeList:[],copyAplier:[],filter:0,notice:1,clearRepeatList:[{id:0,name:"不启用自动去重"},{id:1,name:"同一个审批人在流程中出现多次时，仅保留第一个"},{id:2,name:"同一个审批人在流程中出现多次时，仅保留最后一个"},{id:3,name:"同一个审批人仅在连续出现时，自动去重"}],noticCopyList:[{id:1,name:"仅全部同意后通知"},{id:2,name:"仅发起时通知"},{id:3,name:"发起时和全部同意后均通知"}],applierItem:{name:"",class:1,pattern:1,uid:[],uidList:[]},applierList:[],conditionChange:!1,conditionList:[],copierVisibleDialog:!1,copierList:[],copierIdList:[],operatorVisibleDialog:!1,operatorList:[],operatorIdList:[],isSetPowerDialogShow:!1,havePowerUserIds:[],subComponentPostIds:[],ids:""}},created:function(){void 0!=this.$route.query.template_id&&void 0!=this.$route.query.type&&""!=this.$route.query.template_id&&""!=this.$route.query.type?(this.template_id=this.$route.query.template_id,this.type=this.$route.query.type,this.getUserRule()):this.$router.push({name:"applytempList"}),0!=this.routeList.length||(this.routeList=this.$route.meta.routeList)},components:{applyTempRight:r.a,draggable:d.a,addPeopleModal:c.a,setPower:l.a},computed:{},mounted:function(){},methods:{addCopyPeople:function(){this.copierVisibleDialog=!0},initData:function(){var t=this;Object(o.V)({tid:this.template_id}).then(function(e){1==e.data.msgNo&&(t.conditionList=JSON.parse(a()(e.data.payload.condition)),t.filter=e.data.payload.set.filter,t.notice=e.data.payload.set.notice,t.applierList=e.data.payload.default.sp,t.copierList=e.data.payload.default.copier,t.copierIdList=[],t.copierList.forEach(function(e){t.copierIdList.push(e.id)}),t.operatorList=[],t.operatorIdList=[],void 0==e.data.payload.default.handle.user||0==e.data.payload.default.handle.user.length||(t.operatorList=e.data.payload.default.handle.user,t.operatorList.forEach(function(e){t.operatorIdList.push(e.id)})))})},removeHandle:function(t){this.conditionChange=!0},commitApplyProcess:function(){var t=this;if(0!=this.applierList.length){var e={},i=[],s={};if(this.applierList.forEach(function(t){var e={};e.name=t.name,e.uid=t.uid.toString(),e.class=t.class,e.pattern=t.pattern,i.push(e)}),s.sp=i,s.copier=this.copierIdList.toString(),s.handle=this.operatorIdList.toString(),e.default=s,e.filter=this.filter,e.notice=this.notice,this.conditionChange){var l=[];this.conditionList.forEach(function(t){var e={},i=[];t.sp.forEach(function(t){var e={};e.name=t.name,e.uid=t.uid.toString(),e.class=t.class,e.pattern=t.pattern,i.push(e)}),e.condition=t.condition,e.sp=i,e.handle=t.handle.uid,l.push(e)}),e.condition=l}Object(o.T)({tid:this.template_id,data:a()(e)}).then(function(e){1==e.data.msgNo?(Object(n.g)("success","修改成功"),t.initData()):Object(n.g)("fail",e.data.message)})}else Object(n.g)("info","审批人不能为空")},getUserRule:function(){var t=this;Object(o._235)({is_all:1}).then(function(e){if(1==e.data.msgNo){var i=[];e.data.payload.forEach(function(t){void 0!=t.children&&t.children.forEach(function(t){i.push(t)})}),t.initData(),t.allVisibleStr=i}else Object(n.g)("fail",e.data.message)})},changeArrayString:function(t){var e=[];return t.toString().split(",").forEach(function(t){e.push(parseInt(t))}),e},copyAplierFun:function(t){this.copyAplier=this.conditionList[t].sp,Object(n.g)("success","复制成功"),this.hasCopyapplier=!0},pasteAplierFun:function(t){var e=this;if(0!=this.hasCopyapplier){var i=this.conditionList[t].sp.concat(this.copyAplier);if(0!=this.copyAplier.length){var s={},l=[];i.forEach(function(t){var e={};e.name=t.name,e.uid=t.uid.toString(),e.class=t.class,e.pattern=t.pattern,l.push(e)}),s.sp=l,s.condition=this.conditionList[t].condition,s.handle=this.conditionList[t].handle.uid,Object(o.S)({id:this.conditionList[t].id,data:a()(s)}).then(function(s){1==s.data.msgNo?(Object(n.g)("success","粘贴成功"),e.conditionList[t].sp=i):Object(n.g)("fail",s.data.message)})}else Object(n.g)("success","粘贴成功")}else Object(n.g)("info","请先复制审批人")},deleteConditionFun:function(t,e){var i=this;Object(n.h)("确认删除吗？").then(function(s){Object(o.R)({id:t}).then(function(t){1==t.data.msgNo&&(Object(n.g)("success","删除成功"),i.conditionList.splice(e,1))})}).catch(function(){})},addCondition:function(){this.$router.push({name:"applytempProcessConditionNew",query:{edittype:1,type:this.type,template_id:this.template_id}})},editCondition:function(t){Object(n.u)("htcx_applyCondition",this.conditionList[t]),this.$router.push({name:"applytempProcessConditionNew",query:{edittype:2,type:this.type,template_id:this.template_id}})},addApplyPeople:function(){this.showright=!0,this.applierItem={rightType:1,name:"",class:1,pattern:2,uid:[],user:[]}},editApplyPeople:function(t,e){this.applierItem=e,this.applierItem.rightType=2,this.applierItem.rightIndex=t,this.showright=!0},deleteApplyPeople:function(t){this.applierList.splice(t,1)},changerightshow:function(t){this.showright=t},setApplyData:function(t){var e={};e.class=t.class,e.name=t.name,e.pattern=t.pattern,e.uid=t.uid,e.user=t.user,1==t.rightType?this.applierList.push(e):this.applierList[t.rightIndex]=e,this.showright=!1},addOperatorPeople:function(){this.operatorVisibleDialog=!0},deleteUser:function(t,e,i){var s=t+"IdList";this[t+"List"].splice(i,1),this[s]=this[s].filter(function(t){return t!=e})},changeModalShow:function(t,e){this[e+"VisibleDialog"]=t},getModaldata:function(t,e){this[t]=e},getImgurl:function(t){t.currentTarget.src="../../static/images/header_userimg.png",t.onerror=null}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal-content-body"},[s("div",{staticClass:"applytempbox"},[s("div",{staticClass:"table-content",class:{"table-content-hide":t.showright}},[t._m(0),t._v(" "),s("div",{staticClass:"table-group"},[s("div",{staticClass:"table-group-content"},[s("div",{staticClass:"clear table-group-title"},[s("div",{staticClass:"left breadcrumb"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.routeList,function(e,i){return s("el-breadcrumb-item",{key:i,attrs:{to:{name:e.name,query:e.query}}},[t._v(t._s(e.name_str))])}))],1),t._v(" "),s("div",{staticClass:"line"})]),t._v(" "),s("div",{staticClass:"applytemppro_box"},[s("div",{staticClass:"atp_group"},[s("div",{staticClass:"atp_group_title"},[t._v("默认审批流程")]),t._v(" "),s("div",{staticClass:"atp_group_content"},[s("div",{staticClass:"atp_peoplelist"},[s("div",{staticClass:"atp_peopleitem"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("默认审批人")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[s("draggable",{attrs:{options:{group:{name:"control"}}},model:{value:t.applierList,callback:function(e){t.applierList=e},expression:"applierList"}},[s("transition-group",{staticClass:"flex flex_wrap",attrs:{tag:"div",id:"apply"}},t._l(t.applierList,function(e,a){return s("div",{key:a,staticClass:"flex"},[s("div",{staticClass:"atp_peopleitem_addeditem",on:{click:function(i){t.editApplyPeople(a,e)}}},[s("span",{staticClass:"iconfont icon-guanbi",on:{click:function(e){e.stopPropagation(),t.deleteApplyPeople(a)}}}),t._v(" "),s("div",{staticClass:"atp_peopleitem_addeditem_top"},[1==e.class?s("div",{staticClass:"atp_peopleitem_peoplebox"},[s("img",{attrs:{src:i("0IK3")}}),t._v(" "),s("span",[t._v("主管理员")])]):t._e(),t._v(" "),t._l(e.user,function(a){return 2==e.class||3==e.class?s("div",{staticClass:"atp_peopleitem_peoplebox"},[2==e.class?s("img",{attrs:{src:a.url}}):s("img",{attrs:{src:i("0IK3")}}),t._v(" "),s("span",[t._v(t._s(a.name))])]):t._e()})],2),t._v(" "),""!=e.name?s("div",{staticClass:"atp_peopleitem_addeditem_bottom"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e()]),t._v(" "),s("div",{staticClass:"atp_peopleitem_icon marginlr_10"},[s("span",{staticClass:"iconfont icon-xiajiantou"})]),t._v(" "),a==t.applierList.length-1?s("div",{staticClass:"atp_peopleitem_icon",on:{click:t.addApplyPeople}},[s("div",{staticClass:"atp_peopleitem_addicon"})]):t._e()])}))],1),t._v(" "),0==t.applierList.length?s("div",{staticClass:"atp_peopleitem_icon",on:{click:t.addApplyPeople}},[s("div",{staticClass:"atp_peopleitem_addicon"})]):t._e()],1)]),t._v(" "),s("div",{staticClass:"atp_peopleitem"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("默认抄送人")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[t._l(t.copierList,function(e,i){return 0!=t.copierList.length?s("div",{staticClass:"atp_peopleitem_addeditem marginr_10"},[s("span",{staticClass:"iconfont icon-guanbi",on:{click:function(s){t.deleteUser("copier",e.id,i)}}}),t._v(" "),s("div",{staticClass:"atp_peopleitem_addeditem_top"},[s("div",{staticClass:"atp_peopleitem_peoplebox"},[s("img",{attrs:{src:e.url},on:{error:t.getImgurl}}),t._v(" "),s("span",[t._v(t._s(e.name))])])])]):t._e()}),t._v(" "),s("div",{staticClass:"atp_peopleitem_icon",on:{click:t.addCopyPeople}},[s("div",{staticClass:"atp_peopleitem_addicon"})])],2)]),t._v(" "),s("div",{staticClass:"atp_peopleitem"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("默认经办人")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[t._l(t.operatorList,function(e,i){return 0!=t.operatorList.length?s("div",{staticClass:"atp_peopleitem_addeditem marginr_10"},[s("span",{staticClass:"iconfont icon-guanbi",on:{click:function(s){t.deleteUser("operator",e.id,i)}}}),t._v(" "),s("div",{staticClass:"atp_peopleitem_addeditem_top"},[s("div",{staticClass:"atp_peopleitem_peoplebox"},[s("img",{attrs:{src:e.url},on:{error:t.getImgurl}}),t._v(" "),s("span",[t._v(t._s(e.name))])])])]):t._e()}),t._v(" "),s("div",{staticClass:"atp_peopleitem_icon",on:{click:t.addOperatorPeople}},[s("div",{staticClass:"atp_peopleitem_addicon"})])],2)])])])]),t._v(" "),s("div",{staticClass:"full_line"}),t._v(" "),s("div",{staticClass:"atp_group"},[s("div",{staticClass:"atp_group_title"},[s("div",{staticClass:"atp_group_title_left"},[t._v("分条件审批\n\t\t\t\t\t\t\t\t\t"),s("el-tooltip",{staticClass:"atp_group_title_tip",attrs:{effect:"dark",content:"Top Left 提示文字",placement:"top"}},[s("i",{staticClass:"el-icon-question"})])],1),t._v(" "),s("div",{staticClass:"atp_group_title_right"},[s("span",{staticClass:"btn-blue-border",on:{click:t.addCondition}},[t._v("添加")]),t._v(" "),s("span",{},[t._v("审批单首先匹配优先级高的条件，拖拽可调整以下条件的优先级")])])])]),t._v(" "),s("draggable",{attrs:{options:{group:"people",animation:120}},on:{update:t.removeHandle},model:{value:t.conditionList,callback:function(e){t.conditionList=e},expression:"conditionList"}},[s("transition-group",{attrs:{tag:"div",classs:"atp_conditionlist"}},t._l(t.conditionList,function(e,a){return s("div",{key:a,staticClass:"atp_conditionitem"},[s("div",{staticClass:"atp_conditionitem_left"},[s("div",{staticClass:"atp_conditionitem_leftspan"},[s("div",{staticClass:"title"},[t._v("优先级")]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(a+1))])])]),t._v(" "),s("div",{staticClass:"atp_conditionitem_right atp_conditionbox"},[s("div",{staticClass:"atp_conditionbox_top"},[s("div",{staticClass:"atp_conditionbox_top_left"},[s("div",{staticClass:"text"},[t._v(t._s(e.category))])]),t._v(" "),s("div",{staticClass:"atp_conditionbox_top_right"},[s("span",{staticClass:"hoverlink",on:{click:function(e){t.copyAplierFun(a)}}},[t._v("复制审批人")]),t._v(" "),s("span",{staticClass:"hoverlink",on:{click:function(e){t.pasteAplierFun(a)}}},[t._v("粘贴审批人")]),t._v(" "),s("span",{on:{click:function(e){t.editCondition(a)}}},[t._v("编辑")]),t._v(" "),s("span",{on:{click:function(i){t.deleteConditionFun(e.id,a)}}},[t._v("删除")])])]),t._v(" "),s("div",{staticClass:"atp_peopleitem atp_conditionbox_bottom"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("审批人")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[t._l(e.sp,function(a,l){return 0!=e.sp.length?s("div",{staticClass:"flex"},[s("div",{staticClass:"atp_peopleitem_addeditem"},[s("div",{staticClass:"atp_peopleitem_addeditem_top"},[1==a.class?s("div",{staticClass:"atp_peopleitem_peoplebox"},[s("img",{attrs:{src:i("0IK3")}}),t._v(" "),s("span",[t._v("主管理员")])]):t._e(),t._v(" "),t._l(a.user,function(e){return 2==a.class||3==a.class?s("div",{staticClass:"atp_peopleitem_peoplebox"},[2==a.class?s("img",{attrs:{src:e.url}}):s("img",{attrs:{src:i("0IK3")}}),t._v(" "),s("span",[t._v(t._s(e.name))])]):t._e()})],2),t._v(" "),""!=a.name?s("div",{staticClass:"atp_peopleitem_addeditem_bottom"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(a.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e()]),t._v(" "),l!=e.sp.length-1?s("div",{staticClass:"atp_peopleitem_icon"},[s("span",{staticClass:"iconfont icon-xiajiantou"})]):t._e()]):t._e()}),t._v(" "),0==e.sp.length?s("div",{staticClass:"atp_peopleitem_text"},[t._v("当前条件下未设置审批人，匹配该条件时，可在审批单发起时自由添加审批人")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"atp_peopleitem atp_conditionbox_bottom"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("经办人")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[void 0!=e.handle.user&&0!=e.handle.user.length?s("div",{staticClass:"flex"},t._l(e.handle.user,function(e,i){return s("div",{staticClass:"atp_peopleitem_addeditem marginr_10"},[s("div",{staticClass:"atp_peopleitem_addeditem_top"},[s("div",{staticClass:"atp_peopleitem_peoplebox"},[s("img",{attrs:{src:e.url}}),t._v(" "),s("span",[t._v(t._s(e.name))])])])])})):s("div",{staticClass:"atp_peopleitem_text"},[t._v("未设置（不抄送给任何人)")])])])])])}))],1),t._v(" "),s("div",{staticClass:"full_line"}),t._v(" "),s("div",{staticClass:"atp_group"},[s("div",{staticClass:"atp_group_title"},[t._v("\n\t\t\t\t\t\t\t\t更多设置\n\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"atp_group_content"},[s("div",{staticClass:"atp_peoplelist"},[s("div",{staticClass:"atp_peopleitem marginb_30"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("审批人去重")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[s("div",{staticClass:"atp_peopleitem_inputbox"},[s("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},t._l(t.clearRepeatList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])]),t._v(" "),s("div",{staticClass:"atp_peopleitem marginb_30"},[s("div",{staticClass:"atp_peopleitem_left"},[t._v("通知抄送人")]),t._v(" "),s("div",{staticClass:"atp_peopleitem_right"},[s("div",{staticClass:"atp_peopleitem_inputbox"},[s("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.notice,callback:function(e){t.notice=e},expression:"notice"}},t._l(t.noticCopyList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])])])])]),t._v(" "),s("div",{staticClass:"full_line"}),t._v(" "),s("div",{staticClass:"btn_box"},[s("div",{staticClass:"btn-blue",on:{click:t.commitApplyProcess}},[t._v("保存")])])],1)])]),t._v(" "),s("add-people-modal",{attrs:{visibleDialog:t.copierVisibleDialog,name:"copier",title:"选择默认抄送人",selectedId:t.copierIdList},on:{changeshow:t.changeModalShow,setData:t.getModaldata}}),t._v(" "),s("add-people-modal",{attrs:{visibleDialog:t.operatorVisibleDialog,name:"operator",title:"选择默认经办人",selectedId:t.operatorIdList},on:{changeshow:t.changeModalShow,setData:t.getModaldata}})],1),t._v(" "),s("apply-temp-right",{attrs:{showright:t.showright,data:t.applierItem},on:{changeshow:t.changerightshow,setData:t.setApplyData}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"clear table-content-title"},[e("div",{staticClass:"left"},[this._v("审批流程配置")])])}]};var h=i("C7Lr")(_,u,!1,function(t){i("bmX7")},"data-v-7118a061",null);e.default=h.exports},bmX7:function(t,e){},o35S:function(t,e,i){"use strict";var s=i("2hMI"),a=i("yclV"),l={name:"draglist",data:function(){return{template_id:"",filterText:"",visibleList:[],defaultProps:{children:"children",label:"name"},visibleCheckedall:!1,checkedVisibleStr:[],defaultChechedArr:[],allVisibleStr:[]}},props:["visibleDialog","selectedId","name","title"],watch:{filterText:function(t){this.$refs.tree.filter(t)},visibleDialog:function(){this.getUserRule(this.selectedId)}},mounted:function(){},methods:{addUnionId:function(t){for(var e in t)t[e].children?(this.$set(t[e],"disabled",!0),this.addUnionId(t[e].children)):t[e].is_user?t[e].id=t[e].id+"-"+t[e].one_department_id:this.$set(t[e],"disabled",!0);return t},changeshow:function(t){this.$emit("changeshow",t,this.name)},getImgurl:function(t){t.currentTarget.src="../../static/images/header_userimg.png",t.onerror=null},getUserRule:function(t){var e=this;Object(s._149)({type:2}).then(function(i){if(1==i.data.msgNo){var s=e.addUnionId(i.data.payload);e.visibleList=s;var l=s,n=[];l.forEach(function(i){i.id=-i.id,void 0!=i.children&&0!=i.children.length||(i.disabled=!0),void 0!=i.children&&(i.children.forEach(function(t){n.push(t.id)}),e.checkedVisibleStr=i.children.filter(function(e){return-1!=t.indexOf(e.id)}))}),e.allVisibleStr=n,e.visibleList=l,0!=t.length?(t.length==n.length?e.visibleCheckedall=!0:e.visibleCheckedall=!1,e.setCheckedKeyStr(t),e.$refs.tree.setCheckedKeys(t)):(e.visibleCheckedall=!1,e.$refs.tree.setCheckedKeys([]))}else Object(a.g)("fail",i.data.message)})},filterNode:function(t,e){return!t||-1!==e.name.toString().indexOf(t)},changeVisibleCheckedall:function(t){t?(this.$refs.tree.setCheckedKeys(this.allVisibleStr),this.setCheckedKeyStr(this.allVisibleStr)):(this.$refs.tree.setCheckedKeys([]),this.setCheckedKeyStr([]))},visivleListChange:function(t,e){var i=[];e.checkedNodes.forEach(function(t){if(void 0==t.children){var e={};e.id=t.id,e.url=t.url,e.name=t.name,i.push(e)}}),this.checkedVisibleStr=i,this.checkedVisibleStr.length==this.allVisibleStr.length?this.visibleCheckedall=!0:this.visibleCheckedall=!1},setCheckedKeyStr:function(t){var e=[];this.visibleList.forEach(function(i){void 0!=i.children&&(e=e.concat(i.children.filter(function(e){return-1!=t.indexOf(e.id.toString())||-1!=t.indexOf(e.id)})))}),this.checkedVisibleStr=e},compare:function(t){return function(e,i){return e[t]-i[t]}},deleteCheckedVisivle:function(t){var e=this;this.checkedVisibleStr.forEach(function(i,s){t==i.id&&e.checkedVisibleStr.splice(s,1)});var i=[];this.checkedVisibleStr.forEach(function(t,e){i.push(t.id)}),this.checkedVisibleStr.length==this.allVisibleStr.length?this.visibleCheckedall=!0:this.visibleCheckedall=!1,this.$refs.tree.setCheckedKeys(i)},commitVisible:function(){var t=[];this.checkedVisibleStr=this.decodeSelectedId(this.checkedVisibleStr),this.checkedVisibleStr.forEach(function(e){t.push(e.id)}),this.$emit("setData",this.name+"List",this.checkedVisibleStr),this.$emit("setData",this.name+"IdList",t),this.$emit("getData",this.checkedVisibleStr,t),this.filterText="",this.changeshow(!1)},decodeSelectedId:function(t){var e=[];for(var i in t)e=t[i].id.split("-"),t[i].id=e[0];return t},visibleClose:function(){this.template_id="",this.checkedVisibleStr=[],this.$refs.tree.setCheckedKeys([]),this.visibleCheckedall=!1,this.changeshow(!1)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"choosePeopleDialog",attrs:{title:t.title,visible:t.visibleDialog,width:"800px",center:"","append-to-body":!0,"before-close":t.visibleClose},on:{"update:visible":function(e){t.visibleDialog=e}}},[i("div",{staticClass:"dialog_content flex"},[i("div",{staticClass:"dialog_content_content"},[i("div",{staticClass:"dialog_content_content_title"},[t._v("选择人员")]),t._v(" "),i("div",[i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),i("el-tree",{ref:"tree",staticClass:"dialog_content_content_tree",attrs:{data:t.visibleList,"show-checkbox":"","node-key":"id","default-checked-keys":t.defaultChechedArr,"filter-node-method":t.filterNode,"check-on-click-node":!0,props:t.defaultProps},on:{check:t.visivleListChange},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node;return e.data,i("span",{staticClass:"custom_tree_node flex"},[void 0!=s.data.url?i("img",{attrs:{src:s.data.url},on:{error:t.getImgurl}}):t._e(),t._v("\n              \t\t\t"+t._s(s.data.name)+"\n           \t \t\t")])}}])})],1),t._v(" "),i("div",{staticClass:"dialog_content_content"},[i("div",{staticClass:"dialog_content_content_title"},[t._v("已选人员")]),t._v(" "),i("div",{staticClass:"selected_list"},t._l(t.checkedVisibleStr,function(e){return i("div",{staticClass:"selected_item"},[i("img",{staticClass:"selected_item_headimg",attrs:{src:e.url},on:{error:t.getImgurl}}),t._v(t._s(e.name)+"\n\t\t\t\t\t\t"),i("i",{staticClass:"el-icon-error",on:{click:function(i){t.deleteCheckedVisivle(e.id)}}})])}))])]),t._v(" "),i("div",{staticClass:"dialog_footer clear",attrs:{slot:"footer"},slot:"footer"},[i("button",{staticClass:"dialog-btn-submit btn-blue",on:{click:t.commitVisible}},[t._v("确定")]),t._v(" "),i("button",{staticClass:"dialog-btn-submit btn-blue-border ",on:{click:t.visibleClose}},[t._v("取消")])])])},staticRenderFns:[]};var o=i("C7Lr")(l,n,!1,function(t){i("zsTu")},"data-v-60c1ad58",null);e.a=o.exports},wQFd:function(t,e,i){"use strict";var s=i("3cXf"),a=i.n(s),l=i("o35S"),n=i("yclV"),o=i("2hMI"),r={name:"draglist",data:function(){return{radio2:"",currentApplierItem:{name:"",class:1,pattern:2,uid:[],uidList:[]},roleid:"",userList:[],userIdList:[],userVisibleDialog:!1,applierTypeId:1,applierTypeList:[{id:1,name:"主管"},{id:2,name:"指定成员"},{id:3,name:"角色"}],roleList:[{id:1,name:"主管"},{id:2,name:"指定成员"},{id:3,name:"角色"}],applyTypeId:2,applyTypeList:[{id:2,name:"会签（须所有审批人同意）"},{id:3,name:"或签（一名审批人同意或拒绝即可）"}]}},props:["showright","data"],components:{addPeopleModal:l.a},watch:{showright:function(){this.currentApplierItem=JSON.parse(a()(this.data)),2==this.data.class?(this.userIdList=this.data.uid.toString().split(","),this.userList=this.data.user):(this.userIdList=[],this.userList=[]),3==this.data.class?this.roleid=parseInt(this.data.uid):this.roleid="",this.initData()}},methods:{initData:function(){var t=this;Object(o._144)().then(function(e){1==e.data.msgNo&&(t.roleList=e.data.payload,0==t.roleList.length?t.roleid="":""==t.roleid&&(t.roleid=t.roleList[0].id))})},changeshow:function(t){this.$emit("changeshow",t)},commitData:function(){var t=this,e=JSON.parse(a()(this.currentApplierItem));if(1==e.class)e.user=[],e.uid=[];else if(2==e.class){if(0==this.userIdList.length)return void Object(n.g)("info","指定成员不能为空～");e.uid=this.userIdList,e.user=this.userList}else{if(""==this.roleid||null==this.roleid)return void Object(n.g)("info","角色不能为空～");e.uid=this.roleid,e.user=this.roleList.filter(function(e){return e.id==t.roleid})}this.$emit("setData",e),this.changeshow(!1)},clearApplier:function(){this.userIdList=[],this.userList=[]},addCopyPeople:function(){this.userVisibleDialog=!0},changeModalShow:function(t,e){this[e+"VisibleDialog"]=t},getModaldata:function(t,e){this[t]=e},getImgurl:function(t){t.currentTarget.src="../../static/images/header_userimg.png",t.onerror=null}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"foldbox"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showright,expression:"showright"}],staticClass:"table_right"},[i("div",{staticClass:"table_right_cover",on:{click:function(e){t.changeshow(!1)}}}),t._v(" "),i("transition",{attrs:{name:"fold"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showright,expression:"showright"}],staticClass:"table_right_body"},[i("div",{staticClass:"table_right_title"},[t._v("\n\t\t\t\t\t\t设置审批人\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"full_line marginb_30"}),t._v(" "),i("div",{staticClass:"table_right_content"},[i("div",{staticClass:"atp_peoplelist"},[i("div",{staticClass:"atp_peopleitem"},[i("div",{staticClass:"atp_peopleitem_left"},[t._v("审批名称")]),t._v(" "),i("div",{staticClass:"atp_peopleitem_right"},[i("div",{staticClass:"atp_peopleitem_inputbox marginb_20"},[i("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.currentApplierItem.name,callback:function(e){t.$set(t.currentApplierItem,"name",e)},expression:"currentApplierItem.name"}})],1)])]),t._v(" "),i("div",{staticClass:"full_line marginb_20"}),t._v(" "),i("div",{staticClass:"atp_peopleitem marginb_30"},[i("div",{staticClass:"atp_peopleitem_left"},[t._v("审批人类别")]),t._v(" "),i("div",{staticClass:"atp_peopleitem_right"},[i("div",{staticClass:"marginb_20"},[i("el-radio-group",{staticClass:"atp_radiogroup flex",model:{value:t.currentApplierItem.class,callback:function(e){t.$set(t.currentApplierItem,"class",e)},expression:"currentApplierItem.class"}},t._l(t.applierTypeList,function(e,s){return i("el-radio",{key:s,staticClass:"atp_radioitem",attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),1!=t.currentApplierItem.class?i("div",{staticClass:"full_line marginb_20"}):t._e(),t._v(" "),2==t.currentApplierItem.class?i("div",{staticClass:"flex"},[0!=t.userList.length?i("div",{staticClass:"atp_peopleitem_addeditem marginr_10"},[i("span",{staticClass:"iconfont icon-guanbi",on:{click:t.clearApplier}}),t._v(" "),i("div",{staticClass:"atp_peopleitem_addeditem_top"},t._l(t.userList,function(e){return i("div",{staticClass:"atp_peopleitem_peoplebox"},[i("img",{attrs:{src:e.url},on:{error:t.getImgurl}}),t._v(" "),i("span",[t._v(t._s(e.name))])])}))]):t._e(),t._v(" "),i("div",{staticClass:"atp_btnbox flex_shrink"},[0==t.userList.length?i("div",{staticClass:"btn-blue",on:{click:t.addCopyPeople}},[t._v("添加成员")]):i("div",{staticClass:"btn-blue",on:{click:t.addCopyPeople}},[t._v("修改成员")])])]):t._e(),t._v(" "),3==t.currentApplierItem.class?i("div",{staticClass:"atp_peopleitem_inputbox"},[i("el-select",{attrs:{placeholder:"请选择角色",size:"small"},model:{value:t.roleid,callback:function(e){t.roleid=e},expression:"roleid"}},t._l(t.roleList,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1):t._e()])]),t._v(" "),i("div",{staticClass:"full_line marginb_20"}),t._v(" "),i("div",{staticClass:"atp_peopleitem marginb_30"},[i("div",{staticClass:"atp_peopleitem_left"},[t._v("审批方式\n\t\t\t\t\t\t\t\t\t"),i("el-tooltip",{staticClass:"atp_group_title_tip",attrs:{effect:"dark",content:"当审批人含有多人时的审批方式",placement:"top"}},[i("i",{staticClass:"el-icon-question"})])],1),t._v(" "),i("div",{staticClass:"atp_peopleitem_right"},[i("div",[i("el-radio-group",{staticClass:"atp_radiogroup_column flex_column",model:{value:t.currentApplierItem.pattern,callback:function(e){t.$set(t.currentApplierItem,"pattern",e)},expression:"currentApplierItem.pattern"}},t._l(t.applyTypeList,function(e,s){return i("el-radio",{key:s,staticClass:"atp_radioitem",attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1)])])])]),t._v(" "),i("div",{staticClass:"table_right_bottom flex"},[i("div",{staticClass:"btn-blue",on:{click:t.commitData}},[t._v("确定")]),t._v(" "),i("div",{staticClass:"btn-blue-border",on:{click:function(e){t.changeshow(!1)}}},[t._v("取消")])])])])],1)]),t._v(" "),i("add-people-modal",{attrs:{visibleDialog:t.userVisibleDialog,name:"user",selectedId:t.userIdList,title:"选择指定成员"},on:{changeshow:t.changeModalShow,setData:t.getModaldata}})],1)},staticRenderFns:[]};var p=i("C7Lr")(r,c,!1,function(t){i("/iYC")},"data-v-0c205c46",null);e.a=p.exports},zsTu:function(t,e){}});
//# sourceMappingURL=24.be3af6b940998428423e.js.map