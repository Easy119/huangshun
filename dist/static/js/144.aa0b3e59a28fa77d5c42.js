webpackJsonp([144],{D2nD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("3cXf"),c=s.n(i),l=s("2hMI"),n=s("yclV"),a={data:function(){return{filterText:"",filterText1:"",selectedPeople:-1,datalist:[],peoplelist:[],historylist:[]}},computed:{selectedProject:function(){var e=[];return this.datalist.forEach(function(t){t.children.forEach(function(t){t.children.forEach(function(t){t.checked&&e.push(t)})})}),e},selectedPeopleCount:function(){return-1==this.selectedPeople?0:1},submitOk:function(){return 0!=this.selectedProject.length&&-1!=this.selectedPeople},noProject:function(){var e=0;return this.datalist.forEach(function(t){1==t.show&&e++}),0==e},noPeople:function(){var e=0;return this.peoplelist.forEach(function(t){1==t.show&&e++}),0==e}},created:function(){this.initdata()},methods:{initdata:function(){var e=this;this.selectedPeople=-1,Object(l._235)().then(function(t){if(1==t.data.msgNo){var s=t.data.payload;s=e.xunhuan(s),s=e.count(s),s=e.imgurl(s),s=e.companyAddUserid(s),e.datalist=s}}),Object(l._235)().then(function(t){if(1==t.data.msgNo){var s=t.data.payload;s=e.xunhuan(s),s=e.count(s),s=e.imgurl(s),e.peoplelist=s}}),Object(l._27)().then(function(t){1==t.data.msgNo&&(e.historylist=t.data.payload)})},xunhuan:function(e){var t=this;return e.forEach(function(e){e.checked=!1,e.open=!0,e.show=!0,void 0!=e.children&&t.xunhuan(e.children)}),e},count:function(e){return e.forEach(function(e){var t=0;e.children.forEach(function(e){void 0!=e.children?e.count=e.children.length:e.count=0,t+=e.count,t++}),e.count=t}),e},imgurl:function(e){return e.forEach(function(e){e.children.forEach(function(e){""==e.url&&(e.url="../static/images/header_userimg.png")})}),e},companyAddUserid:function(e){return e.forEach(function(e){e.children.forEach(function(e){e.children.forEach(function(t){t.userid=e.id})})}),e},filterProject:function(){var e=this;if(""==this.filterText)this.datalist.forEach(function(e){e.show=!0,e.children.forEach(function(e){e.show=!0,e.children.forEach(function(e){e.show=!0})})});else{var t=[],s=[],i=[];this.datalist.forEach(function(c){c.children.forEach(function(l){l.children.forEach(function(n){-1!=n.name.indexOf(e.filterText)&&(t.push(c.id),s.push(l.id),i.push(n.id))})})}),this.datalist.forEach(function(e){-1==t.indexOf(e.id)?e.show=!1:e.show=!0,e.children.forEach(function(e){-1==s.indexOf(e.id)?e.show=!1:e.show=!0,e.children.forEach(function(e){-1==i.indexOf(e.id)?e.show=!1:e.show=!0})})})}},clearFilterProject:function(){this.filterText="",this.filterProject()},filterPeople:function(){var e=this,t=[],s=[];this.peoplelist.forEach(function(i){i.children.forEach(function(c){-1!=c.name.indexOf(e.filterText1)&&(t.push(i.id),s.push(c.id))})}),this.peoplelist.forEach(function(e){-1==t.indexOf(e.id)?e.show=!1:e.show=!0,e.children.forEach(function(e){-1==s.indexOf(e.id)?e.show=!1:e.show=!0})})},clearFilterPeople:function(){this.filterText1="",this.filterPeople()},selectAll:function(e,t){var s=this;this.datalist[e].children[t].children.length>0&&this.datalist[e].children[t].children.forEach(function(i){i.show&&(i.checked=s.datalist[e].children[t].checked)})},selectOne:function(e,t,s){var i=0,c=0;this.datalist[e].children[t].children.forEach(function(e){e.show&&c++,e.checked&&e.show&&i++}),this.datalist[e].children[t].checked=i==c&&0!=i},selectOnePeople:function(e,t,s){s?(this.selectedPeople=this.peoplelist[e].children[t].id,this.peoplelist.forEach(function(e){e.children.forEach(function(e){e.checked=!1})}),this.peoplelist[e].children[t].checked=!0):this.selectedPeople=-1},commitClick:function(){var e=this;0==this.selectedProject.length?Object(n.g)("info","您还没有选择转承项目"):-1==this.selectedPeople?Object(n.g)("info","您还没有选择转承人员"):Object(l._317)({company_id:c()(this.selectedProject),user_id:this.selectedPeople}).then(function(t){1==t.data.msgNo&&(Object(n.g)("success","转承成功！"),e.initdata())})},getImgurl:function(e){e.currentTarget.src="../../static/images/header_userimg.png",e.onerror=null}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"personal-content-body"},[s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("div",{staticClass:"historyapply-group"},[s("div",{staticClass:"projectTransfer-left"},[s("div",{staticClass:"projectTransfer-left-top clear"},[s("div",{staticClass:"projectTransfer-left-left left"},[s("div",{staticClass:"projectTransfer-left-left-title"},[e._v("步骤一：选择需要转承的项目")]),e._v(" "),s("div",{staticClass:"select-tree"},[s("div",{staticClass:"search-inputbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filterText,expression:"filterText"}],attrs:{placeholder:"输入项目关键字进行搜索"},domProps:{value:e.filterText},on:{keyup:e.filterProject,input:function(t){t.target.composing||(e.filterText=t.target.value)}}}),e._v(" "),0!=e.filterText.length?s("i",{staticClass:"el-icon-circle-close",on:{click:e.clearFilterProject}}):e._e(),e._v(" "),s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),s("div",{staticClass:"projectTransfer-left-left-treetitle"},[e._v("部门")]),e._v(" "),e.noProject?s("div",{staticClass:"nodata"},[s("i",{staticClass:"el-icon-info"}),e._v("没有相关数据")]):e._e(),e._v(" "),s("div",{staticClass:"select-tree-list"},e._l(e.datalist,function(t,i){return s("div",{staticClass:"select-tree-level1"},[t.show?s("div",{staticClass:"select-tree-level-title",on:{click:function(e){t.open=!t.open}}},[s("span",{staticClass:"icon-list-close",class:{"icon-list-open":!t.open}}),e._v(" "),s("div",{staticClass:"select-tree-name"},[s("span",[e._v(e._s(t.name))])])]):e._e(),e._v(" "),s("div",{staticClass:"select-tree-level-box",class:{"select-tree-level-box-close":!t.open},style:{"max-height":30*t.count+"px"}},e._l(t.children,function(t,c){return t.show?s("div",{staticClass:"select-tree-level2"},[s("div",{staticClass:"select-tree-level-title",on:{click:function(e){t.open=!t.open}}},[s("el-checkbox",{staticClass:"select-tree-checkbox",attrs:{size:"mini",disabled:!t.children.length>0},on:{change:function(t){e.selectAll(i,c)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item1.checked"}}),s("img",{staticClass:"select-tree-level2-title-headerimg",attrs:{src:t.url},on:{error:e.getImgurl}}),e._v(" "),s("div",{staticClass:"select-tree-name"},[s("span",[e._v(e._s(t.name))])])],1),e._v(" "),s("div",{staticClass:"select-tree-level-box",class:{"select-tree-level-box-close":!t.open},style:{"max-height":30*t.count+"px"}},e._l(t.children,function(t,l){return t.show?s("div",{staticClass:"select-tree-level3"},[s("div",{staticClass:"select-tree-level-title"},[s("el-checkbox",{staticClass:"select-tree-checkbox",on:{change:function(t){e.selectOne(i,c,t)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item2.checked"}}),e._v(" "),s("div",{staticClass:"select-tree-name"},[s("span",[e._v(e._s(t.name))])])],1)]):e._e()}))]):e._e()}))])}))])]),e._v(" "),s("div",{staticClass:"projectTransfer-left-right left"},[s("div",{staticClass:"projectTransfer-left-right-content-title"},[e._v("已选（"+e._s(e.selectedProject.length)+"）")]),e._v(" "),s("div",{staticClass:"selected-project-list"},e._l(e.datalist,function(t,i){return s("div",{},e._l(t.children,function(t,i){return s("div",e._l(t.children,function(i,c){return i.checked?s("div",{staticClass:"selected-project-item"},[s("span",{staticClass:"icon-close",on:{click:function(e){i.checked=!1}}}),e._v(" "),s("img",{attrs:{src:t.url,alt:""},on:{error:function(t){e.getImgurl()}}}),e._v(" "),s("em",[e._v(e._s(t.name))]),e._v(" "+e._s(i.name)+"\n\t\t\t\t\t\t\t\t\t")]):e._e()}))}))}))])]),e._v(" "),s("div",{staticClass:"projectTransfer-left-bottom clear"},[s("div",{staticClass:"projectTransfer-left-left left"},[s("div",{staticClass:"projectTransfer-left-left-title"},[e._v("步骤二：选择转承人员")]),e._v(" "),s("div",{staticClass:"select-tree"},[s("div",{staticClass:"search-inputbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filterText1,expression:"filterText1"}],attrs:{placeholder:"输入人员姓名进行搜索"},domProps:{value:e.filterText1},on:{keyup:e.filterPeople,input:function(t){t.target.composing||(e.filterText1=t.target.value)}}}),e._v(" "),0!=e.filterText1.length?s("i",{staticClass:"el-icon-circle-close",on:{click:e.clearFilterPeople}}):e._e(),e._v(" "),s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),s("div",{staticClass:"projectTransfer-left-left-treetitle"},[e._v("部门")]),e._v(" "),e.noPeople?s("div",{staticClass:"nodata"},[s("i",{staticClass:"el-icon-info"}),e._v("没有相关数据")]):e._e(),e._v(" "),s("div",{staticClass:"select-tree-list"},e._l(e.peoplelist,function(t,i){return s("div",{staticClass:"select-tree-level1"},[t.show?s("div",{staticClass:"select-tree-level-title",on:{click:function(e){t.open=!t.open}}},[s("span",{staticClass:"icon-list-close",class:{"icon-list-open":!t.open}}),e._v(" "),s("div",{staticClass:"select-tree-name"},[s("span",[e._v(e._s(t.name))])])]):e._e(),e._v(" "),s("div",{staticClass:"select-tree-level-box",class:{"select-tree-level-box-close":!t.open},style:{"max-height":30*t.count+"px"}},e._l(t.children,function(t,c){return s("div",{staticClass:"select-tree-level2"},[t.show?s("div",{staticClass:"select-tree-level-title",on:{click:function(e){t.open=!t.open}}},[s("el-checkbox",{staticClass:"select-tree-checkbox",attrs:{size:"mini"},on:{change:function(t){e.selectOnePeople(i,c,t)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item1.checked"}}),s("img",{staticClass:"select-tree-level2-title-headerimg",attrs:{src:t.url},on:{error:e.getImgurl}}),e._v(" "),s("div",{staticClass:"select-tree-name"},[s("span",[e._v(e._s(t.name))])])],1):e._e()])}))])}))])]),e._v(" "),s("div",{staticClass:"projectTransfer-left-right left"},[s("div",{staticClass:"projectTransfer-left-right-content-title"},[e._v("已选（"+e._s(e.selectedPeopleCount)+"）")]),e._v(" "),s("div",{staticClass:"selected-project-list"},e._l(e.peoplelist,function(t,i){return s("div",e._l(t.children,function(t,i){return t.checked?s("div",{staticClass:"selected-project-item"},[s("span",{staticClass:"icon-close",on:{click:function(e){t.checked=!t.checked}}}),e._v(" "+e._s(t.name)+"\n\t\t\t\t\t\t\t\t")]):e._e()}))}))])]),e._v(" "),s("div",{staticClass:"projectTransfer-left-bottom-btnbox clear"},[s("div",{staticClass:"save-vicarious-btn btn-blue right",class:{"btn-blue-disabled":!e.submitOk},on:{click:e.commitClick}},[e._v("提交")])])]),e._v(" "),s("div",{staticClass:"projectTransfer-right"},[e._m(1),e._v(" "),s("div",{staticClass:"transferhistory-list"},e._l(e.historylist,function(t){return s("div",{staticClass:"transferhistory-item"},[s("div",{staticClass:"transferhistory-item-time"},[s("span"),e._v(" "+e._s(t.add_time)+"\n\t\t\t\t\t\t")]),e._v(" "),s("div",{staticClass:"transferhistory-item-name"},[e._v(e._s(t.user_name)),s("em",[e._v("转接")]),e._v(e._s(t.zc_name))]),e._v(" "),s("div",{staticClass:"transferhistory-item-content"},[e._v(e._s(t.company_name))])])}))])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content-title clear"},[t("div",{staticClass:"left"},[this._v("项目转承")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"projectTransfer-right-title"},[t("span",{staticClass:"transfer-icon"}),this._v("项目转承记录\n\t\t\t\t")])}]};var o=s("C7Lr")(a,r,!1,function(e){s("HELX")},"data-v-47c5fef0",null);t.default=o.exports},HELX:function(e,t){}});
//# sourceMappingURL=144.aa0b3e59a28fa77d5c42.js.map