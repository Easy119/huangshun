{"version":3,"sources":["webpack:///src/pages/systemManage/organizationStructure.vue","webpack:///./src/pages/systemManage/organizationStructure.vue?b6cb","webpack:///./src/pages/systemManage/organizationStructure.vue"],"names":["organizationStructure","name","data","dialogTitle","dialogVisible","departmentName","companyData","defaultProps","children","label","isAllCheck","selectedNodes","depart_id","pid","dialogType","created","this","getData","methods","_this","Object","api","type","then","res","console","log","msgNo","addUnionId","payload","mUtils","message","rename","id","remove","node","is_user","multiDeleteUser","toDeleteDepartment","addDepartment","status","toAddDepartment","_this2","depart_name","_this3","catch","_this4","selectedId","push","$refs","tree","getCheckedKeys","user_ids","decodeSelectedUserId","cancel","allSelect","getAllEmployeeData","setCheckedNodes","i","$set","one_department_id","selectedEmployeeId","splitArr","max","length","split","join","systemManage_organizationStructure","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","directives","rawName","value","expression","attrs","domProps","checked","Array","isArray","_i","change","$$a","$$el","target","$$c","$$i","concat","slice","_m","ref","default-expand-all","check-strictly","props","show-checkbox","node-key","expand-on-click-node","scopedSlots","_u","key","fn","_s","size","stopPropagation","parent","custom-class","append-to-body","title","visible","width","center","update:visible","placeholder","clearable","model","callback","$$v","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/196.748819c6d8982cbb87be.js","sourcesContent":["<template>\r\n\t<div class=\"personal-content-body\">\r\n\t\t<div class=\"table-content-right\">\r\n\t\t\t<div class=\"table-group\">\r\n\t\t\t\t<div class=\"table-group-content\">\r\n\t\t\t\t\t<div class=\"clear table-group-title\">\r\n\t\t\t\t\t\t<div class=\"right flex_end\">\r\n\t\t\t\t\t\t\t<div @click=\"multiDeleteUser(0)\" class=\"table_group_title_delete cursor\">\r\n\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div @click=\"addDepartment(1)\" class=\"table-group-title-btn btn-blue\">\r\n\t\t\t\t\t\t\t\t<span class=\"iconfont icon-jia\"></span>添加新部门\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<!-- 树状图  数据列表 -->\r\n\t\t\t\t\t<div class=\"tree_table_box\">\r\n\t\t\t\t\t\t<div class=\"tree_table\">\r\n\t\t\t\t\t\t\t<div class=\"tree_header flex_between\">\r\n\t\t\t\t\t\t\t\t<div class=\"tree_header_left\">\r\n\t\t\t\t\t\t\t\t\t<input @change=\"allSelect\" v-model=\"isAllCheck\" type=\"checkbox\" name=\"\" id=\"\" value=\"\" />\r\n\t\t\t\t\t\t\t\t\t<span>全选</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"tree_header_right flex_end\">\r\n\t\t\t\t\t\t\t\t\t<div> 添加子部门 </div>\r\n\t\t\t\t\t\t\t\t\t<div> 重命名 </div>\r\n\t\t\t\t\t\t\t\t\t<div> 删除 </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<el-tree ref=\"tree\" default-expand-all check-strictly :props=\"defaultProps\" :data=\"companyData\" show-checkbox node-key=\"id\" :expand-on-click-node=\"true\">\r\n\t\t\t\t\t\t\t\t<span class=\"custom-tree-node flex_between\" slot-scope=\"{ node, data }\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ node.label }}</span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"flex_end\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"\" v-if=\"node.data.is_user||node.data.name=='待分配'\">\n\t\t\t\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click.stop=\"\"> -- </el-button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"\" v-else>\n\t\t\t\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click.stop=\"addDepartment(2,data)\"> 添加 </el-button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"\" v-if=\"node.data.is_user||node.data.name=='待分配'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click.stop=\"\"> -- </el-button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"\" v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click.stop=\"rename(data)\"> 重命名 </el-button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"\" v-if=\"node.data.name=='待分配' || node.parent.data.name == '待分配'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click.stop=\"\"> -- </el-button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"\" v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click.stop=\"remove(node, data)\"> 删除 </el-button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</el-tree>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 弹出框模块开始 -->\r\n\t\t<el-dialog custom-class=\"pop\" append-to-body :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"400px\" center>\r\n\t\t\t<div class=\"dialog_body\">\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"pop_input_text\">\r\n\t\t\t\t\t部门名称\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pop_input_box\">\r\n\t\t\t\t\t<el-input v-model=\"departmentName\" placeholder=\"请输入部门名称\" clearable>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<!--<div class=\"dialog_body_title\">\r\n\t\t\t\t\t<span>部门名称</span>\r\n\t\t\t\t\t<img src=\"../../../static/images/star.png\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t<input v-model=\"departmentName\" type=\"text\" name=\"\" id=\"\" value=\"\" />\r\n\t\t\t\t</div>-->\r\n\t\t\t</div>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t    <el-button @click=\"cancel\">取 消</el-button>\r\n\t\t\t    <el-button type=\"primary\" @click=\"toAddDepartment\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 弹出框模块结束 -->\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport { dialogConfirm, dialogConfirmHasbtn } from '../../config/mUtils'\r\n\timport { getCompanyDepartmentApi,deleteSelectUserApi,deleteDepartmentApi,addDepartmentApi } from '../../config/api'\r\n\texport default {\r\n\t\tname: 'organizationStructure',\r\n\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdialogTitle: '添加部门',\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tdepartmentName: '',\r\n\t\t\t\tcompanyData: [],\r\n\t\t\t\tdefaultProps: {\r\n\t\t\t\t\tchildren: 'children',\r\n\t\t\t\t\tlabel: 'name'\r\n\t\t\t\t},\r\n\t\t\t\tisAllCheck: false,\r\n\t\t\t\tselectedNodes: [],\r\n\t\t\t\tdepart_id: 0,\r\n\t\t\t\tpid: 0,//新加部门的父id\r\n\t\t\t\tdialogType: 0,//1代表重命名弹出框；2代表添加弹出框\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetData() {\r\n\t\t\t\tgetCompanyDepartmentApi({\r\n\t\t\t\t\ttype: 2\r\n\t\t\t\t}).then(\r\n\t\t\t\t\tres => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif(res.data.msgNo == 1) {\r\n\t\t\t\t\t\t\tthis.companyData = this.addUnionId(res.data.payload);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdialogConfirm('info', res.data.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\trename(data) {\r\n\t\t\t\tthis.departmentName = data.name;\r\n\t\t\t\tthis.dialogTitle = '重命名';\r\n\t\t\t\tthis.dialogType = 1;\r\n\t\t\t\tthis.depart_id = data.id;\r\n\t\t\t\tthis.pid = data.pid;\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t},\r\n\t\t\tremove(node, data) {\r\n\t\t\t\tif (data.is_user) {\r\n\t\t\t\t\tthis.multiDeleteUser(data.id);\r\n\t\t\t\t} else{\r\n\t\t\t\t\tthis.toDeleteDepartment(data.id);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddDepartment(status, data) {\r\n\t\t\t\tthis.dialogType = 2;\r\n\t\t\t\tvar depart_id = '';\r\n\t\t\t\tif(status == 1) {\r\n\t\t\t\t\tthis.dialogTitle = '新建部门';\r\n\t\t\t\t\tthis.pid = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.dialogTitle = '添加子部门';\r\n\t\t\t\t\tthis.pid = data.id;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t},\r\n\t\t\ttoAddDepartment(){\r\n\t\t\t\tif (this.dialogType) {\r\n\t\t\t\t\tif (this.dialogType == 1) {\r\n\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\tdepart_id: this.depart_id,\r\n\t\t\t\t\t\t\tdepart_name: this.departmentName,\r\n\t\t\t\t\t\t\tpid: this.pid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\tdepart_name: this.departmentName,\r\n\t\t\t\t\t\t\tpid: this.pid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\taddDepartmentApi(data).then(res=>{\r\n\t\t\t\t\tif(res.data.msgNo == 1) {\r\n\t\t\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\t\t\tdialogConfirm('success', '操作成功');\r\n\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\t\t\tdialogConfirm('info', res.data.message);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.departmentName = '';\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoDeleteDepartment(depart_id) {\r\n\t\t\t\tvar message = '确认删除该部门？'\r\n\t\t\t\tdialogConfirmHasbtn(message).then(() => {\r\n\t\t\t\t\tdeleteDepartmentApi({\r\n\t\t\t\t\t\tdepart_id: depart_id\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tif(res.data.msgNo == 1) {\r\n\t\t\t\t\t\t\tdialogConfirm('success', '删除成功')\r\n\t\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdialogConfirm('fail', '删除失败')\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(() => {});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tmultiDeleteUser(id){\r\n\t\t\t\tvar selectedId = [];\r\n\t\t\t\tif(id){\r\n\t\t\t\t\tselectedId.push(id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar selectedId = this.$refs.tree.getCheckedKeys();\r\n\t\t\t\t}\r\n\t\t\t\tvar user_ids = this.decodeSelectedUserId(selectedId);\r\n\t\t\t\tdialogConfirmHasbtn('确定要删除所选员工吗').then(() => {\r\n\t\t\t\t\tdeleteSelectUserApi({\r\n\t\t\t\t\t\tuser_ids: user_ids,\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif(res.data.msgNo == 1) {\r\n\t\t\t\t\t\t\tdialogConfirm('success', '删除成功')\r\n\t\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdialogConfirm('fail', '删除失败')\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(() => {});\r\n\t\t\t},\r\n\t\t\tcancel(){\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tthis.departmentName = '';\r\n\t\t\t},\r\n\t\t\tallSelect() {\r\n\t\t\t\tvar arr = [];\r\n\t\t\t\tif(this.isAllCheck) {\r\n\t\t\t\t\tthis.getAllEmployeeData(this.companyData)\r\n\t\t\t\t\tthis.$refs.tree.setCheckedNodes(this.selectedNodes);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$refs.tree.setCheckedNodes([]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetAllEmployeeData(data){\r\n\t\t\t\tfor(var i in data){\r\n\t\t\t\t\tif (data[i].children) {\r\n\t\t\t\t\t\tthis.getAllEmployeeData(data[i].children)\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tif (data[i].is_user) {\r\n\t\t\t\t\t\t\tthis.selectedNodes.push(data[i]);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//给员工的id加一个标识\r\n\t\t\taddUnionId(data){\r\n\t\t\t\tfor(var i in data){\r\n\t\t\t\t\tif (data[i].children) {\r\n\t\t\t\t\t\tthis.$set(data[i],'disabled',true);\r\n\t\t\t\t\t\tthis.addUnionId(data[i].children)\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tif (data[i].is_user) {\r\n\t\t\t\t\t\t\tdata[i].id = data[i].id + '-' + data[i].one_department_id;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$set(data[i],'disabled',true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn data\r\n\t\t\t},\r\n\t\t\t//给加标识的员工id进行解码还原为字符串\r\n\t\t\tdecodeSelectedUserId(data){\r\n\t\t\t\tvar user_ids = '';\r\n\t\t\t\tvar selectedEmployeeId = [];\r\n\t\t\t\tvar splitArr = [];\r\n\t\t\t\tfor (var i = 0,max = data.length;i<max;i++) {\r\n\t\t\t\t\tsplitArr = data[i].split('-');\r\n\t\t\t\t\tselectedEmployeeId.push(splitArr[0]);\r\n\t\t\t\t}\r\n\t\t\t\tuser_ids = selectedEmployeeId.join(',');\r\n\t\t\t\treturn user_ids\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.flex_end {\r\n\t\tdisplay: flex;\r\n\t\tdisplay: -webkit-flex;\r\n\t\tjustify-content: flex-end;\r\n\t\t-webkit-justify-content: flex-end;\r\n\t\talign-items: center;\r\n\t\t-webkit-align-items: center;\r\n\t}\r\n\t\r\n\t.flex_between {\r\n\t\tdisplay: flex;\r\n\t\tdisplay: -webkit-flex;\r\n\t\tjustify-content: space-between;\r\n\t\t-webkit-justify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t-webkit-align-items: center;\r\n\t}\r\n\t/*树节点模块开始*/\r\n\t\r\n\t.custom-tree-node {\r\n\t\t/*width: 1000px;*/\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tfont-size: 12px;\r\n\t\t/*padding-right: 8px;*/\r\n\t}\r\n\t\r\n\t.custom-tree-node span {\r\n\t\twidth: 14%;\r\n\t}\r\n\t\r\n\t.custom-tree-node>span:nth-child(1) {\r\n\t\twidth: 15% !important;\r\n\t\tcolor: #33302D;\r\n\t}\r\n\t\r\n\t.custom-tree-node>span:nth-child(2) {\r\n\t\twidth: 84% !important;\r\n\t}\r\n\t\r\n\t.custom-tree-node button {\r\n\t\twidth: 150px;\r\n\t\tmargin-left: 0;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #8E8E93;\r\n\t}\r\n\t/*表头部分模块*/\r\n\t\r\n\t.tree_table_box {\r\n\t\t/* min-width: 1000px; */\r\n\t\tpadding: 10px 20px;\r\n\t\toverflow-x: scroll;\r\n\t}\r\n\t\r\n\t.tree_table {\r\n\t\tborder: 1px solid #EFF5FA;\r\n\t}\r\n\t\r\n\t.tree_header {\r\n\t\theight: 40px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding-left: 24px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #545454;\r\n\t\tbackground: #F3F6FB;\r\n\t}\r\n\t\r\n\t.tree_header_left {\r\n\t\twidth: 20%;\r\n\t}\r\n\t\r\n\t.tree_header_left input {\r\n\t\twidth: 14px;\r\n\t\theight: 14px;\r\n\t}\r\n\t\r\n\t.tree_header_right {\r\n\t\twidth: 80%;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.tree_header_right div {\r\n\t\twidth: 150px;\r\n\t}\r\n\t/* 弹出层模块 */\r\n\t\r\n\t/*.dialog_body_title {\r\n\t\tdisplay: flex;\r\n\t\tdisplay: -webkit-flex;\r\n\t\tjustify-content: flex-start;\r\n\t\t-webkit-justify-content: flex-start;\r\n\t\talign-items: center;\r\n\t\t-webkit-align-items: center;\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t\r\n\t.dialog_body_title img {\r\n\t\twidth: 15px;\r\n\t\theight: 15px;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\t\r\n\t.dialog_body input {\r\n\t\twidth: 300px;\r\n\t\theight: 40px;\r\n\t\tpadding: 0 15px;\r\n\t\toutline: none;\r\n\t\tborder: none;\r\n\t\tbackground: #EAEAEA;\r\n\t}\r\n\t\r\n\t.dialog_body input:focus {\r\n\t\tborder: 1px solid #6292F4;\r\n\t}\r\n\t\r\n\t.pop .el-dialog__header {\r\n\t\tmargin: 0 30px;\r\n\t}\r\n\t\r\n\t.dialog_body {\r\n\t\tpadding: 0 5px;\r\n\t\tfont-size: 14px;\r\n\t}*/\r\n\t\r\n\t.table_group_title_delete {\r\n\t\tmargin-right: 20px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #6292F4;\r\n\t}\r\n\t\r\n\t.pop_input_text{\r\n\t\tmargin: 16px 0;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #8E8E93;\r\n\t\ttext-align: center;\r\n\t}\r\n\t.pop_input_box{\r\n\t\twidth: 270px;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\t.table-group-title {\r\n\t\tpadding: 20px 30px 10px 30px;\r\n\t}\r\n\t.tree_table_box{\r\n\t\tpadding: 0 30px;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/systemManage/organizationStructure.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personal-content-body\"},[_c('div',{staticClass:\"table-content-right\"},[_c('div',{staticClass:\"table-group\"},[_c('div',{staticClass:\"table-group-content\"},[_c('div',{staticClass:\"clear table-group-title\"},[_c('div',{staticClass:\"right flex_end\"},[_c('div',{staticClass:\"table_group_title_delete cursor\",on:{\"click\":function($event){_vm.multiDeleteUser(0)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t删除\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"table-group-title-btn btn-blue\",on:{\"click\":function($event){_vm.addDepartment(1)}}},[_c('span',{staticClass:\"iconfont icon-jia\"}),_vm._v(\"添加新部门\\n\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tree_table_box\"},[_c('div',{staticClass:\"tree_table\"},[_c('div',{staticClass:\"tree_header flex_between\"},[_c('div',{staticClass:\"tree_header_left\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isAllCheck),expression:\"isAllCheck\"}],attrs:{\"type\":\"checkbox\",\"name\":\"\",\"id\":\"\",\"value\":\"\"},domProps:{\"checked\":Array.isArray(_vm.isAllCheck)?_vm._i(_vm.isAllCheck,\"\")>-1:(_vm.isAllCheck)},on:{\"change\":[function($event){var $$a=_vm.isAllCheck,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=\"\",$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isAllCheck=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isAllCheck=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isAllCheck=$$c}},_vm.allSelect]}}),_vm._v(\" \"),_c('span',[_vm._v(\"全选\")])]),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"default-expand-all\":\"\",\"check-strictly\":\"\",\"props\":_vm.defaultProps,\"data\":_vm.companyData,\"show-checkbox\":\"\",\"node-key\":\"id\",\"expand-on-click-node\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node flex_between\"},[_c('span',[_vm._v(_vm._s(node.label))]),_vm._v(\" \"),_c('span',{staticClass:\"flex_end\"},[(node.data.is_user||node.data.name=='待分配')?_c('div',{},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\" -- \")])],1):_c('div',{},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();_vm.addDepartment(2,data)}}},[_vm._v(\" 添加 \")])],1),_vm._v(\" \"),(node.data.is_user||node.data.name=='待分配')?_c('div',{},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\" -- \")])],1):_c('div',{},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();_vm.rename(data)}}},[_vm._v(\" 重命名 \")])],1),_vm._v(\" \"),(node.data.name=='待分配' || node.parent.data.name == '待分配')?_c('div',{},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\" -- \")])],1):_c('div',{},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();_vm.remove(node, data)}}},[_vm._v(\" 删除 \")])],1)])])}}])})],1)])])])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"custom-class\":\"pop\",\"append-to-body\":\"\",\"title\":_vm.dialogTitle,\"visible\":_vm.dialogVisible,\"width\":\"400px\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog_body\"},[_c('div',{staticClass:\"pop_input_text\"},[_vm._v(\"\\n\\t\\t\\t\\t部门名称\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"pop_input_box\"},[_c('el-input',{attrs:{\"placeholder\":\"请输入部门名称\",\"clearable\":\"\"},model:{value:(_vm.departmentName),callback:function ($$v) {_vm.departmentName=$$v},expression:\"departmentName\"}})],1)]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.toAddDepartment}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree_header_right flex_end\"},[_c('div',[_vm._v(\" 添加子部门 \")]),_vm._v(\" \"),_c('div',[_vm._v(\" 重命名 \")]),_vm._v(\" \"),_c('div',[_vm._v(\" 删除 \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-17adf476\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/systemManage/organizationStructure.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-17adf476\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./organizationStructure.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./organizationStructure.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./organizationStructure.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17adf476\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./organizationStructure.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-17adf476\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/systemManage/organizationStructure.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}