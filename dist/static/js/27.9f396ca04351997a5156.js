webpackJsonp([27],{MAA6:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("3cXf"),i=e.n(s),n=e("2hMI"),o=e("yclV"),l={data:function(){return{hasData:!0,datalist:[],searchText:"",pageSize:10,currentPage:1,total:null,layout:"sizes,prev,pager,next",selectAll:!1,watchID:"",companyList:[],totalCompanyList:[],loading:!1,companyId:"",canClickAll:!1}},created:function(){this.$route.query.page&&(this.currentPage=parseInt(this.$route.query.page)),this.getDatalist(),this.getCompanyList()},computed:{selectedPeople:function(){var t=[];return this.datalist.forEach(function(a){a.checked&&t.push(a.id)}),t}},methods:{initData:function(){this.currentPage=1,this.getDatalist()},getCompanyList:function(){var t=this;Object(n._12)().then(function(a){1==a.data.msgNo&&(t.totalCompanyList=a.data.payload,t.companyList=t.totalCompanyList.slice(0,20))})},remoteMethod:function(t){var a=this;""!==t?(this.loading=!0,setTimeout(function(){a.loading=!1,a.companyList=a.totalCompanyList.filter(function(a){return a.name.indexOf(t)>-1})},200)):this.companyList=[]},getDatalist:function(){var t=this,a={number:this.pageSize,page:this.currentPage,search:this.searchText};""!=this.companyId&&(a.companyId=this.companyId),Object(n._33)(a).then(function(a){if(1==a.data.msgNo){var e=a.data.payload.data;e.forEach(function(t){t.checked=!1}),t.datalist=e,""==t.searchText&&""==t.companyId&&0==t.datalist.length?t.hasData=!1:t.hasData=!0,t.total=a.data.payload.total,t.canClickAllMethod()}})},handleSizeChange:function(t){this.pageSize=t,this.getDatalist()},handleCurrentChange:function(t){this.total>this.pageSize&&(this.currentPage=t,this.getDatalist())},canClickAllMethod:function(){var t=this,a=0;this.datalist.forEach(function(e){"查询失败"!=e.status&&"查询中"!=e.status||a++,0!=a&&a==t.datalist.length&&(t.canClickAll=!0)})},selectallclick:function(t){this.datalist.forEach(function(a){"查询失败"!=a.status&&"查询中"!=a.status&&(a.checked=t)})},selectoneclick:function(){var t=0;this.datalist.forEach(function(a){a.checked&&t++}),0!=t&&t==this.datalist.length?this.selectAll=!0:this.selectAll=!1},gotoAdd:function(){this.$router.push({name:"creditQueryAdd"})},toDelete:function(t){var a=this;Object(o.h)("确定要删除该条征信查询信息？").then(function(){Object(n._40)({id:t}).then(function(t){1==t.data.msgNo?(a.getDatalist(),Object(o.g)("success","删除成功")):Object(o.g)("info",t.data.message)})}).catch(function(){})},toWatch:function(t){console.log(t),this.$router.push({name:"creditQueryView",query:{id:t,page:this.currentPage}})},toWatchMany:function(){if(1==this.selectedPeople.length)this.$router.push({name:"creditQueryView",query:{id:this.selectedPeople[0]}});else if(this.selectedPeople.length>1){var t=JSON.parse(i()(this.selectedPeople));this.$router.push({name:"creditQueryView",query:{id:t.join(",")}})}else Object(o.g)("info","请先选择征信人")},handleSelectionChange:function(t,a){t.forEach(function(t,a){"查询失败"!=t.status&&"查询中"!=t.status&&(t.checked=!0)}),console.log(t,a)}}},c={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"personal-content-body body"},[s("div",{staticClass:"table-content"},[s("div",{staticClass:"account-group table-group"},[t.hasData?s("div",{staticClass:"table-group-content clear"},[s("div",{staticClass:"clear table-group-title"},[s("div",{staticClass:"left"},[t.hasData?s("el-input",{staticClass:"header-right-time left",attrs:{placeholder:"搜索",clearable:!0},on:{change:t.initData},model:{value:t.searchText,callback:function(a){t.searchText=a},expression:"searchText"}},[s("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})]):t._e(),t._v(" "),s("el-select",{staticClass:"header-right-time header-right-time-query right",staticStyle:{"margin-left":"13px"},attrs:{filterable:"",clearable:"",placeholder:"选择项目","remote-method":t.remoteMethod,loading:t.loading},on:{change:t.initData},model:{value:t.companyId,callback:function(a){t.companyId=a},expression:"companyId"}},t._l(t.companyList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"historyapply-group-top-btn right",on:{click:t.gotoAdd}},[s("span",{staticClass:"filemanage-icon icon-tosearch"}),t._v("新建查询\n              ")]),t._v(" "),s("div",{staticClass:"historyapply-group-top-btn right",on:{click:t.toWatchMany}},[s("span",{staticClass:"filemanage-icon icon-download"}),t._v("查看信用报告\n              ")])])]),t._v(" "),s("div",{staticClass:"historyapply-group-tablebox table-group-tablebox table"},[s("el-table",{attrs:{data:t.datalist,border:""},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection"}}),t._v(" "),s("el-table-column",{attrs:{prop:"index",label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.$index+1))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"征信人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"company",label:"所属公司"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row.company)+"征信查询")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"username",label:"查询人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{class:{isDanger:"有风险"==a.row.status}},[t._v(t._s(a.row.status))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"update_time",label:"查询时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"source",label:"来源"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.source?s("span",[t._v("APP端")]):t._e(),t._v(" "),2==a.row.source?s("span",[t._v("网页端")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return["查询失败"!=a.row.status&&"查询中"!=a.row.status?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.toWatch(a.row.id)}}},[t._v("查看")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.toDelete(a.row.id)}}},[t._v("删除")])]}}])}),t._v(" "),s("template",{slot:"empty"},[s("div",{staticClass:"table-nodata"},[s("img",{attrs:{src:e("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t")])])],2),t._v(" "),t.total?s("div",{},[s("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)]):t._e(),t._v(" "),t.hasData?t._e():s("div",{staticClass:"nodata-container"},[s("div",{staticClass:"nodata-title"},[s("h2",[t._v("全覆盖征信查询")]),t._v(" "),s("h3",[t._v("帮助机构规避企业关键人员失信风险")]),t._v(" "),s("input",{staticClass:"nodata-btn-create",attrs:{type:"button",value:"开始查询"},on:{click:t.gotoAdd}})]),t._v(" "),t._m(0)])])])])},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"nodata-img-container"},[s("div",{staticClass:"nodata-img-item"},[s("img",{staticClass:"nodata-img-item-img",attrs:{src:e("NcUM")}}),t._v(" "),s("p",{staticClass:"nodata-img-item-text"},[t._v("政府信用公告，第三方金融机构信用信息全覆盖")])]),t._v(" "),s("div",{staticClass:"nodata-img-item"},[s("img",{staticClass:"nodata-img-item-img",attrs:{src:e("NUjH")}}),t._v(" "),s("p",{staticClass:"nodata-img-item-text"},[t._v("网页手机数据打通，网页查，手机看，信息随身走")])]),t._v(" "),s("div",{staticClass:"nodata-img-item"},[s("img",{staticClass:"nodata-img-item-img",attrs:{src:e("qJBZ")}}),t._v(" "),s("p",{staticClass:"nodata-img-item-text"},[t._v("可将征信信息导出报告")])])])}]};var r=e("C7Lr")(l,c,!1,function(t){e("v5JP")},"data-v-35e36c91",null);a.default=r.exports},NUjH:function(t,a,e){t.exports=e.p+"static/img/creditquery_nodata2.3bcaf6a.png"},NcUM:function(t,a,e){t.exports=e.p+"static/img/creditquery_nodata1.51fa73b.png"},qJBZ:function(t,a,e){t.exports=e.p+"static/img/creditquery_nodata3.9936bc2.png"},v5JP:function(t,a){}});
//# sourceMappingURL=27.9f396ca04351997a5156.js.map