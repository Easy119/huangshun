webpackJsonp([160],{"1vgz":function(t,a){},eVoa:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("HzJ8"),s=e.n(i),n=e("3cXf"),l=e.n(n),c=e("2hMI"),o=e("yclV"),r={data:function(){return{introDialogVisible:!1,checkedCities:["is_chuqin","is_xiuxi","is_chucai","is_waichu","is_qinjia"],cities:[{paramsKey:"is_chuqin",paramsValue:"出勤天数"},{paramsKey:"is_xiuxi",paramsValue:"休息时间"},{paramsKey:"is_chucai",paramsValue:"出差时间"},{paramsKey:"is_waichu",paramsValue:"外出时间"},{paramsKey:"is_qinjia",paramsValue:"请假时间"}],BeginDate:"",LastDate:"",depart_id:"",is_lizhi:!1,userList:[],allData:[],headData:[],haveFilterData:[]}},mounted:function(){},created:function(){this.toGetUserCompany();var t=(new Date).Format("yyyy-MM-dd"),a=(new Date).Format("yyyy-MM-dd").split("-");a.splice(2,1,"01"),a=a.join("-"),this.BeginDate=a,this.LastDate=t,this.toGetDataList()},methods:{showIntroModal:function(){this.introDialogVisible=!0},handleCheckedCitiesChange:function(t){},toGetUserCompany:function(){var t=this;Object(c._235)().then(function(a){1==a.data.msgNo&&(t.userList=a.data.payload)})},filterData:function(){var t=this;this.haveFilterData=[];var a="";this.userList.forEach(function(e){e.id==t.depart_id&&(a=e.name)}),""!=a?this.allData.forEach(function(e){e.is_depart==a&&t.haveFilterData.push(e)}):this.haveFilterData=JSON.parse(l()(this.allData)),this.is_lizhi||this.haveFilterData.forEach(function(a,e){"离职"==a.status&&t.haveFilterData.splice(e,1)})},toGetDataList:function(t){var a=this,e={is_chuqin:1,is_xiuxi:1,is_chucai:1,is_waichu:1,is_qinjia:1,is_lizhi:1,is_depart:1,depart_id:""};if(""==this.BeginDate||""==this.LastDate)return Object(o.g)("info","请选择时间"),!1;var i=new Date(this.BeginDate),s=new Date(this.LastDate);if(i.getTime()>s.getTime())return Object(o.g)("info","开始时间不能大于结束时间"),!1;e.BeginDate=this.BeginDate,e.LastDate=this.LastDate,Object(c._9)(e).then(function(t){if(1==t.data.msgNo){a.allData=t.data.payload.data;var e=t.data.payload.head;for(var i in a.headData=[],e){var s={titleKey:i,titleValue:e[i]};s.type="shijia"==i||"chanjia"==i||"nianjia"==i||"bingjia"==i||"peichanjia"==i||"sangjia"==i||"tiaojia"==i?"is_qinjia":"user_name"==i||"status"==i||"is_depart"==i?0:i,a.headData.push(s)}a.filterData()}})},todownLoadExcel:function(){var t={},a=!0,e=!1,i=void 0;try{for(var n,l=s()(this.checkedCities);!(a=(n=l.next()).done);a=!0){t[n.value]=1}}catch(t){e=!0,i=t}finally{try{!a&&l.return&&l.return()}finally{if(e)throw i}}t.BeginDate=this.BeginDate,t.LastDate=this.LastDate,t.is_depart=1,t.depart_id=this.depart_id,this.is_lizhi&&(t.is_lizhi=1),console.log(t),Object(c._8)(t).then(function(t){1==t.data.msgNo?window.location.href=t.data.payload:Object(o.g)("info",t.data.message)})}}},d={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"personal-content-body"},[i("div",{staticClass:"content"},[i("div",{staticClass:"credit-box credit-box1"},[i("span",[t._v("展示列：")]),t._v(" "),i("div",{staticClass:"credit_right"},[i("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedCities,callback:function(a){t.checkedCities=a},expression:"checkedCities"}},t._l(t.cities,function(a,e){return i("el-checkbox",{key:e,attrs:{label:a.paramsKey}},[t._v(t._s(a.paramsValue))])}))],1)]),t._v(" "),i("div",{staticClass:"credit-box"},[i("span",[t._v("时间：")]),t._v(" "),i("el-date-picker",{staticClass:"credit-box-data-select  credit-box-data-select1",attrs:{type:"date",editable:!1,placeholder:"开始日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:t.toGetDataList},model:{value:t.BeginDate,callback:function(a){t.BeginDate=a},expression:"BeginDate"}}),t._v(" "),i("span",[t._v("至")]),t._v(" "),i("el-date-picker",{staticClass:"credit-box-data-select credit-box-data-select2",attrs:{type:"date",editable:!1,placeholder:"结束日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:t.toGetDataList},model:{value:t.LastDate,callback:function(a){t.LastDate=a},expression:"LastDate"}}),t._v(" "),i("span",[t._v("部门/人员：")]),t._v(" "),i("el-select",{staticClass:"select-department",attrs:{placeholder:"请选择",clearable:!0},on:{change:function(a){t.filterData()}},model:{value:t.depart_id,callback:function(a){t.depart_id=a},expression:"depart_id"}},t._l(t.userList,function(t,a){return i("el-option",{key:a,attrs:{label:t.name,value:t.id}})})),t._v(" "),i("el-checkbox",{on:{change:function(a){t.filterData()}},model:{value:t.is_lizhi,callback:function(a){t.is_lizhi=a},expression:"is_lizhi"}},[t._v("离职员工"),i("span",{staticClass:"tishi"},[t._v("（保留三个月）")])])],1),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"daochu_btn"},[i("div",{staticClass:"right",on:{click:t.todownLoadExcel}},[i("div",{staticClass:"table-group-title-btn btn-blue"},[t._v("\n\t\t\t\t\t导出报表\n\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"left"},[i("div",{staticClass:"intro_btn",on:{click:t.showIntroModal}},[i("i",{staticClass:"el-icon-question"}),t._v("说明")])])]),t._v(" "),i("div",{staticClass:"table",staticStyle:{padding:"0"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.haveFilterData,border:""}},[t._l(t.headData,function(a,e){return-1!=t.checkedCities.indexOf(a.type)||0==a.type?i("el-table-column",{key:e,attrs:{index:e,prop:a.titleKey,label:a.titleValue,fit:"","min-width":"150px"}}):t._e()}),t._v(" "),i("template",{slot:"empty"},[i("div",{staticClass:"table-nodata"},[i("img",{attrs:{src:e("urJZ")}}),t._v(" 没有对应数据\n\t\t\t\t\t")])])],2)],1)]),t._v(" "),i("el-dialog",{staticClass:"dialog-content-movefile applyfun-modal",attrs:{title:"报表字段说明",visible:t.introDialogVisible,width:"400px",center:"","append-to-body":!0},on:{"update:visible":function(a){t.introDialogVisible=a}}},[i("div",{staticClass:"dialog_content",staticStyle:{padding:"0px 20px 20px"}},[i("div",[i("strong",{},[t._v("出勤天数：")]),t._v("统计本月法定工作日天数\n\t\t\t")]),t._v(" "),i("div",[i("strong",{},[t._v("出差天数：")]),t._v("出差天数会自动减去假期，如周五至下周一出差，此处只记录为2天\n\t\t\t")])])])],1)},staticRenderFns:[]};var h=e("C7Lr")(r,d,!1,function(t){e("1vgz")},"data-v-39eacec8",null);a.default=h.exports}});
//# sourceMappingURL=160.84b352aa0ab84ad33036.js.map